(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var angular=require("angular");require("angular-ui-router");require("angular-ui-bootstrap");require("./components");var app=angular.module("calculatorApp",["ui.router","ui.bootstrap","components"]);app.config(function calculatorConfig($urlRouterProvider){$urlRouterProvider.otherwise("/home")})},{"./components":4,angular:94,"angular-ui-bootstrap":78,"angular-ui-router":82}],2:[function(require,module,exports){"use strict";var angular=require("angular");angular.module("MathGuy",[]).service("dude",function(){var right="r";var left="l";var lp="(";var rp=")";var arithmetic={"+":1,"-":1,"*":1,"รท":1,"^":1};var assoc={"*":left,"รท":left,"+":left,"-":left,"^":right};var prec={"*":3,"รท":3,"+":2,"-":2,"^":4};var plus="+";var minus="-";var div="รท";var mult="*";var exp="^";var l="";var r="";var ans=0;var perform="";var expression="";var data={value:0,sci:false};var currentVal="";var leftDone=false;var haveRight=false;var allowDecimal=true;var clear=function clear(){data.value=0;expression="";l="";r="";ans=0;haveRight=false;allowDecimal=true;leftDone=false;currentVal=""};var isSci=function isSci(){return data.sci};var digit=function digit(d){if(data.sci){expression+=d;data.value=expression;currentVal+=d}else{if(leftDone){r+=d.toString();data.value=parseFloat(r).toLocaleString();haveRight=true}else{l+=d.toString();data.value=parseFloat(l).toLocaleString()}}};var operator=function operator(o){if(data.sci){expression+=" "+o+" ";data.value=expression;currentVal=""}else{if(haveRight){equals();perform=o}else{perform=o}allowDecimal=true;leftDone=true}};var equals=function equals(){if(data.sci){var final=calcIt(stackIt(expression));data.value=final;expression=final}else{if(leftDone&&haveRight){evaluate();haveRight=false}}};var evaluate=function evaluate(){var lv=parseFloat(l);var rv=parseFloat(r);switch(perform){case plus:ans=lv+rv;break;case minus:ans=lv-rv;break;case div:ans=lv/rv;break;case mult:ans=lv*rv;break;case exp:ans=Math.pow(lv,rv);break}l=ans.toString();r="";data.value=parseFloat(ans).toLocaleString()};var decimal=function(){if(data.sci){if(currentVal.indexOf(".")===-1){if(currentVal===""){expression+="0"}expression+=".";currentVal+=".";data.value=expression}}else{if(!leftDone&&allowDecimal){l+=".";data.value=l}else if(leftDone&&allowDecimal){r+=".";data.value=r}allowDecimal=false}};var toggleSci=function toggleSci(){data.sci=!data.sci;clear()};var stackIt=function stackIt(string){var trimmed=string.replace(/\s+/g,"");var output=[];var operators=[];var operand="operand";var numnum="numnum";var tokens=trimmed.split("");var o="";var kind="";tokens.forEach(function(t){var val=parseFloat(t,10);if(isNaN(val)){kind=operand}else{kind=numnum}if(kind===numnum){output.push(val)}else if(t in arithmetic){o=operators[operators.length-1];while(o in arithmetic&&(assoc[t]===left&&prec[t]<=prec[o]||assoc[t]===right&&prec[t]<prec[o])){output.push(operators.pop());o=operators[operators.length-1]}operators.push(t)}else if(t===lp){operators.push(t)}else if(t===rp){o=operators[operators.length-1];while(o!==lp){output.push(operators.pop());o=operators[operators.length-1]}operators.pop()}else{}});var n=operators.length;for(var i=0;i<n;i++){output.push(operators.pop())}return output};var calcIt=function calcIt(tokens){var l1="";var r1="";var stack=[];tokens.forEach(function(t){if(!(t in arithmetic)){stack.push(t)}else{r1=stack.pop();l1=stack.pop();if(t===plus){stack.push(l1+r1)}else if(t===minus){stack.push(l1-r1)}else if(t===mult){stack.push(l1*r1)}else if(t===exp){stack.push(Math.pow(l1,r1))}else if(t===div){stack.push(l1/r1)}else{}}});return stack.pop()};var paren=function paren(p){expression+=p;data.value=expression};return{clear:clear,data:data,toggleSci:toggleSci,isSci:isSci,digit:digit,operator:operator,equals:equals,decimal:decimal,paren:paren}})},{angular:94}],3:[function(require,module,exports){"use strict";var angular=require("angular");angular.module("components.home",["MathGuy"]).config(function homeconf($stateProvider){$stateProvider.state("home",{url:"/home",component:"homeComponent"})}).component("homeComponent",{templateUrl:"components/home/home.tpl.html",controller:function(dude){var ctrl=this;ctrl.calculon=dude}})},{angular:94}],4:[function(require,module,exports){"use strict";require("./home/home.js");require("./MathGuy/mathguy.js");var angular=require("angular");angular.module("components",["components.home","MathGuy"])},{"./MathGuy/mathguy.js":2,"./home/home.js":3,angular:94}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=require("./predicates");var hof_1=require("./hof");var coreservices_1=require("./coreservices");var w=typeof window==="undefined"?{}:window;var angular=w.angular||{};exports.fromJson=angular.fromJson||JSON.parse.bind(JSON);exports.toJson=angular.toJson||JSON.stringify.bind(JSON);exports.copy=angular.copy||_copy;exports.forEach=angular.forEach||_forEach;exports.extend=Object.assign||_extend;exports.equals=angular.equals||_equals;function identity(x){return x}exports.identity=identity;function noop(){}exports.noop=noop;function createProxyFunctions(source,target,bind,fnNames,latebind){if(latebind===void 0){latebind=false}var bindFunction=function(fnName){return source()[fnName].bind(bind())};var makeLateRebindFn=function(fnName){return function lateRebindFunction(){target[fnName]=bindFunction(fnName);return target[fnName].apply(null,arguments)}};fnNames=fnNames||Object.keys(source());return fnNames.reduce(function(acc,name){acc[name]=latebind?makeLateRebindFn(name):bindFunction(name);return acc},target)}exports.createProxyFunctions=createProxyFunctions;exports.inherit=function(parent,extra){return exports.extend(Object.create(parent),extra)};var restArgs=function(args,idx){if(idx===void 0){idx=0}return Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(args,idx))};exports.inArray=hof_1.curry(_inArray);function _inArray(array,obj){return array.indexOf(obj)!==-1}exports._inArray=_inArray;exports.removeFrom=hof_1.curry(_removeFrom);function _removeFrom(array,obj){var idx=array.indexOf(obj);if(idx>=0)array.splice(idx,1);return array}exports._removeFrom=_removeFrom;exports.pushTo=hof_1.curry(_pushTo);function _pushTo(arr,val){return arr.push(val),val}exports._pushTo=_pushTo;exports.deregAll=function(functions){return functions.slice().forEach(function(fn){typeof fn==="function"&&fn();exports.removeFrom(functions,fn)})};function defaults(opts){var defaultsList=[];for(var _i=1;_i<arguments.length;_i++){defaultsList[_i-1]=arguments[_i]}var _defaultsList=defaultsList.concat({}).reverse();var defaultVals=exports.extend.apply(null,_defaultsList);return exports.extend({},defaultVals,pick(opts||{},Object.keys(defaultVals)))}exports.defaults=defaults;exports.mergeR=function(memo,item){return exports.extend(memo,item)};function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n])break;path.push(first.path[n])}return path}exports.ancestors=ancestors;function pick(obj,propNames){var objCopy={};for(var prop_1 in obj){if(propNames.indexOf(prop_1)!==-1){objCopy[prop_1]=obj[prop_1]}}return objCopy}exports.pick=pick;function omit(obj,propNames){return Object.keys(obj).filter(hof_1.not(exports.inArray(propNames))).reduce(function(acc,key){return acc[key]=obj[key],acc},{})}exports.omit=omit;function pluck(collection,propName){return map(collection,hof_1.prop(propName))}exports.pluck=pluck;function filter(collection,callback){var arr=predicates_1.isArray(collection),result=arr?[]:{};var accept=arr?function(x){return result.push(x)}:function(x,key){return result[key]=x};exports.forEach(collection,function(item,i){if(callback(item,i))accept(item,i)});return result}exports.filter=filter;function find(collection,callback){var result;exports.forEach(collection,function(item,i){if(result)return;if(callback(item,i))result=item});return result}exports.find=find;exports.mapObj=map;function map(collection,callback){var result=predicates_1.isArray(collection)?[]:{};exports.forEach(collection,function(item,i){return result[i]=callback(item,i)});return result}exports.map=map;exports.values=function(obj){return Object.keys(obj).map(function(key){return obj[key]})};exports.allTrueR=function(memo,elem){return memo&&elem};exports.anyTrueR=function(memo,elem){return memo||elem};exports.unnestR=function(memo,elem){return memo.concat(elem)};exports.flattenR=function(memo,elem){return predicates_1.isArray(elem)?memo.concat(elem.reduce(exports.flattenR,[])):pushR(memo,elem)};function pushR(arr,obj){arr.push(obj);return arr}exports.pushR=pushR;exports.uniqR=function(acc,token){return exports.inArray(acc,token)?acc:pushR(acc,token)};exports.unnest=function(arr){return arr.reduce(exports.unnestR,[])};exports.flatten=function(arr){return arr.reduce(exports.flattenR,[])};exports.assertPredicate=assertFn;exports.assertMap=assertFn;function assertFn(predicateOrMap,errMsg){if(errMsg===void 0){errMsg="assert failure"}return function(obj){var result=predicateOrMap(obj);if(!result){throw new Error(predicates_1.isFunction(errMsg)?errMsg(obj):errMsg)}return result}}exports.assertFn=assertFn;exports.pairs=function(obj){return Object.keys(obj).map(function(key){return[key,obj[key]]})};function arrayTuples(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}if(args.length===0)return[];var maxArrayLen=args.reduce(function(min,arr){return Math.min(arr.length,min)},9007199254740991);var i,result=[];for(i=0;i<maxArrayLen;i++){switch(args.length){case 1:result.push([args[0][i]]);break;case 2:result.push([args[0][i],args[1][i]]);break;case 3:result.push([args[0][i],args[1][i],args[2][i]]);break;case 4:result.push([args[0][i],args[1][i],args[2][i],args[3][i]]);break;default:result.push(args.map(function(array){return array[i]}));break}}return result}exports.arrayTuples=arrayTuples;function applyPairs(memo,keyValTuple){var key,value;if(predicates_1.isArray(keyValTuple))key=keyValTuple[0],value=keyValTuple[1];if(!predicates_1.isString(key))throw new Error("invalid parameters to applyPairs");memo[key]=value;return memo}exports.applyPairs=applyPairs;function tail(arr){return arr.length&&arr[arr.length-1]||undefined}exports.tail=tail;function _copy(src,dest){if(dest)Object.keys(dest).forEach(function(key){return delete dest[key]});if(!dest)dest={};return exports.extend(dest,src)}function _forEach(obj,cb,_this){if(predicates_1.isArray(obj))return obj.forEach(cb,_this);Object.keys(obj).forEach(function(key){return cb(obj[key],key)})}function _extend(toObj){for(var i=1;i<arguments.length;i++){var obj=arguments[i];if(!obj)continue;var keys=Object.keys(obj);for(var j=0;j<keys.length;j++){toObj[keys[j]]=obj[keys[j]]}}return toObj}exports._extend=_extend;function _equals(o1,o2){if(o1===o2)return true;if(o1===null||o2===null)return false;if(o1!==o1&&o2!==o2)return true;var t1=typeof o1,t2=typeof o2;if(t1!==t2||t1!=="object")return false;var tup=[o1,o2];if(hof_1.all(predicates_1.isArray)(tup))return _arraysEq(o1,o2);if(hof_1.all(predicates_1.isDate)(tup))return o1.getTime()===o2.getTime();if(hof_1.all(predicates_1.isRegExp)(tup))return o1.toString()===o2.toString();if(hof_1.all(predicates_1.isFunction)(tup))return true;var predicates=[predicates_1.isFunction,predicates_1.isArray,predicates_1.isDate,predicates_1.isRegExp];if(predicates.map(hof_1.any).reduce(function(b,fn){return b||!!fn(tup)},false))return false;var key,keys={};for(key in o1){if(!_equals(o1[key],o2[key]))return false;keys[key]=true}for(key in o2){if(!keys[key])return false}return true}function _arraysEq(a1,a2){if(a1.length!==a2.length)return false;return arrayTuples(a1,a2).reduce(function(b,t){return b&&_equals(t[0],t[1])},true)}exports.sortBy=function(propFn,checkFn){if(checkFn===void 0){checkFn=hof_1.val(true)}return function(a,b){return checkFn(a)&&checkFn(b)?propFn(a)-propFn(b):0}};exports.composeSort=function(){var sortFns=[];for(var _i=0;_i<arguments.length;_i++){sortFns[_i]=arguments[_i]}return function composedSort(a,b){return sortFns.reduce(function(prev,fn){return prev||fn(a,b)},0)}};exports.silenceUncaughtInPromise=function(promise){return promise.catch(function(e){return 0})&&promise};exports.silentRejection=function(error){return exports.silenceUncaughtInPromise(coreservices_1.services.$q.reject(error))}},{"./coreservices":6,"./hof":8,"./predicates":10}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.notImplemented=function(fnname){return function(){throw new Error(fnname+"(): No coreservices implementation for UI-Router is loaded.")}};var services={$q:undefined,$injector:undefined};exports.services=services},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Glob=function(){function Glob(text){this.text=text;this.glob=text.split(".");var regexpString=this.text.split(".").map(function(seg){if(seg==="**")return"(?:|(?:\\.[^.]*)*)";if(seg==="*")return"\\.[^.]*";return"\\."+seg}).join("");this.regexp=new RegExp("^"+regexpString+"$")}Glob.prototype.matches=function(name){return this.regexp.test("."+name)};Glob.is=function(text){return!!/[!,*]+/.exec(text)};Glob.fromString=function(text){return Glob.is(text)?new Glob(text):null};return Glob}();exports.Glob=Glob},{}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function curry(fn){var initial_args=[].slice.apply(arguments,[1]);var func_args_length=fn.length;function curried(args){if(args.length>=func_args_length)return fn.apply(null,args);return function(){return curried(args.concat([].slice.apply(arguments)))}}return curried(initial_args)}exports.curry=curry;function compose(){var args=arguments;var start=args.length-1;return function(){var i=start,result=args[start].apply(this,arguments);while(i--)result=args[i].call(this,result);return result}}exports.compose=compose;function pipe(){var funcs=[];for(var _i=0;_i<arguments.length;_i++){funcs[_i]=arguments[_i]}return compose.apply(null,[].slice.call(arguments).reverse())}exports.pipe=pipe;exports.prop=function(name){return function(obj){return obj&&obj[name]}};exports.propEq=curry(function(name,val,obj){return obj&&obj[name]===val});exports.parse=function(name){return pipe.apply(null,name.split(".").map(exports.prop))};exports.not=function(fn){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return!fn.apply(null,args)}};function and(fn1,fn2){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return fn1.apply(null,args)&&fn2.apply(null,args)}}exports.and=and;function or(fn1,fn2){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}return fn1.apply(null,args)||fn2.apply(null,args)}}exports.or=or;exports.all=function(fn1){return function(arr){return arr.reduce(function(b,x){return b&&!!fn1(x)},true)}};exports.any=function(fn1){return function(arr){return arr.reduce(function(b,x){return b||!!fn1(x)},false)}};exports.is=function(ctor){return function(obj){return obj!=null&&obj.constructor===ctor||obj instanceof ctor}};exports.eq=function(val){return function(other){return val===other}};exports.val=function(v){return function(){return v}};function invoke(fnName,args){return function(obj){return obj[fnName].apply(obj,args)}}exports.invoke=invoke;function pattern(struct){return function(x){for(var i=0;i<struct.length;i++){if(struct[i][0](x))return struct[i][1](x)}}}exports.pattern=pattern},{}],9:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./common"));__export(require("./coreservices"));__export(require("./glob"));__export(require("./hof"));__export(require("./predicates"));__export(require("./queue"));__export(require("./strings"));__export(require("./trace"))},{"./common":5,"./coreservices":6,"./glob":7,"./hof":8,"./predicates":10,"./queue":11,"./strings":12,"./trace":13}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var hof_1=require("./hof");var stateObject_1=require("../state/stateObject");var toStr=Object.prototype.toString;var tis=function(t){return function(x){return typeof x===t}};exports.isUndefined=tis("undefined");exports.isDefined=hof_1.not(exports.isUndefined);exports.isNull=function(o){return o===null};exports.isNullOrUndefined=hof_1.or(exports.isNull,exports.isUndefined);exports.isFunction=tis("function");exports.isNumber=tis("number");exports.isString=tis("string");exports.isObject=function(x){return x!==null&&typeof x==="object"};exports.isArray=Array.isArray;exports.isDate=function(x){return toStr.call(x)==="[object Date]"};exports.isRegExp=function(x){return toStr.call(x)==="[object RegExp]"};exports.isState=stateObject_1.StateObject.isState;function isInjectable(val){if(exports.isArray(val)&&val.length){var head=val.slice(0,-1),tail=val.slice(-1);return!(head.filter(hof_1.not(exports.isString)).length||tail.filter(hof_1.not(exports.isFunction)).length)}return exports.isFunction(val)}exports.isInjectable=isInjectable;exports.isPromise=hof_1.and(exports.isObject,hof_1.pipe(hof_1.prop("then"),exports.isFunction))},{"../state/stateObject":43,"./hof":8}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Queue=function(){function Queue(_items,_limit){if(_items===void 0){_items=[]}if(_limit===void 0){_limit=null}this._items=_items;this._limit=_limit}Queue.prototype.enqueue=function(item){var items=this._items;items.push(item);if(this._limit&&items.length>this._limit)items.shift();return item};Queue.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]};Queue.prototype.clear=function(){var current=this._items;this._items=[];return current};Queue.prototype.size=function(){return this._items.length};Queue.prototype.remove=function(item){var idx=this._items.indexOf(item);return idx>-1&&this._items.splice(idx,1)[0]};Queue.prototype.peekTail=function(){return this._items[this._items.length-1]};Queue.prototype.peekHead=function(){if(this.size())return this._items[0]};return Queue}();exports.Queue=Queue},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=require("./predicates");var rejectFactory_1=require("../transition/rejectFactory");var common_1=require("./common");var hof_1=require("./hof");var transition_1=require("../transition/transition");var resolvable_1=require("../resolve/resolvable");function maxLength(max,str){if(str.length<=max)return str;return str.substr(0,max-3)+"..."}exports.maxLength=maxLength;function padString(length,str){while(str.length<length)str+=" ";return str}exports.padString=padString;function kebobString(camelCase){return camelCase.replace(/^([A-Z])/,function($1){return $1.toLowerCase()}).replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}exports.kebobString=kebobString;function _toJson(obj){return JSON.stringify(obj)}function _fromJson(json){return predicates_1.isString(json)?JSON.parse(json):json}function promiseToString(p){return"Promise("+JSON.stringify(p)+")"}function functionToString(fn){var fnStr=fnToString(fn);var namedFunctionMatch=fnStr.match(/^(function [^ ]+\([^)]*\))/);var toStr=namedFunctionMatch?namedFunctionMatch[1]:fnStr;var fnName=fn["name"]||"";if(fnName&&toStr.match(/function \(/)){return"function "+fnName+toStr.substr(9)}return toStr}exports.functionToString=functionToString;function fnToString(fn){var _fn=predicates_1.isArray(fn)?fn.slice(-1)[0]:fn;return _fn&&_fn.toString()||"undefined"}exports.fnToString=fnToString;var stringifyPatternFn=null;var stringifyPattern=function(value){var isRejection=rejectFactory_1.Rejection.isRejectionPromise;stringifyPatternFn=stringifyPatternFn||hof_1.pattern([[hof_1.not(predicates_1.isDefined),hof_1.val("undefined")],[predicates_1.isNull,hof_1.val("null")],[predicates_1.isPromise,hof_1.val("[Promise]")],[isRejection,function(x){return x._transitionRejection.toString()}],[hof_1.is(rejectFactory_1.Rejection),hof_1.invoke("toString")],[hof_1.is(transition_1.Transition),hof_1.invoke("toString")],[hof_1.is(resolvable_1.Resolvable),hof_1.invoke("toString")],[predicates_1.isInjectable,functionToString],[hof_1.val(true),common_1.identity]]);return stringifyPatternFn(value)};function stringify(o){var seen=[];function format(val){if(predicates_1.isObject(val)){if(seen.indexOf(val)!==-1)return"[circular ref]";seen.push(val)}return stringifyPattern(val)}return JSON.stringify(o,function(key,val){return format(val)}).replace(/\\"/g,'"')}exports.stringify=stringify;exports.beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);if(idx===-1)return[str,""];return[str.substr(0,idx),str.substr(idx+1)]}};function splitOnDelim(delim){var re=new RegExp("("+delim+")","g");return function(str){return str.split(re).filter(common_1.identity)}}exports.splitOnDelim=splitOnDelim;function joinNeighborsR(acc,x){if(predicates_1.isString(common_1.tail(acc))&&predicates_1.isString(x))return acc.slice(0,-1).concat(common_1.tail(acc)+x);return common_1.pushR(acc,x)}exports.joinNeighborsR=joinNeighborsR},{"../resolve/resolvable":37,"../transition/rejectFactory":52,"../transition/transition":53,"./common":5,"./hof":8,"./predicates":10}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var hof_1=require("../common/hof");var predicates_1=require("../common/predicates");var strings_1=require("./strings");function uiViewString(viewData){if(!viewData)return"ui-view (defunct)";return"[ui-view#"+viewData.id+" tag "+("in template from '"+(viewData.creationContext&&viewData.creationContext.name||"(root)")+"' state]: ")+("fqn: '"+viewData.fqn+"', ")+("name: '"+viewData.name+"@"+viewData.creationContext+"')")}var viewConfigString=function(viewConfig){return"[ViewConfig#"+viewConfig.$id+" from '"+(viewConfig.viewDecl.$context.name||"(root)")+"' state]: target ui-view: '"+viewConfig.viewDecl.$uiViewName+"@"+viewConfig.viewDecl.$uiViewContextAnchor+"'"};function normalizedCat(input){return predicates_1.isNumber(input)?Category[input]:Category[Category[input]]}var Category;(function(Category){Category[Category["RESOLVE"]=0]="RESOLVE";Category[Category["TRANSITION"]=1]="TRANSITION";Category[Category["HOOK"]=2]="HOOK";Category[Category["UIVIEW"]=3]="UIVIEW";Category[Category["VIEWCONFIG"]=4]="VIEWCONFIG"})(Category=exports.Category||(exports.Category={}));var _tid=hof_1.parse("$id");var _rid=hof_1.parse("router.$id");var transLbl=function(trans){return"Transition #"+_tid(trans)+"-"+_rid(trans)};var Trace=function(){function Trace(){this._enabled={};this.approximateDigests=0}Trace.prototype._set=function(enabled,categories){var _this=this;if(!categories.length){categories=Object.keys(Category).map(function(k){return parseInt(k,10)}).filter(function(k){return!isNaN(k)}).map(function(key){return Category[key]})}categories.map(normalizedCat).forEach(function(category){return _this._enabled[category]=enabled})};Trace.prototype.enable=function(){var categories=[];for(var _i=0;_i<arguments.length;_i++){categories[_i]=arguments[_i]}this._set(true,categories)};Trace.prototype.disable=function(){var categories=[];for(var _i=0;_i<arguments.length;_i++){categories[_i]=arguments[_i]}this._set(false,categories)};Trace.prototype.enabled=function(category){return!!this._enabled[normalizedCat(category)]};Trace.prototype.traceTransitionStart=function(trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": Started  -> "+strings_1.stringify(trans))};Trace.prototype.traceTransitionIgnored=function(trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": Ignored  <> "+strings_1.stringify(trans))};Trace.prototype.traceHookInvocation=function(step,trans,options){if(!this.enabled(Category.HOOK))return;var event=hof_1.parse("traceData.hookType")(options)||"internal",context=hof_1.parse("traceData.context.state.name")(options)||hof_1.parse("traceData.context")(options)||"unknown",name=strings_1.functionToString(step.registeredHook.callback);console.log(transLbl(trans)+":   Hook -> "+event+" context: "+context+", "+strings_1.maxLength(200,name))};Trace.prototype.traceHookResult=function(hookResult,trans,transitionOptions){if(!this.enabled(Category.HOOK))return;console.log(transLbl(trans)+":   <- Hook returned: "+strings_1.maxLength(200,strings_1.stringify(hookResult)))};Trace.prototype.traceResolvePath=function(path,when,trans){if(!this.enabled(Category.RESOLVE))return;console.log(transLbl(trans)+":         Resolving "+path+" ("+when+")")};Trace.prototype.traceResolvableResolved=function(resolvable,trans){if(!this.enabled(Category.RESOLVE))return;console.log(transLbl(trans)+":               <- Resolved  "+resolvable+" to: "+strings_1.maxLength(200,strings_1.stringify(resolvable.data)))};Trace.prototype.traceError=function(reason,trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": <- Rejected "+strings_1.stringify(trans)+", reason: "+reason)};Trace.prototype.traceSuccess=function(finalState,trans){if(!this.enabled(Category.TRANSITION))return;console.log(transLbl(trans)+": <- Success  "+strings_1.stringify(trans)+", final state: "+finalState.name)};Trace.prototype.traceUIViewEvent=function(event,viewData,extra){if(extra===void 0){extra=""}if(!this.enabled(Category.UIVIEW))return;console.log("ui-view: "+strings_1.padString(30,event)+" "+uiViewString(viewData)+extra)};Trace.prototype.traceUIViewConfigUpdated=function(viewData,context){if(!this.enabled(Category.UIVIEW))return;this.traceUIViewEvent("Updating",viewData," with ViewConfig from context='"+context+"'")};Trace.prototype.traceUIViewFill=function(viewData,html){if(!this.enabled(Category.UIVIEW))return;this.traceUIViewEvent("Fill",viewData," with: "+strings_1.maxLength(200,html))};Trace.prototype.traceViewServiceEvent=function(event,viewConfig){if(!this.enabled(Category.VIEWCONFIG))return;console.log("VIEWCONFIG: "+event+" "+viewConfigString(viewConfig))};Trace.prototype.traceViewServiceUIViewEvent=function(event,viewData){if(!this.enabled(Category.VIEWCONFIG))return;console.log("VIEWCONFIG: "+event+" "+uiViewString(viewData))};return Trace}();exports.Trace=Trace;var trace=new Trace;exports.trace=trace},{"../common/hof":8,"../common/predicates":10,"./strings":12}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var stateParams_1=require("./params/stateParams");var queue_1=require("./common/queue");var UIRouterGlobals=function(){function UIRouterGlobals(){this.params=new stateParams_1.StateParams;this.lastStartedTransitionId=-1;this.transitionHistory=new queue_1.Queue([],1);this.successfulTransitions=new queue_1.Queue([],1)}UIRouterGlobals.prototype.dispose=function(){this.transitionHistory.clear();this.successfulTransitions.clear();this.transition=null};return UIRouterGlobals}();exports.UIRouterGlobals=UIRouterGlobals},{"./common/queue":11,"./params/stateParams":31}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var transition_1=require("../transition/transition");var router_1=require("../router");function addCoreResolvables(trans){trans.addResolvable({token:router_1.UIRouter,deps:[],resolveFn:function(){return trans.router},data:trans.router},"");trans.addResolvable({token:transition_1.Transition,deps:[],resolveFn:function(){return trans},data:trans},"");trans.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return trans},data:trans},"");trans.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return trans.params()},data:trans.params()},"");trans.entering().forEach(function(state){trans.addResolvable({token:"$state$",deps:[],resolveFn:function(){return state},data:state},state)})}exports.registerAddCoreResolvables=function(transitionService){return transitionService.onCreate({},addCoreResolvables)}},{"../router":39,"../transition/transition":53}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var trace_1=require("../common/trace");var rejectFactory_1=require("../transition/rejectFactory");function ignoredHook(trans){var ignoredReason=trans._ignoredReason();if(!ignoredReason)return;trace_1.trace.traceTransitionIgnored(trans);var pending=trans.router.globals.transition;if(ignoredReason==="SameAsCurrent"&&pending){pending.abort()}return rejectFactory_1.Rejection.ignored().toPromise()}exports.registerIgnoredTransitionHook=function(transitionService){return transitionService.onBefore({},ignoredHook,{priority:-9999})}},{"../common/trace":13,"../transition/rejectFactory":52}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function invalidTransitionHook(trans){if(!trans.valid()){throw new Error(trans.error())}}exports.registerInvalidTransitionHook=function(transitionService){return transitionService.onBefore({},invalidTransitionHook,{priority:-1e4})}},{}],18:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var coreservices_1=require("../common/coreservices");var lazyLoadHook=function(transition){var router=transition.router;function retryTransition(){if(transition.originalTransition().options().source!=="url"){var orig=transition.targetState();return router.stateService.target(orig.identifier(),orig.params(),orig.options())}var $url=router.urlService;var result=$url.match($url.parts());var rule=result&&result.rule;if(rule&&rule.type==="STATE"){var state=rule.state;var params=result.match;return router.stateService.target(state,params,transition.options())}router.urlService.sync()}var promises=transition.entering().filter(function(state){return!!state.$$state().lazyLoad}).map(function(state){return lazyLoadState(transition,state)});return coreservices_1.services.$q.all(promises).then(retryTransition)};exports.registerLazyLoadHook=function(transitionService){return transitionService.onBefore({entering:function(state){return!!state.lazyLoad}},lazyLoadHook)};function lazyLoadState(transition,state){var lazyLoadFn=state.$$state().lazyLoad;var promise=lazyLoadFn["_promise"];if(!promise){var success=function(result){delete state.lazyLoad;delete state.$$state().lazyLoad;delete lazyLoadFn["_promise"];return result};var error=function(err){delete lazyLoadFn["_promise"];return coreservices_1.services.$q.reject(err)};promise=lazyLoadFn["_promise"]=coreservices_1.services.$q.when(lazyLoadFn(transition,state)).then(updateStateRegistry).then(success,error)}function updateStateRegistry(result){if(result&&Array.isArray(result.states)){result.states.forEach(function(state){return transition.router.stateRegistry.register(state)})}return result}return promise}exports.lazyLoadState=lazyLoadState},{"../common/coreservices":6}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function makeEnterExitRetainHook(hookName){return function(transition,state){var _state=state.$$state();var hookFn=_state[hookName];return hookFn(transition,state)}}var onExitHook=makeEnterExitRetainHook("onExit");exports.registerOnExitHook=function(transitionService){return transitionService.onExit({exiting:function(state){return!!state.onExit}},onExitHook)};var onRetainHook=makeEnterExitRetainHook("onRetain");exports.registerOnRetainHook=function(transitionService){return transitionService.onRetain({retained:function(state){return!!state.onRetain}},onRetainHook)};var onEnterHook=makeEnterExitRetainHook("onEnter");exports.registerOnEnterHook=function(transitionService){return transitionService.onEnter({entering:function(state){return!!state.onEnter}},onEnterHook)}},{}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=require("../common/predicates");var coreservices_1=require("../common/coreservices");var targetState_1=require("../state/targetState");var redirectToHook=function(trans){var redirect=trans.to().redirectTo;if(!redirect)return;var $state=trans.router.stateService;function handleResult(result){if(!result)return;if(result instanceof targetState_1.TargetState)return result;if(predicates_1.isString(result))return $state.target(result,trans.params(),trans.options());if(result["state"]||result["params"])return $state.target(result["state"]||trans.to(),result["params"]||trans.params(),trans.options())}if(predicates_1.isFunction(redirect)){return coreservices_1.services.$q.when(redirect(trans)).then(handleResult)}return handleResult(redirect)};exports.registerRedirectToHook=function(transitionService){return transitionService.onStart({to:function(state){return!!state.redirectTo}},redirectToHook)}},{"../common/coreservices":6,"../common/predicates":10,"../state/targetState":47}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var resolveContext_1=require("../resolve/resolveContext");var hof_1=require("../common/hof");var eagerResolvePath=function(trans){return new resolveContext_1.ResolveContext(trans.treeChanges().to).resolvePath("EAGER",trans).then(common_1.noop)};exports.registerEagerResolvePath=function(transitionService){return transitionService.onStart({},eagerResolvePath,{priority:1e3})};var lazyResolveState=function(trans,state){return new resolveContext_1.ResolveContext(trans.treeChanges().to).subContext(state.$$state()).resolvePath("LAZY",trans).then(common_1.noop)};exports.registerLazyResolveState=function(transitionService){return transitionService.onEnter({entering:hof_1.val(true)},lazyResolveState,{priority:1e3})}},{"../common/common":5,"../common/hof":8,"../resolve/resolveContext":38}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var updateGlobalState=function(trans){var globals=trans.router.globals;var transitionSuccessful=function(){globals.successfulTransitions.enqueue(trans);globals.$current=trans.$to();globals.current=globals.$current.self;common_1.copy(trans.params(),globals.params)};var clearCurrentTransition=function(){if(globals.transition===trans)globals.transition=null};trans.onSuccess({},transitionSuccessful,{priority:1e4});trans.promise.then(clearCurrentTransition,clearCurrentTransition)};exports.registerUpdateGlobalState=function(transitionService){return transitionService.onCreate({},updateGlobalState)}},{"../common/common":5}],23:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var updateUrl=function(transition){var options=transition.options();var $state=transition.router.stateService;var $urlRouter=transition.router.urlRouter;if(options.source!=="url"&&options.location&&$state.$current.navigable){var urlOptions={replace:options.location==="replace"};$urlRouter.push($state.$current.navigable.url,$state.params,urlOptions)}$urlRouter.update(true)};exports.registerUpdateUrl=function(transitionService){return transitionService.onSuccess({},updateUrl,{priority:9999})}},{}],24:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var coreservices_1=require("../common/coreservices");var loadEnteringViews=function(transition){var $q=coreservices_1.services.$q;var enteringViews=transition.views("entering");if(!enteringViews.length)return;return $q.all(enteringViews.map(function(view){return $q.when(view.load())})).then(common_1.noop)};exports.registerLoadEnteringViews=function(transitionService){return transitionService.onFinish({},loadEnteringViews)};var activateViews=function(transition){var enteringViews=transition.views("entering");var exitingViews=transition.views("exiting");if(!enteringViews.length&&!exitingViews.length)return;var $view=transition.router.viewService;exitingViews.forEach(function(vc){return $view.deactivateViewConfig(vc)});enteringViews.forEach(function(vc){return $view.activateViewConfig(vc)});$view.sync()};exports.registerActivateViews=function(transitionService){return transitionService.onSuccess({},activateViews)}},{"../common/common":5,"../common/coreservices":6}],25:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./common/index"));__export(require("./params/index"));__export(require("./path/index"));__export(require("./resolve/index"));__export(require("./state/index"));__export(require("./transition/index"));__export(require("./url/index"));__export(require("./view/index"));__export(require("./globals"));__export(require("./router"));__export(require("./vanilla"));__export(require("./interface"))},{"./common/index":9,"./globals":14,"./interface":26,"./params/index":27,"./path/index":32,"./resolve/index":35,"./router":39,"./state/index":40,"./transition/index":50,"./url/index":57,"./vanilla":63,"./view/index":75}],26:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var UIRouterPluginBase=function(){function UIRouterPluginBase(){}UIRouterPluginBase.prototype.dispose=function(router){};return UIRouterPluginBase}();exports.UIRouterPluginBase=UIRouterPluginBase},{}],27:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./param"));__export(require("./paramTypes"));__export(require("./stateParams"));__export(require("./paramType"))},{"./param":28,"./paramType":29,"./paramTypes":30,"./stateParams":31}],28:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var hof_1=require("../common/hof");var predicates_1=require("../common/predicates");var coreservices_1=require("../common/coreservices");var paramType_1=require("./paramType");var hasOwn=Object.prototype.hasOwnProperty;var isShorthand=function(cfg){return["value","type","squash","array","dynamic"].filter(hasOwn.bind(cfg||{})).length===0};var DefType;(function(DefType){DefType[DefType["PATH"]=0]="PATH";DefType[DefType["SEARCH"]=1]="SEARCH";DefType[DefType["CONFIG"]=2]="CONFIG"})(DefType=exports.DefType||(exports.DefType={}));function unwrapShorthand(cfg){cfg=isShorthand(cfg)&&{value:cfg}||cfg;getStaticDefaultValue["__cacheable"]=true;function getStaticDefaultValue(){return cfg.value}return common_1.extend(cfg,{$$fn:predicates_1.isInjectable(cfg.value)?cfg.value:getStaticDefaultValue})}function getType(cfg,urlType,location,id,paramTypes){if(cfg.type&&urlType&&urlType.name!=="string")throw new Error("Param '"+id+"' has two type configurations.");if(cfg.type&&urlType&&urlType.name==="string"&&paramTypes.type(cfg.type))return paramTypes.type(cfg.type);if(urlType)return urlType;if(!cfg.type){var type=location===DefType.CONFIG?"any":location===DefType.PATH?"path":location===DefType.SEARCH?"query":"string";return paramTypes.type(type)}return cfg.type instanceof paramType_1.ParamType?cfg.type:paramTypes.type(cfg.type)}function getSquashPolicy(config,isOptional,defaultPolicy){var squash=config.squash;if(!isOptional||squash===false)return false;if(!predicates_1.isDefined(squash)||squash==null)return defaultPolicy;if(squash===true||predicates_1.isString(squash))return squash;throw new Error("Invalid squash policy: '"+squash+"'. Valid policies: false, true, or arbitrary string")}function getReplace(config,arrayMode,isOptional,squash){var replace,configuredKeys,defaultPolicy=[{from:"",to:isOptional||arrayMode?undefined:""},{from:null,to:isOptional||arrayMode?undefined:""}];replace=predicates_1.isArray(config.replace)?config.replace:[];if(predicates_1.isString(squash))replace.push({from:squash,to:undefined});configuredKeys=common_1.map(replace,hof_1.prop("from"));return common_1.filter(defaultPolicy,function(item){return configuredKeys.indexOf(item.from)===-1}).concat(replace)}var Param=function(){function Param(id,type,config,location,urlMatcherFactory){config=unwrapShorthand(config);type=getType(config,type,location,id,urlMatcherFactory.paramTypes);var arrayMode=getArrayMode();type=arrayMode?type.$asArray(arrayMode,location===DefType.SEARCH):type;var isOptional=config.value!==undefined||location===DefType.SEARCH;var dynamic=predicates_1.isDefined(config.dynamic)?!!config.dynamic:!!type.dynamic;var raw=predicates_1.isDefined(config.raw)?!!config.raw:!!type.raw;var squash=getSquashPolicy(config,isOptional,urlMatcherFactory.defaultSquashPolicy());var replace=getReplace(config,arrayMode,isOptional,squash);var inherit=predicates_1.isDefined(config.inherit)?!!config.inherit:!!type.inherit;function getArrayMode(){var arrayDefaults={array:location===DefType.SEARCH?"auto":false};var arrayParamNomenclature=id.match(/\[\]$/)?{array:true}:{};return common_1.extend(arrayDefaults,arrayParamNomenclature,config).array}common_1.extend(this,{id:id,type:type,location:location,isOptional:isOptional,dynamic:dynamic,raw:raw,squash:squash,replace:replace,inherit:inherit,array:arrayMode,config:config})}Param.prototype.isDefaultValue=function(value){return this.isOptional&&this.type.equals(this.value(),value)};Param.prototype.value=function(value){var _this=this;var getDefaultValue=function(){if(_this._defaultValueCache)return _this._defaultValueCache.defaultValue;if(!coreservices_1.services.$injector)throw new Error("Injectable functions cannot be called at configuration time");var defaultValue=coreservices_1.services.$injector.invoke(_this.config.$$fn);if(defaultValue!==null&&defaultValue!==undefined&&!_this.type.is(defaultValue))throw new Error("Default value ("+defaultValue+") for parameter '"+_this.id+"' is not an instance of ParamType ("+_this.type.name+")");if(_this.config.$$fn["__cacheable"]){_this._defaultValueCache={defaultValue:defaultValue}}return defaultValue};var replaceSpecialValues=function(val){for(var _i=0,_a=_this.replace;_i<_a.length;_i++){var tuple=_a[_i];if(tuple.from===val)return tuple.to}return val};value=replaceSpecialValues(value);return predicates_1.isUndefined(value)?getDefaultValue():this.type.$normalize(value)};Param.prototype.isSearch=function(){return this.location===DefType.SEARCH};Param.prototype.validates=function(value){if((predicates_1.isUndefined(value)||value===null)&&this.isOptional)return true;var normalized=this.type.$normalize(value);if(!this.type.is(normalized))return false;var encoded=this.type.encode(normalized);return!(predicates_1.isString(encoded)&&!this.type.pattern.exec(encoded))};Param.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"};Param.values=function(params,values){if(values===void 0){values={}}var paramValues={};for(var _i=0,params_1=params;_i<params_1.length;_i++){var param=params_1[_i];paramValues[param.id]=param.value(values[param.id])}return paramValues};Param.changed=function(params,values1,values2){if(values1===void 0){values1={}}if(values2===void 0){values2={}}return params.filter(function(param){return!param.type.equals(values1[param.id],values2[param.id])})};Param.equals=function(params,values1,values2){if(values1===void 0){values1={}}if(values2===void 0){values2={}}return Param.changed(params,values1,values2).length===0};Param.validates=function(params,values){if(values===void 0){values={}}return params.map(function(param){return param.validates(values[param.id])}).reduce(common_1.allTrueR,true)};return Param}();exports.Param=Param},{"../common/common":5,"../common/coreservices":6,"../common/hof":8,"../common/predicates":10,"./paramType":29}],29:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var ParamType=function(){function ParamType(def){this.pattern=/.*/;this.inherit=true;common_1.extend(this,def)}ParamType.prototype.is=function(val,key){return true};ParamType.prototype.encode=function(val,key){return val};ParamType.prototype.decode=function(val,key){return val};ParamType.prototype.equals=function(a,b){return a==b};ParamType.prototype.$subPattern=function(){var sub=this.pattern.toString();return sub.substr(1,sub.length-2)};ParamType.prototype.toString=function(){return"{ParamType:"+this.name+"}"};ParamType.prototype.$normalize=function(val){return this.is(val)?val:this.decode(val)};ParamType.prototype.$asArray=function(mode,isSearch){if(!mode)return this;if(mode==="auto"&&!isSearch)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,mode)};return ParamType}();exports.ParamType=ParamType;function ArrayType(type,mode){var _this=this;function arrayWrap(val){return predicates_1.isArray(val)?val:predicates_1.isDefined(val)?[val]:[]}function arrayUnwrap(val){switch(val.length){case 0:return undefined;case 1:return mode==="auto"?val[0]:val;default:return val}}function arrayHandler(callback,allTruthyMode){return function handleArray(val){if(predicates_1.isArray(val)&&val.length===0)return val;var arr=arrayWrap(val);var result=common_1.map(arr,callback);return allTruthyMode===true?common_1.filter(result,function(x){return!x}).length===0:arrayUnwrap(result)}}function arrayEqualsHandler(callback){return function handleArray(val1,val2){var left=arrayWrap(val1),right=arrayWrap(val2);if(left.length!==right.length)return false;for(var i=0;i<left.length;i++){if(!callback(left[i],right[i]))return false}return true}}["encode","decode","equals","$normalize"].forEach(function(name){var paramTypeFn=type[name].bind(type);var wrapperFn=name==="equals"?arrayEqualsHandler:arrayHandler;_this[name]=wrapperFn(paramTypeFn)});common_1.extend(this,{dynamic:type.dynamic,name:type.name,pattern:type.pattern,inherit:type.inherit,is:arrayHandler(type.is.bind(type),true),$arrayMode:mode})}},{"../common/common":5,"../common/predicates":10}],30:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var hof_1=require("../common/hof");var coreservices_1=require("../common/coreservices");var paramType_1=require("./paramType");var ParamTypes=function(){function ParamTypes(){this.enqueue=true;this.typeQueue=[];this.defaultTypes=common_1.pick(ParamTypes.prototype,["hash","string","query","path","int","bool","date","json","any"]);var makeType=function(definition,name){return new paramType_1.ParamType(common_1.extend({name:name},definition))};this.types=common_1.inherit(common_1.map(this.defaultTypes,makeType),{})}ParamTypes.prototype.dispose=function(){this.types={}};ParamTypes.prototype.type=function(name,definition,definitionFn){if(!predicates_1.isDefined(definition))return this.types[name];if(this.types.hasOwnProperty(name))throw new Error("A type named '"+name+"' has already been defined.");this.types[name]=new paramType_1.ParamType(common_1.extend({name:name},definition));if(definitionFn){this.typeQueue.push({name:name,def:definitionFn});if(!this.enqueue)this._flushTypeQueue()}return this};ParamTypes.prototype._flushTypeQueue=function(){while(this.typeQueue.length){var type=this.typeQueue.shift();if(type.pattern)throw new Error("You cannot override a type's .pattern at runtime.");common_1.extend(this.types[type.name],coreservices_1.services.$injector.invoke(type.def))}};return ParamTypes}();exports.ParamTypes=ParamTypes;function initDefaultTypes(){var makeDefaultType=function(def){var valToString=function(val){return val!=null?val.toString():val};var defaultTypeBase={encode:valToString,decode:valToString,is:hof_1.is(String),pattern:/.*/,equals:function(a,b){return a==b}};return common_1.extend({},defaultTypeBase,def)};common_1.extend(ParamTypes.prototype,{string:makeDefaultType({}),path:makeDefaultType({pattern:/[^/]*/}),query:makeDefaultType({}),hash:makeDefaultType({inherit:false}),int:makeDefaultType({decode:function(val){return parseInt(val,10)},is:function(val){return!predicates_1.isNullOrUndefined(val)&&this.decode(val.toString())===val},pattern:/-?\d+/}),bool:makeDefaultType({encode:function(val){return val&&1||0},decode:function(val){return parseInt(val,10)!==0},is:hof_1.is(Boolean),pattern:/0|1/}),date:makeDefaultType({encode:function(val){return!this.is(val)?undefined:[val.getFullYear(),("0"+(val.getMonth()+1)).slice(-2),("0"+val.getDate()).slice(-2)].join("-")},decode:function(val){if(this.is(val))return val;var match=this.capture.exec(val);return match?new Date(match[1],match[2]-1,match[3]):undefined},is:function(val){return val instanceof Date&&!isNaN(val.valueOf())},equals:function(l,r){return["getFullYear","getMonth","getDate"].reduce(function(acc,fn){return acc&&l[fn]()===r[fn]()},true)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:makeDefaultType({encode:common_1.toJson,decode:common_1.fromJson,is:hof_1.is(Object),equals:common_1.equals,pattern:/[^/]*/}),any:makeDefaultType({encode:common_1.identity,decode:common_1.identity,is:function(){return true},equals:common_1.equals})})}initDefaultTypes()},{"../common/common":5,"../common/coreservices":6,"../common/hof":8,"../common/predicates":10,"./paramType":29}],31:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var StateParams=function(){function StateParams(params){if(params===void 0){params={}}common_1.extend(this,params)}StateParams.prototype.$inherit=function(newParams,$current,$to){var parents=common_1.ancestors($current,$to),parentParams,inherited={},inheritList=[];for(var i in parents){if(!parents[i]||!parents[i].params)continue;parentParams=Object.keys(parents[i].params);if(!parentParams.length)continue;for(var j in parentParams){if(inheritList.indexOf(parentParams[j])>=0)continue;inheritList.push(parentParams[j]);inherited[parentParams[j]]=this[parentParams[j]]}}return common_1.extend({},inherited,newParams)};return StateParams}();exports.StateParams=StateParams},{"../common/common":5}],32:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./pathNode"));__export(require("./pathFactory"))},{"./pathFactory":33,"./pathNode":34}],33:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var hof_1=require("../common/hof");var targetState_1=require("../state/targetState");var pathNode_1=require("./pathNode");var PathUtils=function(){function PathUtils(){}PathUtils.makeTargetState=function(path){var state=common_1.tail(path).state;return new targetState_1.TargetState(state,state,path.map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{}))};PathUtils.buildPath=function(targetState){var toParams=targetState.params();return targetState.$state().path.map(function(state){return new pathNode_1.PathNode(state).applyRawParams(toParams)})};PathUtils.buildToPath=function(fromPath,targetState){var toPath=PathUtils.buildPath(targetState);if(targetState.options().inherit){return PathUtils.inheritParams(fromPath,toPath,Object.keys(targetState.params()))}return toPath};PathUtils.applyViewConfigs=function($view,path,states){path.filter(function(node){return common_1.inArray(states,node.state)}).forEach(function(node){var viewDecls=common_1.values(node.state.views||{});var subPath=PathUtils.subPath(path,function(n){return n===node});var viewConfigs=viewDecls.map(function(view){return $view.createViewConfig(subPath,view)});node.views=viewConfigs.reduce(common_1.unnestR,[])})};PathUtils.inheritParams=function(fromPath,toPath,toKeys){if(toKeys===void 0){toKeys=[]}function nodeParamVals(path,state){var node=common_1.find(path,hof_1.propEq("state",state));return common_1.extend({},node&&node.paramValues)}var noInherit=fromPath.map(function(node){return node.paramSchema}).reduce(common_1.unnestR,[]).filter(function(param){return!param.inherit}).map(hof_1.prop("id"));function makeInheritedParamsNode(toNode){var toParamVals=common_1.extend({},toNode&&toNode.paramValues);var incomingParamVals=common_1.pick(toParamVals,toKeys);toParamVals=common_1.omit(toParamVals,toKeys);var fromParamVals=common_1.omit(nodeParamVals(fromPath,toNode.state)||{},noInherit);var ownParamVals=common_1.extend(toParamVals,fromParamVals,incomingParamVals);return new pathNode_1.PathNode(toNode.state).applyRawParams(ownParamVals)}return toPath.map(makeInheritedParamsNode)};PathUtils.treeChanges=function(fromPath,toPath,reloadState){var keep=0,max=Math.min(fromPath.length,toPath.length);var nodesMatch=function(node1,node2){return node1.equals(node2,PathUtils.nonDynamicParams)};while(keep<max&&fromPath[keep].state!==reloadState&&nodesMatch(fromPath[keep],toPath[keep])){keep++}function applyToParams(retainedNode,idx){var cloned=pathNode_1.PathNode.clone(retainedNode);cloned.paramValues=toPath[idx].paramValues;return cloned}var from,retained,exiting,entering,to;from=fromPath;retained=from.slice(0,keep);exiting=from.slice(keep);var retainedWithToParams=retained.map(applyToParams);entering=toPath.slice(keep);to=retainedWithToParams.concat(entering);return{from:from,to:to,retained:retained,exiting:exiting,entering:entering}};PathUtils.matching=function(pathA,pathB,paramsFn){var done=false;var tuples=common_1.arrayTuples(pathA,pathB);return tuples.reduce(function(matching,_a){var nodeA=_a[0],nodeB=_a[1];done=done||!nodeA.equals(nodeB,paramsFn);return done?matching:matching.concat(nodeA)},[])};PathUtils.equals=function(pathA,pathB,paramsFn){return pathA.length===pathB.length&&PathUtils.matching(pathA,pathB,paramsFn).length===pathA.length};PathUtils.subPath=function(path,predicate){var node=common_1.find(path,predicate);var elementIdx=path.indexOf(node);return elementIdx===-1?undefined:path.slice(0,elementIdx+1)};return PathUtils}();PathUtils.nonDynamicParams=function(node){return node.state.parameters({inherit:false}).filter(function(param){return!param.dynamic})};PathUtils.paramValues=function(path){return path.reduce(function(acc,node){return common_1.extend(acc,node.paramValues)},{})};exports.PathUtils=PathUtils},{"../common/common":5,"../common/hof":8,"../state/targetState":47,"./pathNode":34}],34:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var hof_1=require("../common/hof");var param_1=require("../params/param");var PathNode=function(){function PathNode(stateOrNode){if(stateOrNode instanceof PathNode){var node=stateOrNode;this.state=node.state;this.paramSchema=node.paramSchema.slice();this.paramValues=common_1.extend({},node.paramValues);this.resolvables=node.resolvables.slice();this.views=node.views&&node.views.slice()}else{var state=stateOrNode;this.state=state;this.paramSchema=state.parameters({inherit:false});this.paramValues={};this.resolvables=state.resolvables.map(function(res){return res.clone()})}}PathNode.prototype.applyRawParams=function(params){var getParamVal=function(paramDef){return[paramDef.id,paramDef.value(params[paramDef.id])]};this.paramValues=this.paramSchema.reduce(function(memo,pDef){return common_1.applyPairs(memo,getParamVal(pDef))},{});return this};PathNode.prototype.parameter=function(name){return common_1.find(this.paramSchema,hof_1.propEq("id",name))};PathNode.prototype.equals=function(node,paramsFn){var diff=this.diff(node,paramsFn);return diff&&diff.length===0};PathNode.prototype.diff=function(node,paramsFn){if(this.state!==node.state)return false;var params=paramsFn?paramsFn(this):this.paramSchema;return param_1.Param.changed(params,this.paramValues,node.paramValues)};PathNode.clone=function(node){return new PathNode(node)};return PathNode}();exports.PathNode=PathNode},{"../common/common":5,"../common/hof":8,"../params/param":28}],35:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./interface"));__export(require("./resolvable"));__export(require("./resolveContext"))},{"./interface":36,"./resolvable":37,"./resolveContext":38}],36:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolvePolicies={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}}},{}],37:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var coreservices_1=require("../common/coreservices");var trace_1=require("../common/trace");var strings_1=require("../common/strings");var predicates_1=require("../common/predicates");exports.defaultResolvePolicy={when:"LAZY",async:"WAIT"};var Resolvable=function(){function Resolvable(arg1,resolveFn,deps,policy,data){this.resolved=false;this.promise=undefined;if(arg1 instanceof Resolvable){common_1.extend(this,arg1)}else if(predicates_1.isFunction(resolveFn)){if(arg1==null||arg1==undefined)throw new Error("new Resolvable(): token argument is required");if(!predicates_1.isFunction(resolveFn))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=arg1;this.policy=policy;this.resolveFn=resolveFn;this.deps=deps||[];this.data=data;this.resolved=data!==undefined;this.promise=this.resolved?coreservices_1.services.$q.when(this.data):undefined}else if(predicates_1.isObject(arg1)&&arg1.token&&predicates_1.isFunction(arg1.resolveFn)){var literal=arg1;return new Resolvable(literal.token,literal.resolveFn,literal.deps,literal.policy,literal.data)}}Resolvable.prototype.getPolicy=function(state){var thisPolicy=this.policy||{};var statePolicy=state&&state.resolvePolicy||{};return{when:thisPolicy.when||statePolicy.when||exports.defaultResolvePolicy.when,async:thisPolicy.async||statePolicy.async||exports.defaultResolvePolicy.async}};Resolvable.prototype.resolve=function(resolveContext,trans){var _this=this;var $q=coreservices_1.services.$q;var getResolvableDependencies=function(){return $q.all(resolveContext.getDependencies(_this).map(function(resolvable){return resolvable.get(resolveContext,trans)}))};var invokeResolveFn=function(resolvedDeps){return _this.resolveFn.apply(null,resolvedDeps)};var waitForRx=function(observable$){var cached=observable$.cache(1);return cached.take(1).toPromise().then(function(){return cached})};var node=resolveContext.findNode(this);var state=node&&node.state;var maybeWaitForRx=this.getPolicy(state).async==="RXWAIT"?waitForRx:common_1.identity;var applyResolvedValue=function(resolvedValue){_this.data=resolvedValue;_this.resolved=true;trace_1.trace.traceResolvableResolved(_this,trans);return _this.data};return this.promise=$q.when().then(getResolvableDependencies).then(invokeResolveFn).then(maybeWaitForRx).then(applyResolvedValue)};Resolvable.prototype.get=function(resolveContext,trans){return this.promise||this.resolve(resolveContext,trans)};Resolvable.prototype.toString=function(){return"Resolvable(token: "+strings_1.stringify(this.token)+", requires: ["+this.deps.map(strings_1.stringify)+"])"};Resolvable.prototype.clone=function(){return new Resolvable(this)};return Resolvable}();Resolvable.fromData=function(token,data){return new Resolvable(token,function(){return data},null,null,data)};exports.Resolvable=Resolvable},{"../common/common":5,"../common/coreservices":6,"../common/predicates":10,"../common/strings":12,"../common/trace":13}],38:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var hof_1=require("../common/hof");var trace_1=require("../common/trace");var coreservices_1=require("../common/coreservices");var interface_1=require("./interface");var resolvable_1=require("./resolvable");var pathFactory_1=require("../path/pathFactory");var strings_1=require("../common/strings");var when=interface_1.resolvePolicies.when;var ALL_WHENS=[when.EAGER,when.LAZY];var EAGER_WHENS=[when.EAGER];exports.NATIVE_INJECTOR_TOKEN="Native Injector";var ResolveContext=function(){function ResolveContext(_path){this._path=_path}ResolveContext.prototype.getTokens=function(){return this._path.reduce(function(acc,node){return acc.concat(node.resolvables.map(function(r){return r.token}))},[]).reduce(common_1.uniqR,[])};ResolveContext.prototype.getResolvable=function(token){var matching=this._path.map(function(node){return node.resolvables}).reduce(common_1.unnestR,[]).filter(function(r){return r.token===token});return common_1.tail(matching)};ResolveContext.prototype.getPolicy=function(resolvable){var node=this.findNode(resolvable);return resolvable.getPolicy(node.state)};ResolveContext.prototype.subContext=function(state){return new ResolveContext(pathFactory_1.PathUtils.subPath(this._path,function(node){return node.state===state}))};ResolveContext.prototype.addResolvables=function(newResolvables,state){var node=common_1.find(this._path,hof_1.propEq("state",state));var keys=newResolvables.map(function(r){return r.token});node.resolvables=node.resolvables.filter(function(r){return keys.indexOf(r.token)===-1}).concat(newResolvables)};ResolveContext.prototype.resolvePath=function(when,trans){var _this=this;if(when===void 0){when="LAZY"}var whenOption=common_1.inArray(ALL_WHENS,when)?when:"LAZY";var matchedWhens=whenOption===interface_1.resolvePolicies.when.EAGER?EAGER_WHENS:ALL_WHENS;trace_1.trace.traceResolvePath(this._path,when,trans);var matchesPolicy=function(acceptedVals,whenOrAsync){return function(resolvable){return common_1.inArray(acceptedVals,_this.getPolicy(resolvable)[whenOrAsync])}};var promises=this._path.reduce(function(acc,node){var nodeResolvables=node.resolvables.filter(matchesPolicy(matchedWhens,"when"));var nowait=nodeResolvables.filter(matchesPolicy(["NOWAIT"],"async"));var wait=nodeResolvables.filter(hof_1.not(matchesPolicy(["NOWAIT"],"async")));var subContext=_this.subContext(node.state);var getResult=function(r){return r.get(subContext,trans).then(function(value){return{token:r.token,value:value}})};nowait.forEach(getResult);return acc.concat(wait.map(getResult))},[]);return coreservices_1.services.$q.all(promises)};ResolveContext.prototype.injector=function(){return this._injector||(this._injector=new UIInjectorImpl(this))};ResolveContext.prototype.findNode=function(resolvable){return common_1.find(this._path,function(node){return common_1.inArray(node.resolvables,resolvable)})};ResolveContext.prototype.getDependencies=function(resolvable){var _this=this;var node=this.findNode(resolvable);var subPath=pathFactory_1.PathUtils.subPath(this._path,function(x){return x===node})||this._path;var availableResolvables=subPath.reduce(function(acc,node){return acc.concat(node.resolvables)},[]).filter(function(res){return res!==resolvable});var getDependency=function(token){var matching=availableResolvables.filter(function(r){return r.token===token});if(matching.length)return common_1.tail(matching);var fromInjector=_this.injector().getNative(token);if(!fromInjector){throw new Error("Could not find Dependency Injection token: "+strings_1.stringify(token))}return new resolvable_1.Resolvable(token,function(){return fromInjector},[],fromInjector)};return resolvable.deps.map(getDependency)};return ResolveContext}();exports.ResolveContext=ResolveContext;var UIInjectorImpl=function(){function UIInjectorImpl(context){this.context=context;this.native=this.get(exports.NATIVE_INJECTOR_TOKEN)||coreservices_1.services.$injector}UIInjectorImpl.prototype.get=function(token){var resolvable=this.context.getResolvable(token);if(resolvable){if(this.context.getPolicy(resolvable).async==="NOWAIT"){return resolvable.get(this.context)}if(!resolvable.resolved){throw new Error("Resolvable async .get() not complete:"+strings_1.stringify(resolvable.token))}return resolvable.data}return this.native&&this.native.get(token)};UIInjectorImpl.prototype.getAsync=function(token){var resolvable=this.context.getResolvable(token);if(resolvable)return resolvable.get(this.context);return coreservices_1.services.$q.when(this.native.get(token))};UIInjectorImpl.prototype.getNative=function(token){return this.native&&this.native.get(token)};return UIInjectorImpl}()},{"../common/common":5,"../common/coreservices":6,"../common/hof":8,"../common/strings":12,"../common/trace":13,"../path/pathFactory":33,"./interface":36,"./resolvable":37}],39:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var urlMatcherFactory_1=require("./url/urlMatcherFactory");var urlRouter_1=require("./url/urlRouter");var transitionService_1=require("./transition/transitionService");var view_1=require("./view/view");var stateRegistry_1=require("./state/stateRegistry");var stateService_1=require("./state/stateService");var globals_1=require("./globals");var common_1=require("./common/common");var predicates_1=require("./common/predicates");var urlService_1=require("./url/urlService");var trace_1=require("./common/trace");var _routerInstance=0;var UIRouter=function(){function UIRouter(locationService,locationConfig){if(locationService===void 0){locationService=urlService_1.UrlService.locationServiceStub}if(locationConfig===void 0){locationConfig=urlService_1.UrlService.locationConfigStub}this.locationService=locationService;this.locationConfig=locationConfig;this.$id=_routerInstance++;this._disposed=false;this._disposables=[];this.trace=trace_1.trace;this.viewService=new view_1.ViewService;this.transitionService=new transitionService_1.TransitionService(this);this.globals=new globals_1.UIRouterGlobals;this.urlMatcherFactory=new urlMatcherFactory_1.UrlMatcherFactory;this.urlRouter=new urlRouter_1.UrlRouter(this);this.stateRegistry=new stateRegistry_1.StateRegistry(this);this.stateService=new stateService_1.StateService(this);this.urlService=new urlService_1.UrlService(this);this._plugins={};this.viewService._pluginapi._rootViewContext(this.stateRegistry.root());this.globals.$current=this.stateRegistry.root();this.globals.current=this.globals.$current.self;this.disposable(this.globals);this.disposable(this.stateService);this.disposable(this.stateRegistry);this.disposable(this.transitionService);this.disposable(this.urlRouter);this.disposable(locationService);this.disposable(locationConfig)}UIRouter.prototype.disposable=function(disposable){this._disposables.push(disposable)};UIRouter.prototype.dispose=function(disposable){var _this=this;if(disposable&&predicates_1.isFunction(disposable.dispose)){disposable.dispose(this);return undefined}this._disposed=true;this._disposables.slice().forEach(function(d){try{typeof d.dispose==="function"&&d.dispose(_this);common_1.removeFrom(_this._disposables,d)}catch(ignored){}})};UIRouter.prototype.plugin=function(plugin,options){if(options===void 0){options={}}var pluginInstance=new plugin(this,options);if(!pluginInstance.name)throw new Error("Required property `name` missing on plugin: "+pluginInstance);this._disposables.push(pluginInstance);return this._plugins[pluginInstance.name]=pluginInstance};UIRouter.prototype.getPlugin=function(pluginName){return pluginName?this._plugins[pluginName]:common_1.values(this._plugins)};return UIRouter}();exports.UIRouter=UIRouter},{"./common/common":5,"./common/predicates":10,"./common/trace":13,"./globals":14,"./state/stateRegistry":45,"./state/stateService":46,"./transition/transitionService":56,"./url/urlMatcherFactory":59,"./url/urlRouter":60,"./url/urlService":62,"./view/view":76}],40:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./stateBuilder"));__export(require("./stateObject"));__export(require("./stateMatcher"));__export(require("./stateQueueManager"));__export(require("./stateRegistry"));__export(require("./stateService"));__export(require("./targetState"))},{"./stateBuilder":41,"./stateMatcher":42,"./stateObject":43,"./stateQueueManager":44,"./stateRegistry":45,"./stateService":46,"./targetState":47}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var strings_1=require("../common/strings");var hof_1=require("../common/hof");var resolvable_1=require("../resolve/resolvable");var coreservices_1=require("../common/coreservices");var parseUrl=function(url){if(!predicates_1.isString(url))return false;var root=url.charAt(0)==="^";return{val:root?url.substring(1):url,root:root}};function nameBuilder(state){return state.name}function selfBuilder(state){state.self.$$state=function(){return state};return state.self}function dataBuilder(state){if(state.parent&&state.parent.data){state.data=state.self.data=common_1.inherit(state.parent.data,state.data)}return state.data}var getUrlBuilder=function($urlMatcherFactoryProvider,root){return function urlBuilder(state){var stateDec=state;if(stateDec&&stateDec.url&&stateDec.name&&stateDec.name.match(/\.\*\*$/)){stateDec.url+="{remainder:any}"}var parsed=parseUrl(stateDec.url),parent=state.parent;var url=!parsed?stateDec.url:$urlMatcherFactoryProvider.compile(parsed.val,{params:state.params||{},paramMap:function(paramConfig,isSearch){if(stateDec.reloadOnSearch===false&&isSearch)paramConfig=common_1.extend(paramConfig||{},{dynamic:true});return paramConfig}});if(!url)return null;if(!$urlMatcherFactoryProvider.isMatcher(url))throw new Error("Invalid url '"+url+"' in state '"+state+"'");return parsed&&parsed.root?url:(parent&&parent.navigable||root()).url.append(url)}};var getNavigableBuilder=function(isRoot){return function navigableBuilder(state){return!isRoot(state)&&state.url?state:state.parent?state.parent.navigable:null}};var getParamsBuilder=function(paramFactory){return function paramsBuilder(state){var makeConfigParam=function(config,id){return paramFactory.fromConfig(id,null,config)};var urlParams=state.url&&state.url.parameters({inherit:false})||[];var nonUrlParams=common_1.values(common_1.mapObj(common_1.omit(state.params||{},urlParams.map(hof_1.prop("id"))),makeConfigParam));return urlParams.concat(nonUrlParams).map(function(p){return[p.id,p]}).reduce(common_1.applyPairs,{})}};function pathBuilder(state){return state.parent?state.parent.path.concat(state):[state]}function includesBuilder(state){var includes=state.parent?common_1.extend({},state.parent.includes):{};includes[state.name]=true;return includes}function resolvablesBuilder(state){var objects2Tuples=function(resolveObj,resolvePolicies){return Object.keys(resolveObj||{}).map(function(token){return{token:token,val:resolveObj[token],deps:undefined,policy:resolvePolicies[token]}})};var annotate=function(fn){var $injector=coreservices_1.services.$injector;return fn["$inject"]||$injector&&$injector.annotate(fn,$injector.strictDi)||"deferred"};var isResolveLiteral=function(obj){return!!(obj.token&&obj.resolveFn)};var isLikeNg2Provider=function(obj){return!!((obj.provide||obj.token)&&(obj.useValue||obj.useFactory||obj.useExisting||obj.useClass))};var isTupleFromObj=function(obj){return!!(obj&&obj.val&&(predicates_1.isString(obj.val)||predicates_1.isArray(obj.val)||predicates_1.isFunction(obj.val)))};var token=function(p){return p.provide||p.token};var literal2Resolvable=hof_1.pattern([[hof_1.prop("resolveFn"),function(p){return new resolvable_1.Resolvable(token(p),p.resolveFn,p.deps,p.policy)}],[hof_1.prop("useFactory"),function(p){return new resolvable_1.Resolvable(token(p),p.useFactory,p.deps||p.dependencies,p.policy)}],[hof_1.prop("useClass"),function(p){return new resolvable_1.Resolvable(token(p),function(){return new p.useClass},[],p.policy)}],[hof_1.prop("useValue"),function(p){return new resolvable_1.Resolvable(token(p),function(){return p.useValue},[],p.policy,p.useValue)}],[hof_1.prop("useExisting"),function(p){return new resolvable_1.Resolvable(token(p),common_1.identity,[p.useExisting],p.policy)}]]);var tuple2Resolvable=hof_1.pattern([[hof_1.pipe(hof_1.prop("val"),predicates_1.isString),function(tuple){return new resolvable_1.Resolvable(tuple.token,common_1.identity,[tuple.val],tuple.policy)}],[hof_1.pipe(hof_1.prop("val"),predicates_1.isArray),function(tuple){return new resolvable_1.Resolvable(tuple.token,common_1.tail(tuple.val),tuple.val.slice(0,-1),tuple.policy)}],[hof_1.pipe(hof_1.prop("val"),predicates_1.isFunction),function(tuple){return new resolvable_1.Resolvable(tuple.token,tuple.val,annotate(tuple.val),tuple.policy)}]]);var item2Resolvable=hof_1.pattern([[hof_1.is(resolvable_1.Resolvable),function(r){return r}],[isResolveLiteral,literal2Resolvable],[isLikeNg2Provider,literal2Resolvable],[isTupleFromObj,tuple2Resolvable],[hof_1.val(true),function(obj){throw new Error("Invalid resolve value: "+strings_1.stringify(obj))}]]);var decl=state.resolve;var items=predicates_1.isArray(decl)?decl:objects2Tuples(decl,state.resolvePolicy||{});return items.map(item2Resolvable)}exports.resolvablesBuilder=resolvablesBuilder;var StateBuilder=function(){function StateBuilder(matcher,urlMatcherFactory){this.matcher=matcher;var self=this;var root=function(){return matcher.find("")};var isRoot=function(state){return state.name===""};function parentBuilder(state){if(isRoot(state))return null;return matcher.find(self.parentName(state))||root()}this.builders={name:[nameBuilder],self:[selfBuilder],parent:[parentBuilder],data:[dataBuilder],url:[getUrlBuilder(urlMatcherFactory,root)],navigable:[getNavigableBuilder(isRoot)],params:[getParamsBuilder(urlMatcherFactory.paramFactory)],views:[],path:[pathBuilder],includes:[includesBuilder],resolvables:[resolvablesBuilder]}}StateBuilder.prototype.builder=function(name,fn){var builders=this.builders;var array=builders[name]||[];if(predicates_1.isString(name)&&!predicates_1.isDefined(fn))return array.length>1?array:array[0];if(!predicates_1.isString(name)||!predicates_1.isFunction(fn))return;builders[name]=array;builders[name].push(fn);return function(){return builders[name].splice(builders[name].indexOf(fn,1))&&null}};StateBuilder.prototype.build=function(state){var _a=this,matcher=_a.matcher,builders=_a.builders;var parent=this.parentName(state);if(parent&&!matcher.find(parent,undefined,false)){return null}for(var key in builders){if(!builders.hasOwnProperty(key))continue;var chain=builders[key].reduce(function(parentFn,step){return function(_state){return step(_state,parentFn)}},common_1.noop);state[key]=chain(state)}return state};StateBuilder.prototype.parentName=function(state){var name=state.name||"";var segments=name.split(".");if(segments.length>1){if(state.parent){throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+name+")")}var lastSegment=segments.pop();if(lastSegment==="**")segments.pop();return segments.join(".")}if(!state.parent)return"";return predicates_1.isString(state.parent)?state.parent:state.parent.name};StateBuilder.prototype.name=function(state){var name=state.name;if(name.indexOf(".")!==-1||!state.parent)return name;var parentName=predicates_1.isString(state.parent)?state.parent:state.parent.name;return parentName?parentName+"."+name:name};return StateBuilder}();exports.StateBuilder=StateBuilder},{"../common/common":5,"../common/coreservices":6,"../common/hof":8,"../common/predicates":10,"../common/strings":12,"../resolve/resolvable":37}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=require("../common/predicates");var common_1=require("../common/common");var StateMatcher=function(){function StateMatcher(_states){this._states=_states}StateMatcher.prototype.isRelative=function(stateName){stateName=stateName||"";return stateName.indexOf(".")===0||stateName.indexOf("^")===0};StateMatcher.prototype.find=function(stateOrName,base,matchGlob){if(matchGlob===void 0){matchGlob=true}if(!stateOrName&&stateOrName!=="")return undefined;var isStr=predicates_1.isString(stateOrName);var name=isStr?stateOrName:stateOrName.name;if(this.isRelative(name))name=this.resolvePath(name,base);var state=this._states[name];if(state&&(isStr||!isStr&&(state===stateOrName||state.self===stateOrName))){return state}else if(isStr&&matchGlob){var _states=common_1.values(this._states);var matches=_states.filter(function(state){return state.__stateObjectCache.nameGlob&&state.__stateObjectCache.nameGlob.matches(name)});if(matches.length>1){console.log("stateMatcher.find: Found multiple matches for "+name+" using glob: ",matches.map(function(match){return match.name}))}return matches[0]}return undefined};StateMatcher.prototype.resolvePath=function(name,base){if(!base)throw new Error("No reference point given for path '"+name+"'");var baseState=this.find(base);var splitName=name.split("."),i=0,pathLength=splitName.length,current=baseState;for(;i<pathLength;i++){if(splitName[i]===""&&i===0){current=baseState;continue}if(splitName[i]==="^"){if(!current.parent)throw new Error("Path '"+name+"' not valid for state '"+baseState.name+"'");current=current.parent;continue}break}var relName=splitName.slice(i).join(".");return current.name+(current.name&&relName?".":"")+relName};return StateMatcher}();exports.StateMatcher=StateMatcher},{"../common/common":5,"../common/predicates":10}],43:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var hof_1=require("../common/hof");var glob_1=require("../common/glob");var predicates_1=require("../common/predicates");var StateObject=function(){function StateObject(config){return StateObject.create(config||{})}StateObject.create=function(stateDecl){stateDecl=StateObject.isStateClass(stateDecl)?new stateDecl:stateDecl;var state=common_1.inherit(common_1.inherit(stateDecl,StateObject.prototype));stateDecl.$$state=function(){return state};state.self=stateDecl;state.__stateObjectCache={nameGlob:glob_1.Glob.fromString(state.name)};return state};StateObject.prototype.is=function(ref){return this===ref||this.self===ref||this.fqn()===ref};StateObject.prototype.fqn=function(){if(!this.parent||!(this.parent instanceof this.constructor))return this.name;var name=this.parent.fqn();return name?name+"."+this.name:this.name};StateObject.prototype.root=function(){return this.parent&&this.parent.root()||this};StateObject.prototype.parameters=function(opts){opts=common_1.defaults(opts,{inherit:true,matchingKeys:null});var inherited=opts.inherit&&this.parent&&this.parent.parameters()||[];return inherited.concat(common_1.values(this.params)).filter(function(param){return!opts.matchingKeys||opts.matchingKeys.hasOwnProperty(param.id)})};StateObject.prototype.parameter=function(id,opts){if(opts===void 0){opts={}}return this.url&&this.url.parameter(id,opts)||common_1.find(common_1.values(this.params),hof_1.propEq("id",id))||opts.inherit&&this.parent&&this.parent.parameter(id)};StateObject.prototype.toString=function(){return this.fqn()};return StateObject}();StateObject.isStateClass=function(stateDecl){return predicates_1.isFunction(stateDecl)&&stateDecl["__uiRouterState"]===true};StateObject.isState=function(obj){return predicates_1.isObject(obj["__stateObjectCache"])};exports.StateObject=StateObject},{"../common/common":5,"../common/glob":7,"../common/hof":8,"../common/predicates":10}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var stateObject_1=require("./stateObject");var hof_1=require("../common/hof");var StateQueueManager=function(){function StateQueueManager($registry,$urlRouter,states,builder,listeners){this.$registry=$registry;this.$urlRouter=$urlRouter;this.states=states;this.builder=builder;this.listeners=listeners;this.queue=[];this.matcher=$registry.matcher}StateQueueManager.prototype.dispose=function(){this.queue=[]};StateQueueManager.prototype.register=function(stateDecl){var queue=this.queue;var state=stateObject_1.StateObject.create(stateDecl);var name=state.name;if(!predicates_1.isString(name))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(name)||common_1.inArray(queue.map(hof_1.prop("name")),name))throw new Error("State '"+name+"' is already defined");queue.push(state);this.flush();return state};StateQueueManager.prototype.flush=function(){var _this=this;var _a=this,queue=_a.queue,states=_a.states,builder=_a.builder;var registered=[],orphans=[],previousQueueLength={};var getState=function(name){return _this.states.hasOwnProperty(name)&&_this.states[name]};while(queue.length>0){var state=queue.shift();var name_1=state.name;var result=builder.build(state);var orphanIdx=orphans.indexOf(state);if(result){var existingState=getState(name_1);if(existingState&&existingState.name===name_1){throw new Error("State '"+name_1+"' is already defined")}var existingFutureState=getState(name_1+".**");if(existingFutureState){this.$registry.deregister(existingFutureState)}states[name_1]=state;this.attachRoute(state);if(orphanIdx>=0)orphans.splice(orphanIdx,1);registered.push(state);continue}var prev=previousQueueLength[name_1];previousQueueLength[name_1]=queue.length;if(orphanIdx>=0&&prev===queue.length){queue.push(state);return states}else if(orphanIdx<0){orphans.push(state)}queue.push(state)}if(registered.length){this.listeners.forEach(function(listener){return listener("registered",registered.map(function(s){return s.self}))})}return states};StateQueueManager.prototype.attachRoute=function(state){if(state.abstract||!state.url)return;this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(state))};return StateQueueManager}();exports.StateQueueManager=StateQueueManager},{"../common/common":5,"../common/hof":8,"../common/predicates":10,"./stateObject":43}],45:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var stateMatcher_1=require("./stateMatcher");var stateBuilder_1=require("./stateBuilder");var stateQueueManager_1=require("./stateQueueManager");var common_1=require("../common/common");var hof_1=require("../common/hof");var StateRegistry=function(){function StateRegistry(_router){this._router=_router;this.states={};this.listeners=[];this.matcher=new stateMatcher_1.StateMatcher(this.states);this.builder=new stateBuilder_1.StateBuilder(this.matcher,_router.urlMatcherFactory);this.stateQueue=new stateQueueManager_1.StateQueueManager(this,_router.urlRouter,this.states,this.builder,this.listeners);this._registerRoot()}StateRegistry.prototype._registerRoot=function(){var rootStateDef={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:true}},abstract:true};var _root=this._root=this.stateQueue.register(rootStateDef);_root.navigable=null};StateRegistry.prototype.dispose=function(){var _this=this;this.stateQueue.dispose();this.listeners=[];this.get().forEach(function(state){return _this.get(state)&&_this.deregister(state)})};StateRegistry.prototype.onStatesChanged=function(listener){this.listeners.push(listener);return function deregisterListener(){common_1.removeFrom(this.listeners)(listener)}.bind(this)};StateRegistry.prototype.root=function(){return this._root};StateRegistry.prototype.register=function(stateDefinition){return this.stateQueue.register(stateDefinition)};StateRegistry.prototype._deregisterTree=function(state){var _this=this;var all=this.get().map(function(s){return s.$$state()});var getChildren=function(states){var children=all.filter(function(s){return states.indexOf(s.parent)!==-1});return children.length===0?children:children.concat(getChildren(children))};var children=getChildren([state]);var deregistered=[state].concat(children).reverse();deregistered.forEach(function(state){var $ur=_this._router.urlRouter;$ur.rules().filter(hof_1.propEq("state",state)).forEach($ur.removeRule.bind($ur));delete _this.states[state.name]});return deregistered};StateRegistry.prototype.deregister=function(stateOrName){var _state=this.get(stateOrName);if(!_state)throw new Error("Can't deregister state; not found: "+stateOrName);var deregisteredStates=this._deregisterTree(_state.$$state());this.listeners.forEach(function(listener){return listener("deregistered",deregisteredStates.map(function(s){return s.self}))});return deregisteredStates};StateRegistry.prototype.get=function(stateOrName,base){var _this=this;if(arguments.length===0)return Object.keys(this.states).map(function(name){return _this.states[name].self});var found=this.matcher.find(stateOrName,base);return found&&found.self||null};StateRegistry.prototype.decorator=function(name,func){return this.builder.builder(name,func)};return StateRegistry}();exports.StateRegistry=StateRegistry},{"../common/common":5,"../common/hof":8,"./stateBuilder":41,"./stateMatcher":42,"./stateQueueManager":44}],46:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var queue_1=require("../common/queue");var coreservices_1=require("../common/coreservices");var pathFactory_1=require("../path/pathFactory");var pathNode_1=require("../path/pathNode");var transitionService_1=require("../transition/transitionService");var rejectFactory_1=require("../transition/rejectFactory");var targetState_1=require("./targetState");var param_1=require("../params/param");var glob_1=require("../common/glob");var resolveContext_1=require("../resolve/resolveContext");var lazyLoad_1=require("../hooks/lazyLoad");var hof_1=require("../common/hof");var StateService=function(){function StateService(router){this.router=router;this.invalidCallbacks=[];this._defaultErrorHandler=function $defaultErrorHandler($error$){if($error$ instanceof Error&&$error$.stack){console.error($error$);console.error($error$.stack)}else if($error$ instanceof rejectFactory_1.Rejection){console.error($error$.toString());if($error$.detail&&$error$.detail.stack)console.error($error$.detail.stack)}else{console.error($error$)}};var getters=["current","$current","params","transition"];var boundFns=Object.keys(StateService.prototype).filter(hof_1.not(common_1.inArray(getters)));common_1.createProxyFunctions(hof_1.val(StateService.prototype),this,hof_1.val(this),boundFns)}Object.defineProperty(StateService.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"params",{get:function(){return this.router.globals.params},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"current",{get:function(){return this.router.globals.current},enumerable:true,configurable:true});Object.defineProperty(StateService.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:true,configurable:true});StateService.prototype.dispose=function(){this.defaultErrorHandler(common_1.noop);this.invalidCallbacks=[]};StateService.prototype._handleInvalidTargetState=function(fromPath,toState){var _this=this;var fromState=pathFactory_1.PathUtils.makeTargetState(fromPath);var globals=this.router.globals;var latestThing=function(){return globals.transitionHistory.peekTail()};var latest=latestThing();var callbackQueue=new queue_1.Queue(this.invalidCallbacks.slice());var injector=new resolveContext_1.ResolveContext(fromPath).injector();var checkForRedirect=function(result){if(!(result instanceof targetState_1.TargetState)){return}var target=result;target=_this.target(target.identifier(),target.params(),target.options());if(!target.valid()){return rejectFactory_1.Rejection.invalid(target.error()).toPromise()}if(latestThing()!==latest){return rejectFactory_1.Rejection.superseded().toPromise()}return _this.transitionTo(target.identifier(),target.params(),target.options())};function invokeNextCallback(){var nextCallback=callbackQueue.dequeue();if(nextCallback===undefined)return rejectFactory_1.Rejection.invalid(toState.error()).toPromise();var callbackResult=coreservices_1.services.$q.when(nextCallback(toState,fromState,injector));return callbackResult.then(checkForRedirect).then(function(result){return result||invokeNextCallback()})}return invokeNextCallback()};StateService.prototype.onInvalid=function(callback){this.invalidCallbacks.push(callback);return function deregisterListener(){common_1.removeFrom(this.invalidCallbacks)(callback)}.bind(this)};StateService.prototype.reload=function(reloadState){return this.transitionTo(this.current,this.params,{reload:predicates_1.isDefined(reloadState)?reloadState:true,inherit:false,notify:false})};StateService.prototype.go=function(to,params,options){var defautGoOpts={relative:this.$current,inherit:true};var transOpts=common_1.defaults(options,defautGoOpts,transitionService_1.defaultTransOpts);return this.transitionTo(to,params,transOpts)};StateService.prototype.target=function(identifier,params,options){if(options===void 0){options={}}if(predicates_1.isObject(options.reload)&&!options.reload.name)throw new Error("Invalid reload state object");var reg=this.router.stateRegistry;options.reloadState=options.reload===true?reg.root():reg.matcher.find(options.reload,options.relative);if(options.reload&&!options.reloadState)throw new Error("No such reload state '"+(predicates_1.isString(options.reload)?options.reload:options.reload.name)+"'");var stateDefinition=reg.matcher.find(identifier,options.relative);return new targetState_1.TargetState(identifier,stateDefinition,params,options)};StateService.prototype.getCurrentPath=function(){var _this=this;var globals=this.router.globals;var latestSuccess=globals.successfulTransitions.peekTail();var rootPath=function(){return[new pathNode_1.PathNode(_this.router.stateRegistry.root())]};return latestSuccess?latestSuccess.treeChanges().to:rootPath()};StateService.prototype.transitionTo=function(to,toParams,options){var _this=this;if(toParams===void 0){toParams={}}if(options===void 0){options={}}var router=this.router;var globals=router.globals;options=common_1.defaults(options,transitionService_1.defaultTransOpts);var getCurrent=function(){return globals.transition};options=common_1.extend(options,{current:getCurrent});var ref=this.target(to,toParams,options);var currentPath=this.getCurrentPath();if(!ref.exists())return this._handleInvalidTargetState(currentPath,ref);if(!ref.valid())return common_1.silentRejection(ref.error());var rejectedTransitionHandler=function(transition){return function(error){if(error instanceof rejectFactory_1.Rejection){var isLatest=router.globals.lastStartedTransitionId===transition.$id;if(error.type===rejectFactory_1.RejectType.IGNORED){isLatest&&router.urlRouter.update();return coreservices_1.services.$q.when(globals.current)}var detail=error.detail;if(error.type===rejectFactory_1.RejectType.SUPERSEDED&&error.redirected&&detail instanceof targetState_1.TargetState){var redirect=transition.redirect(detail);return redirect.run().catch(rejectedTransitionHandler(redirect))}if(error.type===rejectFactory_1.RejectType.ABORTED){isLatest&&router.urlRouter.update();return coreservices_1.services.$q.reject(error)}}var errorHandler=_this.defaultErrorHandler();errorHandler(error);return coreservices_1.services.$q.reject(error)}};var transition=this.router.transitionService.create(currentPath,ref);var transitionToPromise=transition.run().catch(rejectedTransitionHandler(transition));common_1.silenceUncaughtInPromise(transitionToPromise);return common_1.extend(transitionToPromise,{transition:transition})};StateService.prototype.is=function(stateOrName,params,options){options=common_1.defaults(options,{relative:this.$current});var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!predicates_1.isDefined(state))return undefined;if(this.$current!==state)return false;if(!params)return true;var schema=state.parameters({inherit:true,matchingKeys:params});return param_1.Param.equals(schema,param_1.Param.values(schema,params),this.params)};StateService.prototype.includes=function(stateOrName,params,options){options=common_1.defaults(options,{relative:this.$current});var glob=predicates_1.isString(stateOrName)&&glob_1.Glob.fromString(stateOrName);if(glob){if(!glob.matches(this.$current.name))return false;stateOrName=this.$current.name}var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative),include=this.$current.includes;if(!predicates_1.isDefined(state))return undefined;if(!predicates_1.isDefined(include[state.name]))return false;if(!params)return true;var schema=state.parameters({inherit:true,matchingKeys:params});return param_1.Param.equals(schema,param_1.Param.values(schema,params),this.params)};StateService.prototype.href=function(stateOrName,params,options){var defaultHrefOpts={lossy:true,inherit:true,absolute:false,relative:this.$current};options=common_1.defaults(options,defaultHrefOpts);params=params||{};var state=this.router.stateRegistry.matcher.find(stateOrName,options.relative);if(!predicates_1.isDefined(state))return null;if(options.inherit)params=this.params.$inherit(params,this.$current,state);var nav=state&&options.lossy?state.navigable:state;if(!nav||nav.url===undefined||nav.url===null){return null}return this.router.urlRouter.href(nav.url,params,{absolute:options.absolute})};StateService.prototype.defaultErrorHandler=function(handler){return this._defaultErrorHandler=handler||this._defaultErrorHandler};StateService.prototype.get=function(stateOrName,base){var reg=this.router.stateRegistry;if(arguments.length===0)return reg.get();return reg.get(stateOrName,base||this.$current)};StateService.prototype.lazyLoad=function(stateOrName,transition){var state=this.get(stateOrName);if(!state||!state.lazyLoad)throw new Error("Can not lazy load "+stateOrName);var currentPath=this.getCurrentPath();var target=pathFactory_1.PathUtils.makeTargetState(currentPath);transition=transition||this.router.transitionService.create(currentPath,target);return lazyLoad_1.lazyLoadState(transition,state)};return StateService}();exports.StateService=StateService},{"../common/common":5,"../common/coreservices":6,"../common/glob":7,"../common/hof":8,"../common/predicates":10,"../common/queue":11,"../hooks/lazyLoad":18,"../params/param":28,"../path/pathFactory":33,"../path/pathNode":34,"../resolve/resolveContext":38,"../transition/rejectFactory":52,"../transition/transitionService":56,"./targetState":47}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var TargetState=function(){function TargetState(_identifier,_definition,_params,_options){if(_options===void 0){_options={}}this._identifier=_identifier;this._definition=_definition;this._options=_options;this._params=_params||{}}TargetState.prototype.name=function(){return this._definition&&this._definition.name||this._identifier};TargetState.prototype.identifier=function(){return this._identifier};TargetState.prototype.params=function(){return this._params};TargetState.prototype.$state=function(){return this._definition};TargetState.prototype.state=function(){return this._definition&&this._definition.self};TargetState.prototype.options=function(){return this._options};TargetState.prototype.exists=function(){return!!(this._definition&&this._definition.self)};TargetState.prototype.valid=function(){return!this.error()};TargetState.prototype.error=function(){var base=this.options().relative;if(!this._definition&&!!base){var stateName=base.name?base.name:base;return"Could not resolve '"+this.name()+"' from state '"+stateName+"'"}if(!this._definition)return"No such state '"+this.name()+"'";if(!this._definition.self)return"State '"+this.name()+"' has an invalid definition"};TargetState.prototype.toString=function(){return"'"+this.name()+"'"+common_1.toJson(this.params())};return TargetState}();TargetState.isDef=function(obj){return obj&&obj.state&&(predicates_1.isString(obj.state)||predicates_1.isString(obj.state.name))};exports.TargetState=TargetState},{"../common/common":5,"../common/predicates":10}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var interface_1=require("./interface");var transitionHook_1=require("./transitionHook");var HookBuilder=function(){function HookBuilder(transition){this.transition=transition}HookBuilder.prototype.buildHooksForPhase=function(phase){var _this=this;var $transitions=this.transition.router.transitionService;return $transitions._pluginapi._getEvents(phase).map(function(type){return _this.buildHooks(type)}).reduce(common_1.unnestR,[]).filter(common_1.identity)};HookBuilder.prototype.buildHooks=function(hookType){var transition=this.transition;var treeChanges=transition.treeChanges();var matchingHooks=this.getMatchingHooks(hookType,treeChanges);if(!matchingHooks)return[];var baseHookOptions={transition:transition,current:transition.options().current};var makeTransitionHooks=function(hook){var matches=hook.matches(treeChanges);var matchingNodes=matches[hookType.criteriaMatchPath.name];return matchingNodes.map(function(node){var _options=common_1.extend({bind:hook.bind,traceData:{hookType:hookType.name,context:node}},baseHookOptions);var state=hookType.criteriaMatchPath.scope===interface_1.TransitionHookScope.STATE?node.state.self:null;var transitionHook=new transitionHook_1.TransitionHook(transition,state,hook,_options);return{hook:hook,node:node,transitionHook:transitionHook}})};return matchingHooks.map(makeTransitionHooks).reduce(common_1.unnestR,[]).sort(tupleSort(hookType.reverseSort)).map(function(tuple){return tuple.transitionHook})};HookBuilder.prototype.getMatchingHooks=function(hookType,treeChanges){var isCreate=hookType.hookPhase===interface_1.TransitionHookPhase.CREATE;var $transitions=this.transition.router.transitionService;var registries=isCreate?[$transitions]:[this.transition,$transitions];return registries.map(function(reg){return reg.getHooks(hookType.name)}).filter(common_1.assertPredicate(predicates_1.isArray,"broken event named: "+hookType.name)).reduce(common_1.unnestR,[]).filter(function(hook){return hook.matches(treeChanges)})};return HookBuilder}();exports.HookBuilder=HookBuilder;function tupleSort(reverseDepthSort){if(reverseDepthSort===void 0){reverseDepthSort=false}return function nodeDepthThenPriority(l,r){var factor=reverseDepthSort?-1:1;var depthDelta=(l.node.state.path.length-r.node.state.path.length)*factor;return depthDelta!==0?depthDelta:r.hook.priority-l.hook.priority}}},{"../common/common":5,"../common/predicates":10,"./interface":51,"./transitionHook":55}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var interface_1=require("./interface");var glob_1=require("../common/glob");function matchState(state,criterion){var toMatch=predicates_1.isString(criterion)?[criterion]:criterion;function matchGlobs(_state){var globStrings=toMatch;for(var i=0;i<globStrings.length;i++){var glob=new glob_1.Glob(globStrings[i]);if(glob&&glob.matches(_state.name)||!glob&&globStrings[i]===_state.name){return true}}return false}var matchFn=predicates_1.isFunction(toMatch)?toMatch:matchGlobs;return!!matchFn(state)}exports.matchState=matchState;var RegisteredHook=function(){function RegisteredHook(tranSvc,eventType,callback,matchCriteria,options){if(options===void 0){options={}}this.tranSvc=tranSvc;this.eventType=eventType;this.callback=callback;this.matchCriteria=matchCriteria;this.priority=options.priority||0;this.bind=options.bind||null;this._deregistered=false}RegisteredHook.prototype._matchingNodes=function(nodes,criterion){if(criterion===true)return nodes;var matching=nodes.filter(function(node){return matchState(node.state,criterion)});return matching.length?matching:null};RegisteredHook.prototype._getDefaultMatchCriteria=function(){return common_1.map(this.tranSvc._pluginapi._getPathTypes(),function(){return true})};RegisteredHook.prototype._getMatchingNodes=function(treeChanges){var _this=this;var criteria=common_1.extend(this._getDefaultMatchCriteria(),this.matchCriteria);var paths=common_1.values(this.tranSvc._pluginapi._getPathTypes());return paths.reduce(function(mn,pathtype){var isStateHook=pathtype.scope===interface_1.TransitionHookScope.STATE;var path=treeChanges[pathtype.name]||[];var nodes=isStateHook?path:[common_1.tail(path)];mn[pathtype.name]=_this._matchingNodes(nodes,criteria[pathtype.name]);return mn},{})};RegisteredHook.prototype.matches=function(treeChanges){var matches=this._getMatchingNodes(treeChanges);var allMatched=common_1.values(matches).every(common_1.identity);return allMatched?matches:null};return RegisteredHook}();exports.RegisteredHook=RegisteredHook;function makeEvent(registry,transitionService,eventType){var _registeredHooks=registry._registeredHooks=registry._registeredHooks||{};var hooks=_registeredHooks[eventType.name]=[];registry[eventType.name]=hookRegistrationFn;function hookRegistrationFn(matchObject,callback,options){if(options===void 0){options={}}var registeredHook=new RegisteredHook(transitionService,eventType,callback,matchObject,options);hooks.push(registeredHook);return function deregisterEventHook(){registeredHook._deregistered=true;common_1.removeFrom(hooks)(registeredHook)}}return hookRegistrationFn}exports.makeEvent=makeEvent},{"../common/common":5,"../common/glob":7,"../common/predicates":10,"./interface":51}],50:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./interface"));__export(require("./hookBuilder"));__export(require("./hookRegistry"));__export(require("./rejectFactory"));__export(require("./transition"));__export(require("./transitionHook"));__export(require("./transitionEventType"));__export(require("./transitionService"))},{"./hookBuilder":48,"./hookRegistry":49,"./interface":51,"./rejectFactory":52,"./transition":53,"./transitionEventType":54,"./transitionHook":55,"./transitionService":56}],51:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var TransitionHookPhase;(function(TransitionHookPhase){TransitionHookPhase[TransitionHookPhase["CREATE"]=0]="CREATE";TransitionHookPhase[TransitionHookPhase["BEFORE"]=1]="BEFORE";TransitionHookPhase[TransitionHookPhase["RUN"]=2]="RUN";TransitionHookPhase[TransitionHookPhase["SUCCESS"]=3]="SUCCESS";TransitionHookPhase[TransitionHookPhase["ERROR"]=4]="ERROR"})(TransitionHookPhase=exports.TransitionHookPhase||(exports.TransitionHookPhase={}));var TransitionHookScope;(function(TransitionHookScope){TransitionHookScope[TransitionHookScope["TRANSITION"]=0]="TRANSITION";TransitionHookScope[TransitionHookScope["STATE"]=1]="STATE"})(TransitionHookScope=exports.TransitionHookScope||(exports.TransitionHookScope={}))},{}],52:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var strings_1=require("../common/strings");var hof_1=require("../common/hof");var RejectType;(function(RejectType){RejectType[RejectType["SUPERSEDED"]=2]="SUPERSEDED";RejectType[RejectType["ABORTED"]=3]="ABORTED";RejectType[RejectType["INVALID"]=4]="INVALID";RejectType[RejectType["IGNORED"]=5]="IGNORED";RejectType[RejectType["ERROR"]=6]="ERROR"})(RejectType=exports.RejectType||(exports.RejectType={}));var id=0;var Rejection=function(){function Rejection(type,message,detail){this.$id=id++;this.type=type;this.message=message;this.detail=detail}Rejection.prototype.toString=function(){var detailString=function(d){return d&&d.toString!==Object.prototype.toString?d.toString():strings_1.stringify(d)};var detail=detailString(this.detail);var _a=this,$id=_a.$id,type=_a.type,message=_a.message;return"Transition Rejection($id: "+$id+" type: "+type+", message: "+message+", detail: "+detail+")"};Rejection.prototype.toPromise=function(){return common_1.extend(common_1.silentRejection(this),{_transitionRejection:this})};Rejection.isRejectionPromise=function(obj){return obj&&typeof obj.then==="function"&&hof_1.is(Rejection)(obj._transitionRejection)};Rejection.superseded=function(detail,options){var message="The transition has been superseded by a different transition";var rejection=new Rejection(RejectType.SUPERSEDED,message,detail);if(options&&options.redirected){rejection.redirected=true}return rejection};Rejection.redirected=function(detail){return Rejection.superseded(detail,{redirected:true})};Rejection.invalid=function(detail){var message="This transition is invalid";return new Rejection(RejectType.INVALID,message,detail)};Rejection.ignored=function(detail){var message="The transition was ignored";return new Rejection(RejectType.IGNORED,message,detail)};Rejection.aborted=function(detail){var message="The transition has been aborted";return new Rejection(RejectType.ABORTED,message,detail)};Rejection.errored=function(detail){var message="The transition errored";return new Rejection(RejectType.ERROR,message,detail)};Rejection.normalize=function(detail){return hof_1.is(Rejection)(detail)?detail:Rejection.errored(detail)};return Rejection}();exports.Rejection=Rejection},{"../common/common":5,"../common/hof":8,"../common/strings":12}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var trace_1=require("../common/trace");var coreservices_1=require("../common/coreservices");var common_1=require("../common/common");var predicates_1=require("../common/predicates");var hof_1=require("../common/hof");var interface_1=require("./interface");var transitionHook_1=require("./transitionHook");var hookRegistry_1=require("./hookRegistry");var hookBuilder_1=require("./hookBuilder");var pathFactory_1=require("../path/pathFactory");var targetState_1=require("../state/targetState");var param_1=require("../params/param");var resolvable_1=require("../resolve/resolvable");var resolveContext_1=require("../resolve/resolveContext");var stateSelf=hof_1.prop("self");var Transition=function(){function Transition(fromPath,targetState,router){var _this=this;this._deferred=coreservices_1.services.$q.defer();this.promise=this._deferred.promise;this._registeredHooks={};this._hookBuilder=new hookBuilder_1.HookBuilder(this);this.isActive=function(){return _this.router.globals.transition===_this};this.router=router;this._targetState=targetState;if(!targetState.valid()){throw new Error(targetState.error())}this._options=common_1.extend({current:hof_1.val(this)},targetState.options());this.$id=router.transitionService._transitionCount++;var toPath=pathFactory_1.PathUtils.buildToPath(fromPath,targetState);this._treeChanges=pathFactory_1.PathUtils.treeChanges(fromPath,toPath,this._options.reloadState);this.createTransitionHookRegFns();var onCreateHooks=this._hookBuilder.buildHooksForPhase(interface_1.TransitionHookPhase.CREATE);transitionHook_1.TransitionHook.invokeHooks(onCreateHooks,function(){return null});this.applyViewConfigs(router)}Transition.prototype.onBefore=function(criteria,callback,options){return};Transition.prototype.onStart=function(criteria,callback,options){return};Transition.prototype.onExit=function(criteria,callback,options){return};Transition.prototype.onRetain=function(criteria,callback,options){return};Transition.prototype.onEnter=function(criteria,callback,options){return};Transition.prototype.onFinish=function(criteria,callback,options){return};Transition.prototype.onSuccess=function(criteria,callback,options){return};Transition.prototype.onError=function(criteria,callback,options){return};Transition.prototype.createTransitionHookRegFns=function(){var _this=this;this.router.transitionService._pluginapi._getEvents().filter(function(type){return type.hookPhase!==interface_1.TransitionHookPhase.CREATE}).forEach(function(type){return hookRegistry_1.makeEvent(_this,_this.router.transitionService,type)})};Transition.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]};Transition.prototype.applyViewConfigs=function(router){var enteringStates=this._treeChanges.entering.map(function(node){return node.state});pathFactory_1.PathUtils.applyViewConfigs(router.transitionService.$view,this._treeChanges.to,enteringStates)};Transition.prototype.$from=function(){return common_1.tail(this._treeChanges.from).state};Transition.prototype.$to=function(){return common_1.tail(this._treeChanges.to).state};Transition.prototype.from=function(){return this.$from().self};Transition.prototype.to=function(){return this.$to().self};Transition.prototype.targetState=function(){return this._targetState};Transition.prototype.is=function(compare){if(compare instanceof Transition){return this.is({to:compare.$to().name,from:compare.$from().name})}return!(compare.to&&!hookRegistry_1.matchState(this.$to(),compare.to)||compare.from&&!hookRegistry_1.matchState(this.$from(),compare.from))};Transition.prototype.params=function(pathname){if(pathname===void 0){pathname="to"}return Object.freeze(this._treeChanges[pathname].map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{}))};Transition.prototype.injector=function(state,pathName){if(pathName===void 0){pathName="to"}var path=this._treeChanges[pathName];if(state)path=pathFactory_1.PathUtils.subPath(path,function(node){return node.state===state||node.state.name===state});return new resolveContext_1.ResolveContext(path).injector()};Transition.prototype.getResolveTokens=function(pathname){if(pathname===void 0){pathname="to"}return new resolveContext_1.ResolveContext(this._treeChanges[pathname]).getTokens()};Transition.prototype.addResolvable=function(resolvable,state){if(state===void 0){state=""}resolvable=hof_1.is(resolvable_1.Resolvable)(resolvable)?resolvable:new resolvable_1.Resolvable(resolvable);var stateName=typeof state==="string"?state:state.name;var topath=this._treeChanges.to;var targetNode=common_1.find(topath,function(node){return node.state.name===stateName});var resolveContext=new resolveContext_1.ResolveContext(topath);resolveContext.addResolvables([resolvable],targetNode.state)};Transition.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null};Transition.prototype.originalTransition=function(){var rf=this.redirectedFrom();return rf&&rf.originalTransition()||this};Transition.prototype.options=function(){return this._options};Transition.prototype.entering=function(){return common_1.map(this._treeChanges.entering,hof_1.prop("state")).map(stateSelf)};Transition.prototype.exiting=function(){return common_1.map(this._treeChanges.exiting,hof_1.prop("state")).map(stateSelf).reverse()};Transition.prototype.retained=function(){return common_1.map(this._treeChanges.retained,hof_1.prop("state")).map(stateSelf)};Transition.prototype.views=function(pathname,state){if(pathname===void 0){pathname="entering"}var path=this._treeChanges[pathname];path=!state?path:path.filter(hof_1.propEq("state",state));return path.map(hof_1.prop("views")).filter(common_1.identity).reduce(common_1.unnestR,[])};Transition.prototype.treeChanges=function(pathname){return pathname?this._treeChanges[pathname]:this._treeChanges};Transition.prototype.redirect=function(targetState){var redirects=1,trans=this;while((trans=trans.redirectedFrom())!=null){if(++redirects>20)throw new Error("Too many consecutive Transition redirects (20+)")}var redirectOpts={redirectedFrom:this,source:"redirect"};if(this.options().source==="url"&&targetState.options().location!==false){redirectOpts.location="replace"}var newOptions=common_1.extend({},this.options(),targetState.options(),redirectOpts);targetState=new targetState_1.TargetState(targetState.identifier(),targetState.$state(),targetState.params(),newOptions);var newTransition=this.router.transitionService.create(this._treeChanges.from,targetState);var originalEnteringNodes=this._treeChanges.entering;var redirectEnteringNodes=newTransition._treeChanges.entering;var nodeIsReloading=function(reloadState){return function(node){return reloadState&&node.state.includes[reloadState.name]}};var matchingEnteringNodes=pathFactory_1.PathUtils.matching(redirectEnteringNodes,originalEnteringNodes,pathFactory_1.PathUtils.nonDynamicParams).filter(hof_1.not(nodeIsReloading(targetState.options().reloadState)));matchingEnteringNodes.forEach(function(node,idx){node.resolvables=originalEnteringNodes[idx].resolvables});return newTransition};Transition.prototype._changedParams=function(){var tc=this._treeChanges;if(this._options.reload)return undefined;if(tc.exiting.length||tc.entering.length)return undefined;if(tc.to.length!==tc.from.length)return undefined;var pathsDiffer=common_1.arrayTuples(tc.to,tc.from).map(function(tuple){return tuple[0].state!==tuple[1].state}).reduce(common_1.anyTrueR,false);if(pathsDiffer)return undefined;var nodeSchemas=tc.to.map(function(node){return node.paramSchema});var _a=[tc.to,tc.from].map(function(path){return path.map(function(x){return x.paramValues})}),toValues=_a[0],fromValues=_a[1];var tuples=common_1.arrayTuples(nodeSchemas,toValues,fromValues);return tuples.map(function(_a){var schema=_a[0],toVals=_a[1],fromVals=_a[2];return param_1.Param.changed(schema,toVals,fromVals)}).reduce(common_1.unnestR,[])};Transition.prototype.dynamic=function(){var changes=this._changedParams();return!changes?false:changes.map(function(x){return x.dynamic}).reduce(common_1.anyTrueR,false)};Transition.prototype.ignored=function(){return!!this._ignoredReason()};Transition.prototype._ignoredReason=function(){var pending=this.router.globals.transition;var reloadState=this._options.reloadState;var same=function(pathA,pathB){if(pathA.length!==pathB.length)return false;var matching=pathFactory_1.PathUtils.matching(pathA,pathB);return pathA.length===matching.filter(function(node){return!reloadState||!node.state.includes[reloadState.name]}).length};var newTC=this.treeChanges();var pendTC=pending&&pending.treeChanges();if(pendTC&&same(pendTC.to,newTC.to)&&same(pendTC.exiting,newTC.exiting))return"SameAsPending";if(newTC.exiting.length===0&&newTC.entering.length===0&&same(newTC.from,newTC.to))return"SameAsCurrent"};Transition.prototype.run=function(){var _this=this;var runAllHooks=transitionHook_1.TransitionHook.runAllHooks;var getHooksFor=function(phase){return _this._hookBuilder.buildHooksForPhase(phase)};var transitionSuccess=function(){trace_1.trace.traceSuccess(_this.$to(),_this);_this.success=true;_this._deferred.resolve(_this.to());runAllHooks(getHooksFor(interface_1.TransitionHookPhase.SUCCESS))};var transitionError=function(reason){trace_1.trace.traceError(reason,_this);_this.success=false;_this._deferred.reject(reason);_this._error=reason;runAllHooks(getHooksFor(interface_1.TransitionHookPhase.ERROR))};var runTransition=function(){var allRunHooks=getHooksFor(interface_1.TransitionHookPhase.RUN);var done=function(){return coreservices_1.services.$q.when(undefined)};return transitionHook_1.TransitionHook.invokeHooks(allRunHooks,done)};var startTransition=function(){var globals=_this.router.globals;globals.lastStartedTransitionId=_this.$id;globals.transition=_this;globals.transitionHistory.enqueue(_this);trace_1.trace.traceTransitionStart(_this);return coreservices_1.services.$q.when(undefined)};var allBeforeHooks=getHooksFor(interface_1.TransitionHookPhase.BEFORE);transitionHook_1.TransitionHook.invokeHooks(allBeforeHooks,startTransition).then(runTransition).then(transitionSuccess,transitionError);return this.promise};Transition.prototype.valid=function(){return!this.error()||this.success!==undefined};Transition.prototype.abort=function(){if(predicates_1.isUndefined(this.success)){this._aborted=true}};Transition.prototype.error=function(){var state=this.$to();if(state.self.abstract)return"Cannot transition to abstract state '"+state.name+"'";if(!param_1.Param.validates(state.parameters(),this.params()))return"Param values not valid for state '"+state.name+"'";if(this.success===false)return this._error};Transition.prototype.toString=function(){var fromStateOrName=this.from();var toStateOrName=this.to();var avoidEmptyHash=function(params){return params["#"]!==null&&params["#"]!==undefined?params:common_1.omit(params,["#"])};var id=this.$id,from=predicates_1.isObject(fromStateOrName)?fromStateOrName.name:fromStateOrName,fromParams=common_1.toJson(avoidEmptyHash(this._treeChanges.from.map(hof_1.prop("paramValues")).reduce(common_1.mergeR,{}))),toValid=this.valid()?"":"(X) ",to=predicates_1.isObject(toStateOrName)?toStateOrName.name:toStateOrName,toParams=common_1.toJson(avoidEmptyHash(this.params()));return"Transition#"+id+"( '"+from+"'"+fromParams+" -> "+toValid+"'"+to+"'"+toParams+" )"};return Transition}();Transition.diToken=Transition;exports.Transition=Transition},{"../common/common":5,"../common/coreservices":6,"../common/hof":8,"../common/predicates":10,"../common/trace":13,"../params/param":28,"../path/pathFactory":33,"../resolve/resolvable":37,"../resolve/resolveContext":38,"../state/targetState":47,"./hookBuilder":48,"./hookRegistry":49,"./interface":51,"./transitionHook":55}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var transitionHook_1=require("./transitionHook");var TransitionEventType=function(){function TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){if(reverseSort===void 0){reverseSort=false}if(getResultHandler===void 0){getResultHandler=transitionHook_1.TransitionHook.HANDLE_RESULT}if(getErrorHandler===void 0){getErrorHandler=transitionHook_1.TransitionHook.REJECT_ERROR}if(synchronous===void 0){synchronous=false}this.name=name;this.hookPhase=hookPhase;this.hookOrder=hookOrder;this.criteriaMatchPath=criteriaMatchPath;this.reverseSort=reverseSort;this.getResultHandler=getResultHandler;this.getErrorHandler=getErrorHandler;this.synchronous=synchronous}return TransitionEventType}();exports.TransitionEventType=TransitionEventType},{"./transitionHook":55}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var interface_1=require("./interface");var common_1=require("../common/common");var strings_1=require("../common/strings");var predicates_1=require("../common/predicates");var hof_1=require("../common/hof");var trace_1=require("../common/trace");var coreservices_1=require("../common/coreservices");var rejectFactory_1=require("./rejectFactory");var targetState_1=require("../state/targetState");var defaultOptions={current:common_1.noop,transition:null,traceData:{},bind:null};var TransitionHook=function(){function TransitionHook(transition,stateContext,registeredHook,options){var _this=this;this.transition=transition;this.stateContext=stateContext;this.registeredHook=registeredHook;this.options=options;this.isSuperseded=function(){return _this.type.hookPhase===interface_1.TransitionHookPhase.RUN&&!_this.options.transition.isActive()};this.options=common_1.defaults(options,defaultOptions);this.type=registeredHook.eventType}TransitionHook.prototype.logError=function(err){this.transition.router.stateService.defaultErrorHandler()(err)};TransitionHook.prototype.invokeHook=function(){var _this=this;var hook=this.registeredHook;if(hook._deregistered)return;var notCurrent=this.getNotCurrentRejection();if(notCurrent)return notCurrent;var options=this.options;trace_1.trace.traceHookInvocation(this,this.transition,options);var invokeCallback=function(){return hook.callback.call(options.bind,_this.transition,_this.stateContext)};var normalizeErr=function(err){return rejectFactory_1.Rejection.normalize(err).toPromise()};var handleError=function(err){return hook.eventType.getErrorHandler(_this)(err)};var handleResult=function(result){return hook.eventType.getResultHandler(_this)(result)};try{var result=invokeCallback();if(!this.type.synchronous&&predicates_1.isPromise(result)){return result.catch(normalizeErr).then(handleResult,handleError)}else{return handleResult(result)}}catch(err){return handleError(rejectFactory_1.Rejection.normalize(err))}};TransitionHook.prototype.handleHookResult=function(result){var _this=this;var notCurrent=this.getNotCurrentRejection();if(notCurrent)return notCurrent;if(predicates_1.isPromise(result)){return result.then(function(val){return _this.handleHookResult(val)})}trace_1.trace.traceHookResult(result,this.transition,this.options);if(result===false){return rejectFactory_1.Rejection.aborted("Hook aborted transition").toPromise()}var isTargetState=hof_1.is(targetState_1.TargetState);if(isTargetState(result)){return rejectFactory_1.Rejection.redirected(result).toPromise()}};TransitionHook.prototype.getNotCurrentRejection=function(){var router=this.transition.router;if(router._disposed){return rejectFactory_1.Rejection.aborted("UIRouter instance #"+router.$id+" has been stopped (disposed)").toPromise()}if(this.transition._aborted){return rejectFactory_1.Rejection.aborted().toPromise()}if(this.isSuperseded()){return rejectFactory_1.Rejection.superseded(this.options.current()).toPromise()}};TransitionHook.prototype.toString=function(){var _a=this,options=_a.options,registeredHook=_a.registeredHook;var event=hof_1.parse("traceData.hookType")(options)||"internal",context=hof_1.parse("traceData.context.state.name")(options)||hof_1.parse("traceData.context")(options)||"unknown",name=strings_1.fnToString(registeredHook.callback);return event+" context: "+context+", "+strings_1.maxLength(200,name)};TransitionHook.chain=function(hooks,waitFor){var createHookChainR=function(prev,nextHook){return prev.then(function(){return nextHook.invokeHook()})};return hooks.reduce(createHookChainR,waitFor||coreservices_1.services.$q.when())};TransitionHook.invokeHooks=function(hooks,doneCallback){for(var idx=0;idx<hooks.length;idx++){var hookResult=hooks[idx].invokeHook();if(predicates_1.isPromise(hookResult)){var remainingHooks=hooks.slice(idx+1);return TransitionHook.chain(remainingHooks,hookResult).then(doneCallback)}}return doneCallback()};TransitionHook.runAllHooks=function(hooks){hooks.forEach(function(hook){return hook.invokeHook()})};return TransitionHook}();TransitionHook.HANDLE_RESULT=function(hook){return function(result){return hook.handleHookResult(result)}};TransitionHook.LOG_REJECTED_RESULT=function(hook){return function(result){predicates_1.isPromise(result)&&result.catch(function(err){return hook.logError(rejectFactory_1.Rejection.normalize(err))});return undefined}};TransitionHook.LOG_ERROR=function(hook){return function(error){return hook.logError(error)}};TransitionHook.REJECT_ERROR=function(hook){return function(error){return common_1.silentRejection(error)}};TransitionHook.THROW_ERROR=function(hook){return function(error){throw error}};exports.TransitionHook=TransitionHook},{"../common/common":5,"../common/coreservices":6,"../common/hof":8,"../common/predicates":10,"../common/strings":12,"../common/trace":13,"../state/targetState":47,"./interface":51,"./rejectFactory":52}],56:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var interface_1=require("./interface");var transition_1=require("./transition");var hookRegistry_1=require("./hookRegistry");var coreResolvables_1=require("../hooks/coreResolvables");var redirectTo_1=require("../hooks/redirectTo");var onEnterExitRetain_1=require("../hooks/onEnterExitRetain");var resolve_1=require("../hooks/resolve");var views_1=require("../hooks/views");var updateGlobals_1=require("../hooks/updateGlobals");var url_1=require("../hooks/url");var lazyLoad_1=require("../hooks/lazyLoad");var transitionEventType_1=require("./transitionEventType");var transitionHook_1=require("./transitionHook");var predicates_1=require("../common/predicates");var common_1=require("../common/common");var hof_1=require("../common/hof");var ignoredTransition_1=require("../hooks/ignoredTransition");var invalidTransition_1=require("../hooks/invalidTransition");exports.defaultTransOpts={location:true,relative:null,inherit:false,notify:true,reload:false,custom:{},current:function(){return null},source:"unknown"};var TransitionService=function(){function TransitionService(_router){this._transitionCount=0;this._eventTypes=[];this._registeredHooks={};this._criteriaPaths={};this._router=_router;this.$view=_router.viewService;this._deregisterHookFns={};this._pluginapi=common_1.createProxyFunctions(hof_1.val(this),{},hof_1.val(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]);this._defineCorePaths();this._defineCoreEvents();this._registerCoreTransitionHooks()}TransitionService.prototype.onCreate=function(criteria,callback,options){return};TransitionService.prototype.onBefore=function(criteria,callback,options){return};TransitionService.prototype.onStart=function(criteria,callback,options){return};TransitionService.prototype.onExit=function(criteria,callback,options){return};TransitionService.prototype.onRetain=function(criteria,callback,options){return};TransitionService.prototype.onEnter=function(criteria,callback,options){return};TransitionService.prototype.onFinish=function(criteria,callback,options){return};TransitionService.prototype.onSuccess=function(criteria,callback,options){return};TransitionService.prototype.onError=function(criteria,callback,options){return};TransitionService.prototype.dispose=function(router){common_1.values(this._registeredHooks).forEach(function(hooksArray){return hooksArray.forEach(function(hook){hook._deregistered=true;common_1.removeFrom(hooksArray,hook)})})};TransitionService.prototype.create=function(fromPath,targetState){return new transition_1.Transition(fromPath,targetState,this._router)};TransitionService.prototype._defineCoreEvents=function(){var Phase=interface_1.TransitionHookPhase;var TH=transitionHook_1.TransitionHook;var paths=this._criteriaPaths;var NORMAL_SORT=false,REVERSE_SORT=true;var ASYNCHRONOUS=false,SYNCHRONOUS=true;this._defineEvent("onCreate",Phase.CREATE,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.THROW_ERROR,SYNCHRONOUS);this._defineEvent("onBefore",Phase.BEFORE,0,paths.to);this._defineEvent("onStart",Phase.RUN,0,paths.to);this._defineEvent("onExit",Phase.RUN,100,paths.exiting,REVERSE_SORT);this._defineEvent("onRetain",Phase.RUN,200,paths.retained);this._defineEvent("onEnter",Phase.RUN,300,paths.entering);this._defineEvent("onFinish",Phase.RUN,400,paths.to);this._defineEvent("onSuccess",Phase.SUCCESS,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,SYNCHRONOUS);this._defineEvent("onError",Phase.ERROR,0,paths.to,NORMAL_SORT,TH.LOG_REJECTED_RESULT,TH.LOG_ERROR,SYNCHRONOUS)};TransitionService.prototype._defineCorePaths=function(){var STATE=interface_1.TransitionHookScope.STATE,TRANSITION=interface_1.TransitionHookScope.TRANSITION;this._definePathType("to",TRANSITION);this._definePathType("from",TRANSITION);this._definePathType("exiting",STATE);this._definePathType("retained",STATE);this._definePathType("entering",STATE)};TransitionService.prototype._defineEvent=function(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous){if(reverseSort===void 0){reverseSort=false}if(getResultHandler===void 0){getResultHandler=transitionHook_1.TransitionHook.HANDLE_RESULT}if(getErrorHandler===void 0){getErrorHandler=transitionHook_1.TransitionHook.REJECT_ERROR}if(synchronous===void 0){synchronous=false}var eventType=new transitionEventType_1.TransitionEventType(name,hookPhase,hookOrder,criteriaMatchPath,reverseSort,getResultHandler,getErrorHandler,synchronous);this._eventTypes.push(eventType);hookRegistry_1.makeEvent(this,this,eventType)};TransitionService.prototype._getEvents=function(phase){var transitionHookTypes=predicates_1.isDefined(phase)?this._eventTypes.filter(function(type){return type.hookPhase===phase}):this._eventTypes.slice();return transitionHookTypes.sort(function(l,r){var cmpByPhase=l.hookPhase-r.hookPhase;return cmpByPhase===0?l.hookOrder-r.hookOrder:cmpByPhase})};TransitionService.prototype._definePathType=function(name,hookScope){this._criteriaPaths[name]={name:name,scope:hookScope}};TransitionService.prototype._getPathTypes=function(){return this._criteriaPaths};TransitionService.prototype.getHooks=function(hookName){return this._registeredHooks[hookName]};TransitionService.prototype._registerCoreTransitionHooks=function(){var fns=this._deregisterHookFns;fns.addCoreResolves=coreResolvables_1.registerAddCoreResolvables(this);fns.ignored=ignoredTransition_1.registerIgnoredTransitionHook(this);fns.invalid=invalidTransition_1.registerInvalidTransitionHook(this);fns.redirectTo=redirectTo_1.registerRedirectToHook(this);fns.onExit=onEnterExitRetain_1.registerOnExitHook(this);fns.onRetain=onEnterExitRetain_1.registerOnRetainHook(this);fns.onEnter=onEnterExitRetain_1.registerOnEnterHook(this);fns.eagerResolve=resolve_1.registerEagerResolvePath(this);fns.lazyResolve=resolve_1.registerLazyResolveState(this);fns.loadViews=views_1.registerLoadEnteringViews(this);fns.activateViews=views_1.registerActivateViews(this);fns.updateGlobals=updateGlobals_1.registerUpdateGlobalState(this);fns.updateUrl=url_1.registerUpdateUrl(this);fns.lazyLoad=lazyLoad_1.registerLazyLoadHook(this)};return TransitionService}();exports.TransitionService=TransitionService},{"../common/common":5,"../common/hof":8,"../common/predicates":10,"../hooks/coreResolvables":15,"../hooks/ignoredTransition":16,"../hooks/invalidTransition":17,"../hooks/lazyLoad":18,"../hooks/onEnterExitRetain":19,"../hooks/redirectTo":20,"../hooks/resolve":21,"../hooks/updateGlobals":22,"../hooks/url":23,"../hooks/views":24,"./hookRegistry":49,"./interface":51,"./transition":53,"./transitionEventType":54,"./transitionHook":55}],57:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./urlMatcher"));__export(require("./urlMatcherFactory"));__export(require("./urlRouter"));__export(require("./urlRule"));__export(require("./urlService"))},{"./urlMatcher":58,"./urlMatcherFactory":59,"./urlRouter":60,"./urlRule":61,"./urlService":62}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var hof_1=require("../common/hof");var predicates_1=require("../common/predicates");var param_1=require("../params/param");var strings_1=require("../common/strings");function quoteRegExp(string,param){var surroundPattern=["",""],result=string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!param)return result;switch(param.squash){case false:surroundPattern=["(",")"+(param.isOptional?"?":"")];break;case true:result=result.replace(/\/$/,"");surroundPattern=["(?:/(",")|/)?"];break;default:surroundPattern=["("+param.squash+"|",")?"];break}return result+surroundPattern[0]+param.type.pattern.source+surroundPattern[1]}var memoizeTo=function(obj,prop,fn){return obj[prop]=obj[prop]||fn()};var splitOnSlash=strings_1.splitOnDelim("/");var UrlMatcher=function(){function UrlMatcher(pattern,paramTypes,paramFactory,config){var _this=this;this.config=config;this._cache={path:[this]};this._children=[];this._params=[];this._segments=[];this._compiled=[];this.pattern=pattern;this.config=common_1.defaults(this.config,{params:{},strict:true,caseInsensitive:false,paramMap:common_1.identity});var placeholder=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,searchPlaceholder=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,last=0,m,patterns=[];var checkParamErrors=function(id){if(!UrlMatcher.nameValidator.test(id))throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");if(common_1.find(_this._params,hof_1.propEq("id",id)))throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'")};var matchDetails=function(m,isSearch){var id=m[2]||m[3];var regexp=isSearch?m[4]:m[4]||(m[1]==="*"?".*":null);var makeRegexpType=function(regexp){return common_1.inherit(paramTypes.type(isSearch?"query":"path"),{pattern:new RegExp(regexp,_this.config.caseInsensitive?"i":undefined)})};return{id:id,regexp:regexp,cfg:_this.config.params[id],segment:pattern.substring(last,m.index),type:!regexp?null:paramTypes.type(regexp)||makeRegexpType(regexp)}};var p,segment;while(m=placeholder.exec(pattern)){p=matchDetails(m,false);if(p.segment.indexOf("?")>=0)break;checkParamErrors(p.id);this._params.push(paramFactory.fromPath(p.id,p.type,this.config.paramMap(p.cfg,false)));this._segments.push(p.segment);patterns.push([p.segment,common_1.tail(this._params)]);last=placeholder.lastIndex}segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=segment.substring(i);segment=segment.substring(0,i);if(search.length>0){last=0;while(m=searchPlaceholder.exec(search)){p=matchDetails(m,true);checkParamErrors(p.id);this._params.push(paramFactory.fromSearch(p.id,p.type,this.config.paramMap(p.cfg,true)));last=placeholder.lastIndex}}}this._segments.push(segment);this._compiled=patterns.map(function(pattern){return quoteRegExp.apply(null,pattern)}).concat(quoteRegExp(segment))}UrlMatcher.prototype.append=function(url){this._children.push(url);url._cache={path:this._cache.path.concat(url),parent:this,pattern:null};return url};UrlMatcher.prototype.isRoot=function(){return this._cache.path[0]===this};UrlMatcher.prototype.toString=function(){return this.pattern};UrlMatcher.prototype.exec=function(path,search,hash,options){var _this=this;if(search===void 0){search={}}if(options===void 0){options={}}var match=memoizeTo(this._cache,"pattern",function(){return new RegExp(["^",common_1.unnest(_this._cache.path.map(hof_1.prop("_compiled"))).join(""),_this.config.strict===false?"/?":"","$"].join(""),_this.config.caseInsensitive?"i":undefined)}).exec(path);if(!match)return null;var allParams=this.parameters(),pathParams=allParams.filter(function(param){return!param.isSearch()}),searchParams=allParams.filter(function(param){return param.isSearch()}),nPathSegments=this._cache.path.map(function(urlm){return urlm._segments.length-1}).reduce(function(a,x){return a+x}),values={};if(nPathSegments!==match.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");function decodePathArray(string){var reverseString=function(str){return str.split("").reverse().join("")};var unquoteDashes=function(str){return str.replace(/\\-/g,"-")};var split=reverseString(string).split(/-(?!\\)/);var allReversed=common_1.map(split,reverseString);return common_1.map(allReversed,unquoteDashes).reverse()}for(var i=0;i<nPathSegments;i++){var param=pathParams[i];var value=match[i+1];for(var j=0;j<param.replace.length;j++){if(param.replace[j].from===value)value=param.replace[j].to}if(value&&param.array===true)value=decodePathArray(value);if(predicates_1.isDefined(value))value=param.type.decode(value);values[param.id]=param.value(value)}searchParams.forEach(function(param){var value=search[param.id];for(var j=0;j<param.replace.length;j++){if(param.replace[j].from===value)value=param.replace[j].to}if(predicates_1.isDefined(value))value=param.type.decode(value);values[param.id]=param.value(value)});if(hash)values["#"]=hash;return values};UrlMatcher.prototype.parameters=function(opts){if(opts===void 0){opts={}}if(opts.inherit===false)return this._params;return common_1.unnest(this._cache.path.map(function(matcher){return matcher._params}))};UrlMatcher.prototype.parameter=function(id,opts){var _this=this;if(opts===void 0){opts={}}var findParam=function(){for(var _i=0,_a=_this._params;_i<_a.length;_i++){var param=_a[_i];if(param.id===id)return param}};var parent=this._cache.parent;return findParam()||opts.inherit!==false&&parent&&parent.parameter(id,opts)||null};UrlMatcher.prototype.validates=function(params){var validParamVal=function(param,val){return!param||param.validates(val)};params=params||{};var paramSchema=this.parameters().filter(function(paramDef){return params.hasOwnProperty(paramDef.id)});return paramSchema.map(function(paramDef){return validParamVal(paramDef,params[paramDef.id])}).reduce(common_1.allTrueR,true)};UrlMatcher.prototype.format=function(values){if(values===void 0){values={}}var urlMatchers=this._cache.path;var pathSegmentsAndParams=urlMatchers.map(UrlMatcher.pathSegmentsAndParams).reduce(common_1.unnestR,[]).map(function(x){return predicates_1.isString(x)?x:getDetails(x)});var queryParams=urlMatchers.map(UrlMatcher.queryParams).reduce(common_1.unnestR,[]).map(getDetails);var isInvalid=function(param){return param.isValid===false};if(pathSegmentsAndParams.concat(queryParams).filter(isInvalid).length){return null}function getDetails(param){var value=param.value(values[param.id]);var isValid=param.validates(value);var isDefaultValue=param.isDefaultValue(value);var squash=isDefaultValue?param.squash:false;var encoded=param.type.encode(value);return{param:param,value:value,isValid:isValid,isDefaultValue:isDefaultValue,squash:squash,encoded:encoded}}var pathString=pathSegmentsAndParams.reduce(function(acc,x){if(predicates_1.isString(x))return acc+x;var squash=x.squash,encoded=x.encoded,param=x.param;if(squash===true)return acc.match(/\/$/)?acc.slice(0,-1):acc;if(predicates_1.isString(squash))return acc+squash;if(squash!==false)return acc;if(encoded==null)return acc;if(predicates_1.isArray(encoded))return acc+common_1.map(encoded,UrlMatcher.encodeDashes).join("-");if(param.raw)return acc+encoded;return acc+encodeURIComponent(encoded)},"");var queryString=queryParams.map(function(paramDetails){var param=paramDetails.param,squash=paramDetails.squash,encoded=paramDetails.encoded,isDefaultValue=paramDetails.isDefaultValue;if(encoded==null||isDefaultValue&&squash!==false)return;if(!predicates_1.isArray(encoded))encoded=[encoded];if(encoded.length===0)return;if(!param.raw)encoded=common_1.map(encoded,encodeURIComponent);return encoded.map(function(val){return param.id+"="+val})}).filter(common_1.identity).reduce(common_1.unnestR,[]).join("&");return pathString+(queryString?"?"+queryString:"")+(values["#"]?"#"+values["#"]:"")};UrlMatcher.encodeDashes=function(str){return encodeURIComponent(str).replace(/-/g,function(c){return"%5C%"+c.charCodeAt(0).toString(16).toUpperCase()})};UrlMatcher.pathSegmentsAndParams=function(matcher){var staticSegments=matcher._segments;var pathParams=matcher._params.filter(function(p){return p.location===param_1.DefType.PATH});return common_1.arrayTuples(staticSegments,pathParams.concat(undefined)).reduce(common_1.unnestR,[]).filter(function(x){return x!==""&&predicates_1.isDefined(x)})};UrlMatcher.queryParams=function(matcher){return matcher._params.filter(function(p){return p.location===param_1.DefType.SEARCH})};UrlMatcher.compare=function(a,b){var segments=function(matcher){return matcher._cache.segments=matcher._cache.segments||matcher._cache.path.map(UrlMatcher.pathSegmentsAndParams).reduce(common_1.unnestR,[]).reduce(strings_1.joinNeighborsR,[]).map(function(x){return predicates_1.isString(x)?splitOnSlash(x):x}).reduce(common_1.unnestR,[])};var weights=function(matcher){return matcher._cache.weights=matcher._cache.weights||segments(matcher).map(function(segment){if(segment==="/")return 1;if(predicates_1.isString(segment))return 2;if(segment instanceof param_1.Param)return 3})};var cmp,i,pairs=common_1.arrayTuples(weights(a),weights(b));for(i=0;i<pairs.length;i++){cmp=pairs[i][0]-pairs[i][1];if(cmp!==0)return cmp}return 0};return UrlMatcher}();UrlMatcher.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/;exports.UrlMatcher=UrlMatcher},{"../common/common":5,"../common/hof":8,"../common/predicates":10,"../common/strings":12,"../params/param":28}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var urlMatcher_1=require("./urlMatcher");var param_1=require("../params/param");var paramTypes_1=require("../params/paramTypes");var UrlMatcherFactory=function(){function UrlMatcherFactory(){var _this=this;this.paramTypes=new paramTypes_1.ParamTypes;this._isCaseInsensitive=false;this._isStrictMode=true;this._defaultSquashPolicy=false;this._getConfig=function(config){return common_1.extend({strict:_this._isStrictMode,caseInsensitive:_this._isCaseInsensitive},config)};this.paramFactory={fromConfig:function(id,type,config){return new param_1.Param(id,type,config,param_1.DefType.CONFIG,_this)},fromPath:function(id,type,config){return new param_1.Param(id,type,config,param_1.DefType.PATH,_this)},fromSearch:function(id,type,config){return new param_1.Param(id,type,config,param_1.DefType.SEARCH,_this)}};common_1.extend(this,{UrlMatcher:urlMatcher_1.UrlMatcher,Param:param_1.Param})}UrlMatcherFactory.prototype.caseInsensitive=function(value){return this._isCaseInsensitive=predicates_1.isDefined(value)?value:this._isCaseInsensitive};UrlMatcherFactory.prototype.strictMode=function(value){return this._isStrictMode=predicates_1.isDefined(value)?value:this._isStrictMode};UrlMatcherFactory.prototype.defaultSquashPolicy=function(value){if(predicates_1.isDefined(value)&&value!==true&&value!==false&&!predicates_1.isString(value))throw new Error("Invalid squash policy: "+value+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=predicates_1.isDefined(value)?value:this._defaultSquashPolicy};UrlMatcherFactory.prototype.compile=function(pattern,config){return new urlMatcher_1.UrlMatcher(pattern,this.paramTypes,this.paramFactory,this._getConfig(config))};UrlMatcherFactory.prototype.isMatcher=function(object){if(!predicates_1.isObject(object))return false;var result=true;common_1.forEach(urlMatcher_1.UrlMatcher.prototype,function(val,name){if(predicates_1.isFunction(val))result=result&&(predicates_1.isDefined(object[name])&&predicates_1.isFunction(object[name]))});return result};UrlMatcherFactory.prototype.type=function(name,definition,definitionFn){var type=this.paramTypes.type(name,definition,definitionFn);return!predicates_1.isDefined(definition)?type:this};UrlMatcherFactory.prototype.$get=function(){this.paramTypes.enqueue=false;this.paramTypes._flushTypeQueue();return this};UrlMatcherFactory.prototype.dispose=function(){this.paramTypes.dispose()};return UrlMatcherFactory}();exports.UrlMatcherFactory=UrlMatcherFactory},{"../common/common":5,"../common/predicates":10,"../params/param":28,"../params/paramTypes":30,"./urlMatcher":58}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var predicates_1=require("../common/predicates");var urlMatcher_1=require("./urlMatcher");var hof_1=require("../common/hof");var urlRule_1=require("./urlRule");var targetState_1=require("../state/targetState");function appendBasePath(url,isHtml5,absolute,baseHref){if(baseHref==="/")return url;if(isHtml5)return baseHref.slice(0,-1)+url;if(absolute)return baseHref.slice(1)+url;return url}var getMatcher=hof_1.prop("urlMatcher");var defaultRuleSortFn;defaultRuleSortFn=common_1.composeSort(common_1.sortBy(hof_1.pipe(hof_1.prop("priority"),function(x){return-x})),common_1.sortBy(hof_1.pipe(hof_1.prop("type"),function(type){return{STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1}[type]})),function(a,b){return getMatcher(a)&&getMatcher(b)?urlMatcher_1.UrlMatcher.compare(getMatcher(a),getMatcher(b)):0},common_1.sortBy(hof_1.prop("$id"),common_1.inArray(["REGEXP","RAW","OTHER"])));var UrlRouter=function(){function UrlRouter(router){this._sortFn=defaultRuleSortFn;this._rules=[];this.interceptDeferred=false;this._id=0;this._sorted=false;this._router=router;this.urlRuleFactory=new urlRule_1.UrlRuleFactory(router);common_1.createProxyFunctions(hof_1.val(UrlRouter.prototype),this,hof_1.val(this))}UrlRouter.prototype.dispose=function(){this.listen(false);this._rules=[];delete this._otherwiseFn};UrlRouter.prototype.sort=function(compareFn){this._rules.sort(this._sortFn=compareFn||this._sortFn);this._sorted=true};UrlRouter.prototype.ensureSorted=function(){this._sorted||this.sort()};UrlRouter.prototype.match=function(url){var _this=this;this.ensureSorted();url=common_1.extend({path:"",search:{},hash:""},url);var rules=this.rules();if(this._otherwiseFn)rules.push(this._otherwiseFn);var checkRule=function(rule){var match=rule.match(url,_this._router);return match&&{match:match,rule:rule,weight:rule.matchPriority(match)}};var best;for(var i=0;i<rules.length;i++){if(best&&this._sortFn(rules[i],best.rule)!==0)break;var current=checkRule(rules[i]);best=!best||current&&current.weight>best.weight?current:best}return best};UrlRouter.prototype.sync=function(evt){if(evt&&evt.defaultPrevented)return;var router=this._router,$url=router.urlService,$state=router.stateService;var url={path:$url.path(),search:$url.search(),hash:$url.hash()};var best=this.match(url);var applyResult=hof_1.pattern([[predicates_1.isString,function(newurl){return $url.url(newurl,true)}],[targetState_1.TargetState.isDef,function(def){return $state.go(def.state,def.params,def.options)}],[hof_1.is(targetState_1.TargetState),function(target){return $state.go(target.state(),target.params(),target.options())}]]);applyResult(best&&best.rule.handler(best.match,url,router))};UrlRouter.prototype.listen=function(enabled){var _this=this;if(enabled===false){this._stopFn&&this._stopFn();delete this._stopFn}else{return this._stopFn=this._stopFn||this._router.urlService.onChange(function(evt){return _this.sync(evt)})}};UrlRouter.prototype.update=function(read){var $url=this._router.locationService;if(read){this.location=$url.path();return}if($url.path()===this.location)return;$url.url(this.location,true)};UrlRouter.prototype.push=function(urlMatcher,params,options){var replace=options&&!!options.replace;this._router.urlService.url(urlMatcher.format(params||{}),replace)};UrlRouter.prototype.href=function(urlMatcher,params,options){var url=urlMatcher.format(params);if(url==null)return null;options=options||{absolute:false};var cfg=this._router.urlService.config;var isHtml5=cfg.html5Mode();if(!isHtml5&&url!==null){url="#"+cfg.hashPrefix()+url}url=appendBasePath(url,isHtml5,options.absolute,cfg.baseHref());if(!options.absolute||!url){return url}var slash=!isHtml5&&url?"/":"",port=cfg.port();port=port===80||port===443?"":":"+port;return[cfg.protocol(),"://",cfg.host(),port,slash,url].join("")};UrlRouter.prototype.rule=function(rule){var _this=this;if(!urlRule_1.UrlRuleFactory.isUrlRule(rule))throw new Error("invalid rule");rule.$id=this._id++;rule.priority=rule.priority||0;this._rules.push(rule);this._sorted=false;return function(){return _this.removeRule(rule)}};UrlRouter.prototype.removeRule=function(rule){common_1.removeFrom(this._rules,rule)};UrlRouter.prototype.rules=function(){this.ensureSorted();return this._rules.slice()};UrlRouter.prototype.otherwise=function(handler){var handlerFn=getHandlerFn(handler);this._otherwiseFn=this.urlRuleFactory.create(hof_1.val(true),handlerFn);this._sorted=false};UrlRouter.prototype.initial=function(handler){var handlerFn=getHandlerFn(handler);var matchFn=function(urlParts,router){return router.globals.transitionHistory.size()===0&&!!/^\/?$/.exec(urlParts.path)};this.rule(this.urlRuleFactory.create(matchFn,handlerFn))};UrlRouter.prototype.when=function(matcher,handler,options){var rule=this.urlRuleFactory.create(matcher,handler);if(predicates_1.isDefined(options&&options.priority))rule.priority=options.priority;this.rule(rule);return rule};UrlRouter.prototype.deferIntercept=function(defer){if(defer===undefined)defer=true;this.interceptDeferred=defer};return UrlRouter}();exports.UrlRouter=UrlRouter;function getHandlerFn(handler){if(!predicates_1.isFunction(handler)&&!predicates_1.isString(handler)&&!hof_1.is(targetState_1.TargetState)(handler)&&!targetState_1.TargetState.isDef(handler)){throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property")}return predicates_1.isFunction(handler)?handler:hof_1.val(handler)}},{"../common/common":5,"../common/hof":8,"../common/predicates":10,"../state/targetState":47,"./urlMatcher":58,"./urlRule":61}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var urlMatcher_1=require("./urlMatcher");var predicates_1=require("../common/predicates");var common_1=require("../common/common");var hof_1=require("../common/hof");var UrlRuleFactory=function(){function UrlRuleFactory(router){this.router=router}UrlRuleFactory.prototype.compile=function(str){return this.router.urlMatcherFactory.compile(str)};UrlRuleFactory.prototype.create=function(what,handler){var _this=this;var makeRule=hof_1.pattern([[predicates_1.isString,function(_what){return makeRule(_this.compile(_what))}],[hof_1.is(urlMatcher_1.UrlMatcher),function(_what){return _this.fromUrlMatcher(_what,handler)}],[predicates_1.isState,function(_what){return _this.fromState(_what,_this.router)}],[hof_1.is(RegExp),function(_what){return _this.fromRegExp(_what,handler)}],[predicates_1.isFunction,function(_what){return new BaseUrlRule(_what,handler)}]]);var rule=makeRule(what);if(!rule)throw new Error("invalid 'what' in when()");return rule};UrlRuleFactory.prototype.fromUrlMatcher=function(urlMatcher,handler){var _handler=handler;if(predicates_1.isString(handler))handler=this.router.urlMatcherFactory.compile(handler);if(hof_1.is(urlMatcher_1.UrlMatcher)(handler))_handler=function(match){return handler.format(match)};function match(url){var match=urlMatcher.exec(url.path,url.search,url.hash);return urlMatcher.validates(match)&&match}function matchPriority(params){var optional=urlMatcher.parameters().filter(function(param){return param.isOptional});if(!optional.length)return 1e-6;var matched=optional.filter(function(param){return params[param.id]});return matched.length/optional.length}var details={urlMatcher:urlMatcher,matchPriority:matchPriority,type:"URLMATCHER"};return common_1.extend(new BaseUrlRule(match,_handler),details)};UrlRuleFactory.prototype.fromState=function(state,router){var handler=function(match){var $state=router.stateService;var globals=router.globals;if($state.href(state,match)!==$state.href(globals.current,globals.params)){$state.transitionTo(state,match,{inherit:true,source:"url"})}};var details={state:state,type:"STATE"};return common_1.extend(this.fromUrlMatcher(state.url,handler),details)};UrlRuleFactory.prototype.fromRegExp=function(regexp,handler){if(regexp.global||regexp.sticky)throw new Error("Rule RegExp must not be global or sticky");var redirectUrlTo=function(match){return handler.replace(/\$(\$|\d{1,2})/,function(m,what){return match[what==="$"?0:Number(what)]})};var _handler=predicates_1.isString(handler)?redirectUrlTo:handler;var match=function(url){return regexp.exec(url.path)};var details={regexp:regexp,type:"REGEXP"};return common_1.extend(new BaseUrlRule(match,_handler),details)};return UrlRuleFactory}();UrlRuleFactory.isUrlRule=function(obj){return obj&&["type","match","handler"].every(function(key){return predicates_1.isDefined(obj[key])})};exports.UrlRuleFactory=UrlRuleFactory;var BaseUrlRule=function(){function BaseUrlRule(match,handler){var _this=this;this.match=match;this.type="RAW";this.matchPriority=function(match){return 0-_this.$id};this.handler=handler||common_1.identity}return BaseUrlRule}();exports.BaseUrlRule=BaseUrlRule},{"../common/common":5,"../common/hof":8,"../common/predicates":10,"./urlMatcher":58}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var coreservices_1=require("../common/coreservices");var common_1=require("../common/common");var makeStub=function(keys){return keys.reduce(function(acc,key){return acc[key]=coreservices_1.notImplemented(key),acc},{dispose:common_1.noop})};var locationServicesFns=["url","path","search","hash","onChange"];var locationConfigFns=["port","protocol","host","baseHref","html5Mode","hashPrefix"];var umfFns=["type","caseInsensitive","strictMode","defaultSquashPolicy"];var rulesFns=["sort","when","initial","otherwise","rules","rule","removeRule"];var syncFns=["deferIntercept","listen","sync","match"];var UrlService=function(){function UrlService(router,lateBind){if(lateBind===void 0){lateBind=true}this.router=router;this.rules={};this.config={};var locationServices=function(){return router.locationService};common_1.createProxyFunctions(locationServices,this,locationServices,locationServicesFns,lateBind);var locationConfig=function(){return router.locationConfig};common_1.createProxyFunctions(locationConfig,this.config,locationConfig,locationConfigFns,lateBind);var umf=function(){return router.urlMatcherFactory};common_1.createProxyFunctions(umf,this.config,umf,umfFns);var urlRouter=function(){return router.urlRouter};common_1.createProxyFunctions(urlRouter,this.rules,urlRouter,rulesFns);common_1.createProxyFunctions(urlRouter,this,urlRouter,syncFns)}UrlService.prototype.url=function(newurl,replace,state){return};UrlService.prototype.path=function(){return};UrlService.prototype.search=function(){return};UrlService.prototype.hash=function(){return};UrlService.prototype.onChange=function(callback){return};UrlService.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}};UrlService.prototype.dispose=function(){};UrlService.prototype.sync=function(evt){return};UrlService.prototype.listen=function(enabled){return};UrlService.prototype.deferIntercept=function(defer){return};UrlService.prototype.match=function(urlParts){return};return UrlService}();UrlService.locationServiceStub=makeStub(locationServicesFns);UrlService.locationConfigStub=makeStub(locationConfigFns);exports.UrlService=UrlService},{"../common/common":5,"../common/coreservices":6}],63:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./vanilla/index"))},{"./vanilla/index":67}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var utils_1=require("./utils");var predicates_1=require("../common/predicates");var common_1=require("../common/common");var BaseLocationServices=function(){function BaseLocationServices(router,fireAfterUpdate){var _this=this;this.fireAfterUpdate=fireAfterUpdate;this._listener=function(evt){return _this._listeners.forEach(function(cb){return cb(evt)})};this._listeners=[];this.hash=function(){return utils_1.parseUrl(_this._get()).hash};this.path=function(){return utils_1.parseUrl(_this._get()).path};this.search=function(){return utils_1.getParams(utils_1.parseUrl(_this._get()).search)};this._location=window&&window.location;this._history=window&&window.history}BaseLocationServices.prototype.url=function(url,replace){if(replace===void 0){replace=true}if(predicates_1.isDefined(url)&&url!==this._get()){this._set(null,null,url,replace);if(this.fireAfterUpdate){var evt_1=common_1.extend(new Event("locationchange"),{url:url});this._listeners.forEach(function(cb){return cb(evt_1)})}}return utils_1.buildUrl(this)};BaseLocationServices.prototype.onChange=function(cb){var _this=this;this._listeners.push(cb);return function(){return common_1.removeFrom(_this._listeners,cb)}};BaseLocationServices.prototype.dispose=function(router){common_1.deregAll(this._listeners)};return BaseLocationServices}();exports.BaseLocationServices=BaseLocationServices},{"../common/common":5,"../common/predicates":10,"./utils":74}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=require("../common/predicates");var BrowserLocationConfig=function(){function BrowserLocationConfig(router,_isHtml5){if(_isHtml5===void 0){_isHtml5=false}this._isHtml5=_isHtml5;this._baseHref=undefined;this._hashPrefix=""}BrowserLocationConfig.prototype.port=function(){if(location.port){return Number(location.port)}return this.protocol()==="https"?443:80};BrowserLocationConfig.prototype.protocol=function(){return location.protocol.replace(/:/g,"")};BrowserLocationConfig.prototype.host=function(){return location.host};BrowserLocationConfig.prototype.html5Mode=function(){return this._isHtml5};BrowserLocationConfig.prototype.hashPrefix=function(newprefix){return predicates_1.isDefined(newprefix)?this._hashPrefix=newprefix:this._hashPrefix};BrowserLocationConfig.prototype.baseHref=function(href){return predicates_1.isDefined(href)?this._baseHref=href:this._baseHref||this.applyDocumentBaseHref()};BrowserLocationConfig.prototype.applyDocumentBaseHref=function(){var baseTags=document.getElementsByTagName("base");return this._baseHref=baseTags.length?baseTags[0].href.substr(location.origin.length):""};BrowserLocationConfig.prototype.dispose=function(){};return BrowserLocationConfig}();exports.BrowserLocationConfig=BrowserLocationConfig},{"../common/predicates":10}],66:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var utils_1=require("./utils");var baseLocationService_1=require("./baseLocationService");var HashLocationService=function(_super){__extends(HashLocationService,_super);function HashLocationService(router){var _this=_super.call(this,router,false)||this;window.addEventListener("hashchange",_this._listener,false);return _this}HashLocationService.prototype._get=function(){return utils_1.trimHashVal(this._location.hash)};HashLocationService.prototype._set=function(state,title,url,replace){this._location.hash=url};HashLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router);window.removeEventListener("hashchange",this._listener)};return HashLocationService}(baseLocationService_1.BaseLocationServices);exports.HashLocationService=HashLocationService},{"./baseLocationService":64,"./utils":74}],67:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./q"));__export(require("./injector"));__export(require("./baseLocationService"));__export(require("./hashLocationService"));__export(require("./memoryLocationService"));__export(require("./pushStateLocationService"));__export(require("./memoryLocationConfig"));__export(require("./browserLocationConfig"));__export(require("./utils"));__export(require("./plugins"))},{"./baseLocationService":64,"./browserLocationConfig":65,"./hashLocationService":66,"./injector":68,"./memoryLocationConfig":69,"./memoryLocationService":70,"./plugins":71,"./pushStateLocationService":72,"./q":73,"./utils":74}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var index_1=require("../common/index");var globals={};var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var ARGUMENT_NAMES=/([^\s,]+)/g;exports.$injector={get:function(name){return globals[name]},has:function(name){return exports.$injector.get(name)!=null},invoke:function(fn,context,locals){var all=index_1.extend({},globals,locals||{});var params=exports.$injector.annotate(fn);var ensureExist=index_1.assertPredicate(function(key){return all.hasOwnProperty(key)},function(key){return"DI can't find injectable: '"+key+"'"});var args=params.filter(ensureExist).map(function(x){return all[x]});if(index_1.isFunction(fn))return fn.apply(context,args);else return fn.slice(-1)[0].apply(context,args)},annotate:function(fn){if(!index_1.isInjectable(fn))throw new Error("Not an injectable function: "+fn);if(fn&&fn.$inject)return fn.$inject;if(index_1.isArray(fn))return fn.slice(0,-1);var fnStr=fn.toString().replace(STRIP_COMMENTS,"");var result=fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(ARGUMENT_NAMES);return result||[]}}},{"../common/index":9}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var predicates_1=require("../common/predicates");var common_1=require("../common/common");var MemoryLocationConfig=function(){function MemoryLocationConfig(){var _this=this;this._baseHref="";this._port=80;this._protocol="http";this._host="localhost";this._hashPrefix="";this.port=function(){return _this._port};this.protocol=function(){return _this._protocol};this.host=function(){return _this._host};this.baseHref=function(){return _this._baseHref};this.html5Mode=function(){return false};this.hashPrefix=function(newval){return predicates_1.isDefined(newval)?_this._hashPrefix=newval:_this._hashPrefix};this.dispose=common_1.noop}return MemoryLocationConfig}();exports.MemoryLocationConfig=MemoryLocationConfig},{"../common/common":5,"../common/predicates":10}],70:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var baseLocationService_1=require("./baseLocationService");var MemoryLocationService=function(_super){__extends(MemoryLocationService,_super);function MemoryLocationService(router){return _super.call(this,router,true)||this}MemoryLocationService.prototype._get=function(){return this._url};MemoryLocationService.prototype._set=function(state,title,url,replace){this._url=url};return MemoryLocationService}(baseLocationService_1.BaseLocationServices);exports.MemoryLocationService=MemoryLocationService},{"./baseLocationService":64}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var browserLocationConfig_1=require("./browserLocationConfig");var hashLocationService_1=require("./hashLocationService");var utils_1=require("./utils");var pushStateLocationService_1=require("./pushStateLocationService");var memoryLocationService_1=require("./memoryLocationService");var memoryLocationConfig_1=require("./memoryLocationConfig");var injector_1=require("./injector");var q_1=require("./q");var coreservices_1=require("../common/coreservices");function servicesPlugin(router){coreservices_1.services.$injector=injector_1.$injector;coreservices_1.services.$q=q_1.$q;return{name:"vanilla.services",$q:q_1.$q,$injector:injector_1.$injector,dispose:function(){return null}}}exports.servicesPlugin=servicesPlugin;exports.hashLocationPlugin=utils_1.locationPluginFactory("vanilla.hashBangLocation",false,hashLocationService_1.HashLocationService,browserLocationConfig_1.BrowserLocationConfig);exports.pushStateLocationPlugin=utils_1.locationPluginFactory("vanilla.pushStateLocation",true,pushStateLocationService_1.PushStateLocationService,browserLocationConfig_1.BrowserLocationConfig);exports.memoryLocationPlugin=utils_1.locationPluginFactory("vanilla.memoryLocation",false,memoryLocationService_1.MemoryLocationService,memoryLocationConfig_1.MemoryLocationConfig)},{"../common/coreservices":6,"./browserLocationConfig":65,"./hashLocationService":66,"./injector":68,"./memoryLocationConfig":69,"./memoryLocationService":70,"./pushStateLocationService":72,"./q":73,"./utils":74}],72:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:true});var utils_1=require("./utils");var baseLocationService_1=require("./baseLocationService");var PushStateLocationService=function(_super){__extends(PushStateLocationService,_super);function PushStateLocationService(router){var _this=_super.call(this,router,true)||this;_this._config=router.urlService.config;window.addEventListener("popstate",_this._listener,false);return _this}PushStateLocationService.prototype._get=function(){var _a=this._location,pathname=_a.pathname,hash=_a.hash,search=_a.search;search=utils_1.splitQuery(search)[1];hash=utils_1.splitHash(hash)[1];return pathname+(search?"?"+search:"")+(hash?"$"+search:"")};PushStateLocationService.prototype._set=function(state,title,url,replace){var _a=this,_config=_a._config,_history=_a._history;var fullUrl=_config.baseHref()+url;if(replace){_history.replaceState(state,title,fullUrl)}else{_history.pushState(state,title,fullUrl)}};PushStateLocationService.prototype.dispose=function(router){_super.prototype.dispose.call(this,router);window.removeEventListener("popstate",this._listener)};return PushStateLocationService}(baseLocationService_1.BaseLocationServices);exports.PushStateLocationService=PushStateLocationService},{"./baseLocationService":64,"./utils":74}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var index_1=require("../common/index");exports.$q={when:function(val){return new Promise(function(resolve,reject){return resolve(val)})},reject:function(val){return new Promise(function(resolve,reject){reject(val)})},defer:function(){var deferred={};deferred.promise=new Promise(function(resolve,reject){deferred.resolve=resolve;deferred.reject=reject});return deferred},all:function(promises){if(index_1.isArray(promises)){return Promise.all(promises)}if(index_1.isObject(promises)){var chain=Object.keys(promises).map(function(key){return promises[key].then(function(val){return{key:key,val:val}})});return exports.$q.all(chain).then(function(values){return values.reduce(function(acc,tuple){acc[tuple.key]=tuple.val;return acc},{})})}}}},{"../common/index":9}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var index_1=require("../common/index");var common_1=require("../common/common");var beforeAfterSubstr=function(char){return function(str){if(!str)return["",""];var idx=str.indexOf(char);if(idx===-1)return[str,""];return[str.substr(0,idx),str.substr(idx+1)]}};exports.splitHash=beforeAfterSubstr("#");exports.splitQuery=beforeAfterSubstr("?");exports.splitEqual=beforeAfterSubstr("=");exports.trimHashVal=function(str){return str?str.replace(/^#/,""):""};exports.keyValsToObjectR=function(accum,_a){var key=_a[0],val=_a[1];if(!accum.hasOwnProperty(key)){accum[key]=val}else if(index_1.isArray(accum[key])){accum[key].push(val)}else{accum[key]=[accum[key],val]}return accum};exports.getParams=function(queryString){return queryString.split("&").filter(common_1.identity).map(exports.splitEqual).reduce(exports.keyValsToObjectR,{})};function parseUrl(url){var orEmptyString=function(x){return x||""};var _a=exports.splitHash(url).map(orEmptyString),beforehash=_a[0],hash=_a[1];var _b=exports.splitQuery(beforehash).map(orEmptyString),path=_b[0],search=_b[1];return{path:path,search:search,hash:hash,url:url}}exports.parseUrl=parseUrl;exports.buildUrl=function(loc){var path=loc.path();var searchObject=loc.search();var hash=loc.hash();var search=Object.keys(searchObject).map(function(key){var param=searchObject[key];var vals=index_1.isArray(param)?param:[param];return vals.map(function(val){return key+"="+val})}).reduce(common_1.unnestR,[]).join("&");return path+(search?"?"+search:"")+(hash?"#"+hash:"")};function locationPluginFactory(name,isHtml5,serviceClass,configurationClass){return function(router){var service=router.locationService=new serviceClass(router);var configuration=router.locationConfig=new configurationClass(router,isHtml5);function dispose(router){router.dispose(service);router.dispose(configuration)}return{name:name,service:service,configuration:configuration,dispose:dispose}}}exports.locationPluginFactory=locationPluginFactory},{"../common/common":5,"../common/index":9}],75:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./view"))},{"./view":76}],76:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var common_1=require("../common/common");var hof_1=require("../common/hof");var predicates_1=require("../common/predicates");var trace_1=require("../common/trace");var ViewService=function(){function ViewService(){var _this=this;this._uiViews=[];this._viewConfigs=[];this._viewConfigFactories={};this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return _this._uiViews},_activeViewConfigs:function(){return _this._viewConfigs}}}ViewService.prototype._rootViewContext=function(context){return this._rootContext=context||this._rootContext};ViewService.prototype._viewConfigFactory=function(viewType,factory){this._viewConfigFactories[viewType]=factory};ViewService.prototype.createViewConfig=function(path,decl){var cfgFactory=this._viewConfigFactories[decl.$type];if(!cfgFactory)throw new Error("ViewService: No view config factory registered for type "+decl.$type);var cfgs=cfgFactory(path,decl);return predicates_1.isArray(cfgs)?cfgs:[cfgs]};ViewService.prototype.deactivateViewConfig=function(viewConfig){trace_1.trace.traceViewServiceEvent("<- Removing",viewConfig);common_1.removeFrom(this._viewConfigs,viewConfig)};ViewService.prototype.activateViewConfig=function(viewConfig){trace_1.trace.traceViewServiceEvent("-> Registering",viewConfig);this._viewConfigs.push(viewConfig)};ViewService.prototype.sync=function(){var _this=this;var uiViewsByFqn=this._uiViews.map(function(uiv){return[uiv.fqn,uiv]}).reduce(common_1.applyPairs,{});function uiViewDepth(uiView){var stateDepth=function(context){return context&&context.parent?stateDepth(context.parent)+1:1};return uiView.fqn.split(".").length*1e4+stateDepth(uiView.creationContext)}function viewConfigDepth(config){var context=config.viewDecl.$context,count=0;while(++count&&context.parent)context=context.parent;return count}var depthCompare=hof_1.curry(function(depthFn,posNeg,left,right){return posNeg*(depthFn(left)-depthFn(right))});var matchingConfigPair=function(uiView){var matchingConfigs=_this._viewConfigs.filter(ViewService.matches(uiViewsByFqn,uiView));if(matchingConfigs.length>1){matchingConfigs.sort(depthCompare(viewConfigDepth,-1))}return[uiView,matchingConfigs[0]]};var configureUIView=function(_a){var uiView=_a[0],viewConfig=_a[1];if(_this._uiViews.indexOf(uiView)!==-1)uiView.configUpdated(viewConfig)};this._uiViews.sort(depthCompare(uiViewDepth,1)).map(matchingConfigPair).forEach(configureUIView)};ViewService.prototype.registerUIView=function(uiView){trace_1.trace.traceViewServiceUIViewEvent("-> Registering",uiView);var uiViews=this._uiViews;var fqnMatches=function(uiv){return uiv.fqn===uiView.fqn};if(uiViews.filter(fqnMatches).length)trace_1.trace.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",uiView);uiViews.push(uiView);this.sync();return function(){var idx=uiViews.indexOf(uiView);if(idx===-1){trace_1.trace.traceViewServiceUIViewEvent("Tried removing non-registered uiView",uiView);return}trace_1.trace.traceViewServiceUIViewEvent("<- Deregistering",uiView);common_1.removeFrom(uiViews)(uiView)}};ViewService.prototype.available=function(){return this._uiViews.map(hof_1.prop("fqn"))};ViewService.prototype.active=function(){return this._uiViews.filter(hof_1.prop("$config")).map(hof_1.prop("name"))};ViewService.normalizeUIViewTarget=function(context,rawViewName){if(rawViewName===void 0){rawViewName=""}var viewAtContext=rawViewName.split("@");var uiViewName=viewAtContext[0]||"$default";var uiViewContextAnchor=predicates_1.isString(viewAtContext[1])?viewAtContext[1]:"^";var relativeViewNameSugar=/^(\^(?:\.\^)*)\.(.*$)/.exec(uiViewName);if(relativeViewNameSugar){uiViewContextAnchor=relativeViewNameSugar[1];uiViewName=relativeViewNameSugar[2]}if(uiViewName.charAt(0)==="!"){uiViewName=uiViewName.substr(1);uiViewContextAnchor=""}var relativeMatch=/^(\^(?:\.\^)*)$/;if(relativeMatch.exec(uiViewContextAnchor)){var anchor=uiViewContextAnchor.split(".").reduce(function(anchor,x){return anchor.parent},context);uiViewContextAnchor=anchor.name}else if(uiViewContextAnchor==="."){uiViewContextAnchor=context.name}return{uiViewName:uiViewName,uiViewContextAnchor:uiViewContextAnchor}};return ViewService}();ViewService.matches=function(uiViewsByFqn,uiView){return function(viewConfig){if(uiView.$type!==viewConfig.viewDecl.$type)return false;var vc=viewConfig.viewDecl;var vcSegments=vc.$uiViewName.split(".");var uivSegments=uiView.fqn.split(".");if(!common_1.equals(vcSegments,uivSegments.slice(0-vcSegments.length)))return false;var negOffset=1-vcSegments.length||undefined;var fqnToFirstSegment=uivSegments.slice(0,negOffset).join(".");var uiViewContext=uiViewsByFqn[fqnToFirstSegment].creationContext;return vc.$uiViewContextAnchor===(uiViewContext&&uiViewContext.name)}};exports.ViewService=ViewService},{"../common/common":5,"../common/hof":8,"../common/predicates":10,"../common/trace":13}],77:[function(require,module,exports){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]);angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]);angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function($animate,$q,$parse,$injector){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function(scope,element,attrs){var expandingExpr=$parse(attrs.expanding),expandedExpr=$parse(attrs.expanded),collapsingExpr=$parse(attrs.collapsing),collapsedExpr=$parse(attrs.collapsed),horizontal=false,css={},cssTo={};init();function init(){horizontal=!!("horizontal"in attrs);if(horizontal){css={width:""};cssTo={width:"0"}}else{css={height:""};cssTo={height:"0"}}if(!scope.$eval(attrs.uibCollapse)){element.addClass("in").addClass("collapse").attr("aria-expanded",true).attr("aria-hidden",false).css(css)}}function getScrollFromElement(element){if(horizontal){return{width:element.scrollWidth+"px"}}return{height:element.scrollHeight+"px"}}function expand(){if(element.hasClass("collapse")&&element.hasClass("in")){return}$q.resolve(expandingExpr(scope)).then(function(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",true).attr("aria-hidden",false);if($animateCss){$animateCss(element,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).start()["finally"](expandDone)}else{$animate.addClass(element,"in",{css:{overflow:"hidden"},to:getScrollFromElement(element[0])}).then(expandDone)}},angular.noop)}function expandDone(){element.removeClass("collapsing").addClass("collapse").css(css);expandedExpr(scope)}function collapse(){if(!element.hasClass("collapse")&&!element.hasClass("in")){return collapseDone()}$q.resolve(collapsingExpr(scope)).then(function(){element.css(getScrollFromElement(element[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",false).attr("aria-hidden",true);if($animateCss){$animateCss(element,{removeClass:"in",to:cssTo}).start()["finally"](collapseDone)}else{$animate.removeClass(element,"in",{to:cssTo}).then(collapseDone)}},angular.noop)}function collapseDone(){element.css(cssTo);element.removeClass("collapsing").addClass("collapse");collapsedExpr(scope)}scope.$watch(attrs.uibCollapse,function(shouldCollapse){if(shouldCollapse){collapse()}else{expand()}})}}}]);angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(scope,elem,attrs){attrs.$observe("disabled",function(disabled){attrs.$set("tabindex",disabled?-1:null)})}}});angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:true}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function($scope,$attrs,accordionConfig){this.groups=[];this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;if(closeOthers){angular.forEach(this.groups,function(group){if(group!==openGroup){group.isOpen=false}})}};this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope);groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})};this.removeGroup=function(group){var index=this.groups.indexOf(group);if(index!==-1){this.groups.splice(index,1)}}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:true,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:true,restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){element.addClass("panel");accordionCtrl.addGroup(scope);scope.openClass=attrs.openClass||"panel-open";scope.panelClass=attrs.panelClass||"panel-default";scope.$watch("isOpen",function(value){element.toggleClass(scope.openClass,!!value);if(value){accordionCtrl.closeOthers(scope)}});scope.toggleOpen=function($event){if(!scope.isDisabled){if(!$event||$event.which===32){scope.isOpen=!scope.isOpen}}};var id="accordiongroup-"+scope.$id+"-"+Math.floor(Math.random()*1e4);scope.headingId=id+"-tab";scope.panelId=id+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:true,template:"",replace:true,require:"^uibAccordionGroup",link:function(scope,element,attrs,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(scope,element,attrs,controller){scope.$watch(function(){return controller[attrs.uibAccordionTransclude]},function(heading){if(heading){var elem=angular.element(element[0].querySelector(getHeaderSelectors()));elem.html("");elem.append(heading)}})}};function getHeaderSelectors(){return"uib-accordion-header,"+"data-uib-accordion-header,"+"x-uib-accordion-header,"+"uib\\:accordion-header,"+"[uib-accordion-header],"+"[data-uib-accordion-header],"+"[x-uib-accordion-header]"}});angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function($scope,$element,$attrs,$interpolate,$timeout){$scope.closeable=!!$attrs.close;$element.addClass("alert");$attrs.$set("role","alert");if($scope.closeable){$element.addClass("alert-dismissible")}var dismissOnTimeout=angular.isDefined($attrs.dismissOnTimeout)?$interpolate($attrs.dismissOnTimeout)($scope.$parent):null;if(dismissOnTimeout){$timeout(function(){$scope.close()},parseInt(dismissOnTimeout,10))}}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/alert/alert.html"},transclude:true,scope:{close:"&"}}});angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active";this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function($parse){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];var uncheckableExpr=$parse(attrs.uibUncheckable);element.find("input").css({display:"none"});ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.uibBtnRadio)))};element.on(buttonsCtrl.toggleEvent,function(){if(attrs.disabled){return}var isActive=element.hasClass(buttonsCtrl.activeClass);if(!isActive||angular.isDefined(attrs.uncheckable)){scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.uibBtnRadio));ngModelCtrl.$render()})}});if(attrs.uibUncheckable){scope.$watch(uncheckableExpr,function(uncheckable){attrs.$set("uncheckable",uncheckable?"":undefined)})}}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"});function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,true)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,false)}function getCheckboxValue(attribute,defaultValue){return angular.isDefined(attribute)?scope.$eval(attribute):defaultValue}ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))};element.on(buttonsCtrl.toggleEvent,function(){if(attrs.disabled){return}scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue());ngModelCtrl.$render()})})}}});angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function($scope,$element,$interval,$timeout,$animate){var self=this,slides=self.slides=$scope.slides=[],SLIDE_DIRECTION="uib-slideDirection",currentIndex=$scope.active,currentInterval,isPlaying;var destroyed=false;$element.addClass("carousel");self.addSlide=function(slide,element){slides.push({slide:slide,element:element});slides.sort(function(a,b){return+a.slide.index-+b.slide.index});if(slide.index===$scope.active||slides.length===1&&!angular.isNumber($scope.active)){if($scope.$currentTransition){$scope.$currentTransition=null}currentIndex=slide.index;$scope.active=slide.index;setActive(currentIndex);self.select(slides[findSlideIndex(slide)]);if(slides.length===1){$scope.play()}}};self.getCurrentIndex=function(){for(var i=0;i<slides.length;i++){if(slides[i].slide.index===currentIndex){return i}}};self.next=$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;if(newIndex===0&&$scope.noWrap()){$scope.pause();return}return self.select(slides[newIndex],"next")};self.prev=$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;if($scope.noWrap()&&newIndex===slides.length-1){$scope.pause();return}return self.select(slides[newIndex],"prev")};self.removeSlide=function(slide){var index=findSlideIndex(slide);slides.splice(index,1);if(slides.length>0&&currentIndex===index){if(index>=slides.length){currentIndex=slides.length-1;$scope.active=currentIndex;setActive(currentIndex);self.select(slides[slides.length-1])}else{currentIndex=index;$scope.active=currentIndex;setActive(currentIndex);self.select(slides[index])}}else if(currentIndex>index){currentIndex--;$scope.active=currentIndex}if(slides.length===0){currentIndex=null;$scope.active=null}};self.select=$scope.select=function(nextSlide,direction){var nextIndex=findSlideIndex(nextSlide.slide);if(direction===undefined){direction=nextIndex>self.getCurrentIndex()?"next":"prev"}if(nextSlide.slide.index!==currentIndex&&!$scope.$currentTransition){goNext(nextSlide.slide,nextIndex,direction)}};$scope.indexOfSlide=function(slide){return+slide.slide.index};$scope.isActive=function(slide){return $scope.active===slide.slide.index};$scope.isPrevDisabled=function(){return $scope.active===0&&$scope.noWrap()};$scope.isNextDisabled=function(){return $scope.active===slides.length-1&&$scope.noWrap()};$scope.pause=function(){if(!$scope.noPause){isPlaying=false;resetTimer()}};$scope.play=function(){if(!isPlaying){isPlaying=true;restartTimer()}};$element.on("mouseenter",$scope.pause);$element.on("mouseleave",$scope.play);$scope.$on("$destroy",function(){destroyed=true;resetTimer()});$scope.$watch("noTransition",function(noTransition){$animate.enabled($element,!noTransition)});$scope.$watch("interval",restartTimer);$scope.$watchCollection("slides",resetTransition);$scope.$watch("active",function(index){if(angular.isNumber(index)&&currentIndex!==index){for(var i=0;i<slides.length;i++){if(slides[i].slide.index===index){index=i;break}}var slide=slides[index];if(slide){setActive(index);self.select(slides[index]);currentIndex=index}}});function getSlideByIndex(index){for(var i=0,l=slides.length;i<l;++i){if(slides[i].index===index){return slides[i]}}}function setActive(index){for(var i=0;i<slides.length;i++){slides[i].slide.active=i===index}}function goNext(slide,index,direction){if(destroyed){return}angular.extend(slide,{direction:direction});angular.extend(slides[currentIndex].slide||{},{direction:direction});if($animate.enabled($element)&&!$scope.$currentTransition&&slides[index].element&&self.slides.length>1){slides[index].element.data(SLIDE_DIRECTION,slide.direction);var currentIdx=self.getCurrentIndex();if(angular.isNumber(currentIdx)&&slides[currentIdx].element){slides[currentIdx].element.data(SLIDE_DIRECTION,slide.direction)}$scope.$currentTransition=true;$animate.on("addClass",slides[index].element,function(element,phase){if(phase==="close"){$scope.$currentTransition=null;$animate.off("addClass",element)}})}$scope.active=slide.index;currentIndex=slide.index;setActive(index);restartTimer()}function findSlideIndex(slide){for(var i=0;i<slides.length;i++){if(slides[i].slide===slide){return i}}}function resetTimer(){if(currentInterval){$interval.cancel(currentInterval);currentInterval=null}}function resetTransition(slides){if(!slides.length){$scope.$currentTransition=null}}function restartTimer(){resetTimer();var interval=+$scope.interval;if(!isNaN(interval)&&interval>0){currentInterval=$interval(timerFn,interval)}}function timerFn(){var interval=+$scope.interval;if(isPlaying&&!isNaN(interval)&&interval>0&&slides.length){$scope.next()}else{$scope.pause()}}}]).directive("uibCarousel",function(){return{transclude:true,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function($animate){return{require:"^uibCarousel",restrict:"A",transclude:true,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){element.addClass("item");carouselCtrl.addSlide(scope,element);scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)});scope.$watch("active",function(active){$animate[active?"addClass":"removeClass"](element,"active")})}}}]).animation(".item",["$animateCss",function($animateCss){var SLIDE_DIRECTION="uib-slideDirection";function removeClass(element,className,callback){element.removeClass(className);if(callback){callback()}}return{beforeAddClass:function(element,className,done){if(className==="active"){var stopped=false;var direction=element.data(SLIDE_DIRECTION);var directionClass=direction==="next"?"left":"right";var removeClassFn=removeClass.bind(this,element,directionClass+" "+direction,done);element.addClass(direction);$animateCss(element,{addClass:directionClass}).start().done(removeClassFn);return function(){stopped=true}}done()},beforeRemoveClass:function(element,className,done){if(className==="active"){var stopped=false;var direction=element.data(SLIDE_DIRECTION);var directionClass=direction==="next"?"left":"right";var removeClassFn=removeClass.bind(this,element,directionClass,done);$animateCss(element,{addClass:directionClass}).start().done(removeClassFn);return function(){stopped=true}}done()}}}]);angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function($log,$locale,dateFilter,orderByFilter,filterFilter){var SPECIAL_CHARACTERS_REGEXP=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var localeId;var formatCodeToRegex;this.init=function(){localeId=$locale.id;this.parsers={};this.formatters={};formatCodeToRegex=[{key:"yyyy",regex:"\\d{4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;_date.setFullYear(Math.abs(date.getFullYear()));return dateFilter(_date,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(value){value=+value;this.year=value<69?value+2e3:value+1900},formatter:function(date){var _date=new Date;_date.setFullYear(Math.abs(date.getFullYear()));return dateFilter(_date,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(value){this.year=+value},formatter:function(date){var _date=new Date;_date.setFullYear(Math.abs(date.getFullYear()));return dateFilter(_date,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){var value=date.getMonth();if(/^[0-9]$/.test(value)){return dateFilter(date,"MM")}return dateFilter(date,"M")}},{key:"MMMM",regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMMM")}},{key:"MMM",regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1},formatter:function(date){return dateFilter(date,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){var value=date.getDate();if(/^[1-9]$/.test(value)){return dateFilter(date,"dd")}return dateFilter(date,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value},formatter:function(date){return dateFilter(date,"d")}},{key:"EEEE",regex:$locale.DATETIME_FORMATS.DAY.join("|"),formatter:function(date){return dateFilter(date,"EEEE")}},{key:"EEE",regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(date){return dateFilter(date,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(value){this.hours=+value},formatter:function(date){return dateFilter(date,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.minutes=+value},formatter:function(date){return dateFilter(date,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(value){this.milliseconds=+value},formatter:function(date){return dateFilter(date,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(value){this.seconds=+value},formatter:function(date){return dateFilter(date,"s")}},{key:"a",regex:$locale.DATETIME_FORMATS.AMPMS.join("|"),apply:function(value){if(this.hours===12){this.hours=0}if(value==="PM"){this.hours+=12}},formatter:function(date){return dateFilter(date,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(value){var matches=value.match(/([+-])(\d{2})(\d{2})/),sign=matches[1],hours=matches[2],minutes=matches[3];this.hours+=toInt(sign+hours);this.minutes+=toInt(sign+minutes)},formatter:function(date){return dateFilter(date,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(date){return dateFilter(date,"w")}},{key:"GGGG",regex:$locale.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(date){return dateFilter(date,"GGGG")}},{key:"GGG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GGG")}},{key:"GG",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"GG")}},{key:"G",regex:$locale.DATETIME_FORMATS.ERAS.join("|"),formatter:function(date){return dateFilter(date,"G")}}];if(angular.version.major>=1&&angular.version.minor>4){formatCodeToRegex.push({key:"LLLL",regex:$locale.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.STANDALONEMONTH.indexOf(value)},formatter:function(date){return dateFilter(date,"LLLL")}})}};this.init();function getFormatCodeToRegex(key){return filterFilter(formatCodeToRegex,{key:key},true)[0]}this.getParser=function(key){var f=getFormatCodeToRegex(key);return f&&f.apply||null};this.overrideParser=function(key,parser){var f=getFormatCodeToRegex(key);if(f&&angular.isFunction(parser)){this.parsers={};f.apply=parser}}.bind(this);function createParser(format){var map=[],regex=format.split("");var quoteIndex=format.indexOf("'");if(quoteIndex>-1){var inLiteral=false;format=format.split("");for(var i=quoteIndex;i<format.length;i++){if(inLiteral){if(format[i]==="'"){if(i+1<format.length&&format[i+1]==="'"){format[i+1]="$";regex[i+1]=""}else{regex[i]="";inLiteral=false}}format[i]="$"}else{if(format[i]==="'"){format[i]="$";regex[i]="";inLiteral=true}}}format=format.join("")}angular.forEach(formatCodeToRegex,function(data){var index=format.indexOf(data.key);if(index>-1){format=format.split("");regex[index]="("+data.regex+")";format[index]="$";for(var i=index+1,n=index+data.key.length;i<n;i++){regex[i]="";format[i]="$"}format=format.join("");map.push({index:index,key:data.key,apply:data.apply,matcher:data.regex})}});return{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function createFormatter(format){var formatters=[];var i=0;var formatter,literalIdx;while(i<format.length){if(angular.isNumber(literalIdx)){if(format.charAt(i)==="'"){if(i+1>=format.length||format.charAt(i+1)!=="'"){formatters.push(constructLiteralFormatter(format,literalIdx,i));literalIdx=null}}else if(i===format.length){while(literalIdx<format.length){formatter=constructFormatterFromIdx(format,literalIdx);formatters.push(formatter);literalIdx=formatter.endIdx}}i++;continue}if(format.charAt(i)==="'"){literalIdx=i;i++;continue}formatter=constructFormatterFromIdx(format,i);formatters.push(formatter.parser);i=formatter.endIdx}return formatters}function constructLiteralFormatter(format,literalIdx,endIdx){return function(){return format.substr(literalIdx+1,endIdx-literalIdx-1)}}function constructFormatterFromIdx(format,i){var currentPosStr=format.substr(i);for(var j=0;j<formatCodeToRegex.length;j++){if(new RegExp("^"+formatCodeToRegex[j].key).test(currentPosStr)){var data=formatCodeToRegex[j];return{endIdx:i+data.key.length,parser:data.formatter}}}return{endIdx:i+1,parser:function(){return currentPosStr.charAt(0)}}}this.filter=function(date,format){if(!angular.isDate(date)||isNaN(date)||!format){return""}format=$locale.DATETIME_FORMATS[format]||format;if($locale.id!==localeId){this.init()}if(!this.formatters[format]){this.formatters[format]=createFormatter(format)}var formatters=this.formatters[format];return formatters.reduce(function(str,formatter){return str+formatter(date)},"")};this.parse=function(input,format,baseDate){if(!angular.isString(input)||!format){return input}format=$locale.DATETIME_FORMATS[format]||format;format=format.replace(SPECIAL_CHARACTERS_REGEXP,"\\$&");if($locale.id!==localeId){this.init()}if(!this.parsers[format]){this.parsers[format]=createParser(format,"apply")}var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex),tzOffset=false;if(results&&results.length){var fields,dt;if(angular.isDate(baseDate)&&!isNaN(baseDate.getTime())){fields={year:baseDate.getFullYear(),month:baseDate.getMonth(),date:baseDate.getDate(),hours:baseDate.getHours(),minutes:baseDate.getMinutes(),seconds:baseDate.getSeconds(),milliseconds:baseDate.getMilliseconds()}}else{if(baseDate){$log.warn("dateparser:","baseDate is not a valid date")}fields={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0}}for(var i=1,n=results.length;i<n;i++){var mapper=map[i-1];if(mapper.matcher==="Z"){tzOffset=true}if(mapper.apply){mapper.apply.call(fields,results[i])}}var datesetter=tzOffset?Date.prototype.setUTCFullYear:Date.prototype.setFullYear;var timesetter=tzOffset?Date.prototype.setUTCHours:Date.prototype.setHours;if(isValid(fields.year,fields.month,fields.date)){if(angular.isDate(baseDate)&&!isNaN(baseDate.getTime())&&!tzOffset){dt=new Date(baseDate);datesetter.call(dt,fields.year,fields.month,fields.date);timesetter.call(dt,fields.hours,fields.minutes,fields.seconds,fields.milliseconds)}else{dt=new Date(0);datesetter.call(dt,fields.year,fields.month,fields.date);timesetter.call(dt,fields.hours||0,fields.minutes||0,fields.seconds||0,fields.milliseconds||0)}}return dt}};function isValid(year,month,date){if(date<1){return false}if(month===1&&date>28){return date===29&&(year%4===0&&year%100!==0||year%400===0)}if(month===3||month===5||month===8||month===10){return date<31}return true}function toInt(str){return parseInt(str,10)}this.toTimezone=toTimezone;this.fromTimezone=fromTimezone;this.timezoneToOffset=timezoneToOffset;this.addDateMinutes=addDateMinutes;this.convertTimezoneToLocal=convertTimezoneToLocal;function toTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone):date}function fromTimezone(date,timezone){return date&&timezone?convertTimezoneToLocal(date,timezone,true):date}function timezoneToOffset(timezone,fallback){timezone=timezone.replace(/:/g,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){date=new Date(date.getTime());date.setMinutes(date.getMinutes()+minutes);return date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset();var timezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);return addDateMinutes(date,reverse*(timezoneOffset-dateTimezoneOffset))}}]);angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function($animate){var ON_REGEXP=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/;var IS_REGEXP=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;var dataPerTracked={};return{restrict:"A",compile:function(tElement,tAttrs){var linkedScopes=[];var instances=[];var expToData={};var lastActivated=null;var onExpMatches=tAttrs.uibIsClass.match(ON_REGEXP);var onExp=onExpMatches[2];var expsStr=onExpMatches[1];var exps=expsStr.split(",");return linkFn;function linkFn(scope,element,attrs){linkedScopes.push(scope);instances.push({scope:scope,element:element});exps.forEach(function(exp,k){addForExp(exp,scope)});scope.$on("$destroy",removeScope)}function addForExp(exp,scope){var matches=exp.match(IS_REGEXP);var clazz=scope.$eval(matches[1]);var compareWithExp=matches[2];var data=expToData[exp];if(!data){var watchFn=function(compareWithVal){var newActivated=null;instances.some(function(instance){var thisVal=instance.scope.$eval(onExp);if(thisVal===compareWithVal){newActivated=instance;return true}});if(data.lastActivated!==newActivated){if(data.lastActivated){$animate.removeClass(data.lastActivated.element,clazz)}if(newActivated){$animate.addClass(newActivated.element,clazz)}data.lastActivated=newActivated}};expToData[exp]=data={lastActivated:null,scope:scope,watchFn:watchFn,compareWithExp:compareWithExp,watcher:scope.$watch(compareWithExp,watchFn)}}data.watchFn(scope.$eval(compareWithExp))}function removeScope(e){var removedScope=e.targetScope;var index=linkedScopes.indexOf(removedScope);linkedScopes.splice(index,1);instances.splice(index,1);if(linkedScopes.length){var newWatchScope=linkedScopes[0];angular.forEach(expToData,function(data){if(data.scope===removedScope){data.watcher=newWatchScope.$watch(data.compareWithExp,data.watchFn);data.scope=newWatchScope}})}else{expToData={}}}}}}]);angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",false).value("$datepickerLiteralWarning",true).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:false,showWeeks:true,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function($scope,$element,$attrs,$parse,$interpolate,$locale,$log,dateFilter,datepickerConfig,$datepickerLiteralWarning,$datepickerSuppressError,dateParser){var self=this,ngModelCtrl={$setViewValue:angular.noop},ngModelOptions={},watchListeners=[];$element.addClass("uib-datepicker");$attrs.$set("role","application");if(!$scope.datepickerOptions){$scope.datepickerOptions={}}this.modes=["day","month","year"];["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(key){switch(key){case"customClass":case"dateDisabled":$scope[key]=$scope.datepickerOptions[key]||angular.noop;break;case"datepickerMode":$scope.datepickerMode=angular.isDefined($scope.datepickerOptions.datepickerMode)?$scope.datepickerOptions.datepickerMode:datepickerConfig.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":self[key]=angular.isDefined($scope.datepickerOptions[key])?$interpolate($scope.datepickerOptions[key])($scope.$parent):datepickerConfig[key];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":self[key]=angular.isDefined($scope.datepickerOptions[key])?$scope.datepickerOptions[key]:datepickerConfig[key];break;case"startingDay":if(angular.isDefined($scope.datepickerOptions.startingDay)){self.startingDay=$scope.datepickerOptions.startingDay}else if(angular.isNumber(datepickerConfig.startingDay)){self.startingDay=datepickerConfig.startingDay}else{self.startingDay=($locale.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7}break;case"maxDate":case"minDate":$scope.$watch("datepickerOptions."+key,function(value){if(value){if(angular.isDate(value)){self[key]=dateParser.fromTimezone(new Date(value),ngModelOptions.getOption("timezone"))}else{if($datepickerLiteralWarning){$log.warn("Literal date support has been deprecated, please switch to date object usage")}self[key]=new Date(dateFilter(value,"medium"))}}else{self[key]=datepickerConfig[key]?dateParser.fromTimezone(new Date(datepickerConfig[key]),ngModelOptions.getOption("timezone")):null}self.refreshView()});break;case"maxMode":case"minMode":if($scope.datepickerOptions[key]){$scope.$watch(function(){return $scope.datepickerOptions[key]},function(value){self[key]=$scope[key]=angular.isDefined(value)?value:$scope.datepickerOptions[key];if(key==="minMode"&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)<self.modes.indexOf(self[key])||key==="maxMode"&&self.modes.indexOf($scope.datepickerOptions.datepickerMode)>self.modes.indexOf(self[key])){$scope.datepickerMode=self[key];$scope.datepickerOptions.datepickerMode=self[key]}})}else{self[key]=$scope[key]=datepickerConfig[key]||null}break}});$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(Math.random()*1e4);$scope.disabled=angular.isDefined($attrs.disabled)||false;if(angular.isDefined($attrs.ngDisabled)){watchListeners.push($scope.$parent.$watch($attrs.ngDisabled,function(disabled){$scope.disabled=disabled;self.refreshView()}))}$scope.isActive=function(dateObject){if(self.compare(dateObject.date,self.activeDate)===0){$scope.activeDateId=dateObject.uid;return true}return false};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_;ngModelOptions=extractOptions(ngModelCtrl);if($scope.datepickerOptions.initDate){self.activeDate=dateParser.fromTimezone($scope.datepickerOptions.initDate,ngModelOptions.getOption("timezone"))||new Date;$scope.$watch("datepickerOptions.initDate",function(initDate){if(initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)){self.activeDate=dateParser.fromTimezone(initDate,ngModelOptions.getOption("timezone"));self.refreshView()}})}else{self.activeDate=new Date}var date=ngModelCtrl.$modelValue?new Date(ngModelCtrl.$modelValue):new Date;this.activeDate=!isNaN(date)?dateParser.fromTimezone(date,ngModelOptions.getOption("timezone")):dateParser.fromTimezone(new Date,ngModelOptions.getOption("timezone"));ngModelCtrl.$render=function(){self.render()}};this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid=!isNaN(date);if(isValid){this.activeDate=dateParser.fromTimezone(date,ngModelOptions.getOption("timezone"))}else if(!$datepickerSuppressError){$log.error('Datepicker directive: "ng-model" value must be a Date object')}}this.refreshView()};this.refreshView=function(){if(this.element){$scope.selectedDt=null;this._refreshView();if($scope.activeDt){$scope.activeDateId=$scope.activeDt.uid}var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;date=dateParser.fromTimezone(date,ngModelOptions.getOption("timezone"));ngModelCtrl.$setValidity("dateDisabled",!date||this.element&&!this.isDisabled(date))}};this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;model=dateParser.fromTimezone(model,ngModelOptions.getOption("timezone"));var today=new Date;today=dateParser.fromTimezone(today,ngModelOptions.getOption("timezone"));var time=this.compare(date,today);var dt={date:date,label:dateParser.filter(date,format),selected:model&&this.compare(date,model)===0,disabled:this.isDisabled(date),past:time<0,current:time===0,future:time>0,customClass:this.customClass(date)||null};if(model&&this.compare(date,model)===0){$scope.selectedDt=dt}if(self.activeDate&&this.compare(dt.date,self.activeDate)===0){$scope.activeDt=dt}return dt};this.isDisabled=function(date){return $scope.disabled||this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$scope.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})};this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})};this.split=function(arr,size){var arrays=[];while(arr.length>0){arrays.push(arr.splice(0,size))}return arrays};$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?dateParser.fromTimezone(new Date(ngModelCtrl.$viewValue),ngModelOptions.getOption("timezone")):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate());dt=dateParser.toTimezone(dt,ngModelOptions.getOption("timezone"));ngModelCtrl.$setViewValue(dt);ngModelCtrl.$render()}else{self.activeDate=date;setMode(self.modes[self.modes.indexOf($scope.datepickerMode)-1]);$scope.$emit("uib:datepicker.mode")}$scope.$broadcast("uib:datepicker.focus")};$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1);self.refreshView()};$scope.toggleMode=function(direction){direction=direction||1;if($scope.datepickerMode===self.maxMode&&direction===1||$scope.datepickerMode===self.minMode&&direction===-1){return}setMode(self.modes[self.modes.indexOf($scope.datepickerMode)+direction]);$scope.$emit("uib:datepicker.mode")};$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){self.element[0].focus()};$scope.$on("uib:datepicker.focus",focusElement);$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(!key||evt.shiftKey||evt.altKey||$scope.disabled){return}evt.preventDefault();if(!self.shortcutPropagation){evt.stopPropagation()}if(key==="enter"||key==="space"){if(self.isDisabled(self.activeDate)){return}$scope.select(self.activeDate)}else if(evt.ctrlKey&&(key==="up"||key==="down")){$scope.toggleMode(key==="up"?1:-1)}else{self.handleKeyDown(key,evt);self.refreshView()}};$element.on("keydown",function(evt){$scope.$apply(function(){$scope.keydown(evt)})});$scope.$on("$destroy",function(){while(watchListeners.length){watchListeners.shift()()}});function setMode(mode){$scope.datepickerMode=mode;$scope.datepickerOptions.datepickerMode=mode}function extractOptions(ngModelCtrl){var ngModelOptions;if(angular.version.minor<6){ngModelOptions=ngModelCtrl.$options||$scope.datepickerOptions.ngModelOptions||datepickerConfig.ngModelOptions||{};ngModelOptions.getOption=function(key){return ngModelOptions[key]}}else{var timezone=ngModelCtrl.$options.getOption("timezone")||($scope.datepickerOptions.ngModelOptions?$scope.datepickerOptions.ngModelOptions.timezone:null)||(datepickerConfig.ngModelOptions?datepickerConfig.ngModelOptions.timezone:null);ngModelOptions=ngModelCtrl.$options.createChild(datepickerConfig.ngModelOptions).createChild($scope.datepickerOptions.ngModelOptions).createChild(ngModelCtrl.$options).createChild({timezone:timezone})}return ngModelOptions}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1};this.element=$element;function getDaysInMonth(year,month){return month===1&&year%4===0&&(year%100!==0||year%400===0)?29:DAYS_IN_MONTH[month]}this.init=function(ctrl){angular.extend(ctrl,this);scope.showWeeks=ctrl.showWeeks;ctrl.refreshView()};this.getDates=function(startDate,n){var dates=new Array(n),current=new Date(startDate),i=0,date;while(i<n){date=new Date(current);dates[i++]=date;current.setDate(current.getDate()+1)}return dates};this._refreshView=function(){var year=this.activeDate.getFullYear(),month=this.activeDate.getMonth(),firstDayOfMonth=new Date(this.activeDate);firstDayOfMonth.setFullYear(year,month,1);var difference=this.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);if(numDisplayedFromPreviousMonth>0){firstDate.setDate(-numDisplayedFromPreviousMonth+1)}var days=this.getDates(firstDate,42);for(var i=0;i<42;i++){days[i]=angular.extend(this.createDateObject(days[i],this.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i})}scope.labels=new Array(7);for(var j=0;j<7;j++){scope.labels[j]={abbr:dateFilter(days[j].date,this.formatDayHeader),full:dateFilter(days[j].date,"EEEE")}}scope.title=dateFilter(this.activeDate,this.formatDayTitle);scope.rows=this.split(days,7);if(scope.showWeeks){scope.weekNumbers=[];var thursdayIndex=(4+7-this.startingDay)%7,numWeeks=scope.rows.length;for(var curWeek=0;curWeek<numWeeks;curWeek++){scope.weekNumbers.push(getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date))}}};this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth(),date1.getDate());var _date2=new Date(date2.getFullYear(),date2.getMonth(),date2.getDate());_date1.setFullYear(date1.getFullYear());_date2.setFullYear(date2.getFullYear());return _date1-_date2};function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864e5)/7)+1}this.handleKeyDown=function(key,evt){var date=this.activeDate.getDate();if(key==="left"){date=date-1}else if(key==="up"){date=date-7}else if(key==="right"){date=date+1}else if(key==="down"){date=date+7}else if(key==="pageup"||key==="pagedown"){var month=this.activeDate.getMonth()+(key==="pageup"?-1:1);this.activeDate.setMonth(month,1);date=Math.min(getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()),date)}else if(key==="home"){date=1}else if(key==="end"){date=getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth())}this.activeDate.setDate(date)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){this.step={years:1};this.element=$element;this.init=function(ctrl){angular.extend(ctrl,this);ctrl.refreshView()};this._refreshView=function(){var months=new Array(12),year=this.activeDate.getFullYear(),date;for(var i=0;i<12;i++){date=new Date(this.activeDate);date.setFullYear(year,i,1);months[i]=angular.extend(this.createDateObject(date,this.formatMonth),{uid:scope.uniqueId+"-"+i})}scope.title=dateFilter(this.activeDate,this.formatMonthTitle);scope.rows=this.split(months,this.monthColumns);scope.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1};this.compare=function(date1,date2){var _date1=new Date(date1.getFullYear(),date1.getMonth());var _date2=new Date(date2.getFullYear(),date2.getMonth());_date1.setFullYear(date1.getFullYear());_date2.setFullYear(date2.getFullYear());return _date1-_date2};this.handleKeyDown=function(key,evt){var date=this.activeDate.getMonth();if(key==="left"){date=date-1}else if(key==="up"){date=date-this.monthColumns}else if(key==="right"){date=date+1}else if(key==="down"){date=date+this.monthColumns}else if(key==="pageup"||key==="pagedown"){var year=this.activeDate.getFullYear()+(key==="pageup"?-1:1);this.activeDate.setFullYear(year)}else if(key==="home"){date=0}else if(key==="end"){date=11}this.activeDate.setMonth(date)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){var columns,range;this.element=$element;function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}this.yearpickerInit=function(){columns=this.yearColumns;range=this.yearRows*columns;this.step={years:range}};this._refreshView=function(){var years=new Array(range),date;for(var i=0,start=getStartingYear(this.activeDate.getFullYear());i<range;i++){date=new Date(this.activeDate);date.setFullYear(start+i,0,1);years[i]=angular.extend(this.createDateObject(date,this.formatYear),{uid:scope.uniqueId+"-"+i})}scope.title=[years[0].label,years[range-1].label].join(" - ");scope.rows=this.split(years,columns);scope.columns=columns};this.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()};this.handleKeyDown=function(key,evt){var date=this.activeDate.getFullYear();if(key==="left"){date=date-1}else if(key==="up"){date=date-columns}else if(key==="right"){date=date+1}else if(key==="down"){date=date+columns}else if(key==="pageup"||key==="pagedown"){date+=(key==="pageup"?-1:1)*range}else if(key==="home"){date=getStartingYear(this.activeDate.getFullYear())}else if(key==="end"){date=getStartingYear(this.activeDate.getFullYear())+range-1}this.activeDate.setFullYear(date)}}]).directive("uibDatepicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];datepickerCtrl.init(ngModelCtrl)}}}).directive("uibDaypicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],daypickerCtrl=ctrls[1];daypickerCtrl.init(datepickerCtrl)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],monthpickerCtrl=ctrls[1];monthpickerCtrl.init(datepickerCtrl)}}}).directive("uibYearpicker",function(){return{templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(scope,element,attrs,ctrls){var ctrl=ctrls[0];angular.extend(ctrl,ctrls[1]);ctrl.yearpickerInit();ctrl.refreshView()}}});angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){var SCROLLBAR_WIDTH;var BODY_SCROLLBAR_WIDTH;var OVERFLOW_REGEX={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/};var PLACEMENT_REGEX={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};var BODY_REGEX=/(HTML|BODY)/;return{getRawNode:function(elem){return elem.nodeName?elem:elem[0]||elem},parseStyle:function(value){value=parseFloat(value);return isFinite(value)?value:0},offsetParent:function(elem){elem=this.getRawNode(elem);var offsetParent=elem.offsetParent||$document[0].documentElement;function isStaticPositioned(el){return($window.getComputedStyle(el).position||"static")==="static"}while(offsetParent&&offsetParent!==$document[0].documentElement&&isStaticPositioned(offsetParent)){offsetParent=offsetParent.offsetParent}return offsetParent||$document[0].documentElement},scrollbarWidth:function(isBody){if(isBody){if(angular.isUndefined(BODY_SCROLLBAR_WIDTH)){var bodyElem=$document.find("body");bodyElem.addClass("uib-position-body-scrollbar-measure");BODY_SCROLLBAR_WIDTH=$window.innerWidth-bodyElem[0].clientWidth;BODY_SCROLLBAR_WIDTH=isFinite(BODY_SCROLLBAR_WIDTH)?BODY_SCROLLBAR_WIDTH:0;bodyElem.removeClass("uib-position-body-scrollbar-measure")}return BODY_SCROLLBAR_WIDTH}if(angular.isUndefined(SCROLLBAR_WIDTH)){var scrollElem=angular.element('<div class="uib-position-scrollbar-measure"></div>');$document.find("body").append(scrollElem);SCROLLBAR_WIDTH=scrollElem[0].offsetWidth-scrollElem[0].clientWidth;SCROLLBAR_WIDTH=isFinite(SCROLLBAR_WIDTH)?SCROLLBAR_WIDTH:0;scrollElem.remove()}return SCROLLBAR_WIDTH},scrollbarPadding:function(elem){elem=this.getRawNode(elem);var elemStyle=$window.getComputedStyle(elem);var paddingRight=this.parseStyle(elemStyle.paddingRight);var paddingBottom=this.parseStyle(elemStyle.paddingBottom);var scrollParent=this.scrollParent(elem,false,true);var scrollbarWidth=this.scrollbarWidth(BODY_REGEX.test(scrollParent.tagName));return{scrollbarWidth:scrollbarWidth,widthOverflow:scrollParent.scrollWidth>scrollParent.clientWidth,right:paddingRight+scrollbarWidth,originalRight:paddingRight,heightOverflow:scrollParent.scrollHeight>scrollParent.clientHeight,bottom:paddingBottom+scrollbarWidth,originalBottom:paddingBottom}},isScrollable:function(elem,includeHidden){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal;var elemStyle=$window.getComputedStyle(elem);return overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX)},scrollParent:function(elem,includeHidden,includeSelf){elem=this.getRawNode(elem);var overflowRegex=includeHidden?OVERFLOW_REGEX.hidden:OVERFLOW_REGEX.normal;var documentEl=$document[0].documentElement;var elemStyle=$window.getComputedStyle(elem);if(includeSelf&&overflowRegex.test(elemStyle.overflow+elemStyle.overflowY+elemStyle.overflowX)){return elem}var excludeStatic=elemStyle.position==="absolute";var scrollParent=elem.parentElement||documentEl;if(scrollParent===documentEl||elemStyle.position==="fixed"){return documentEl}while(scrollParent.parentElement&&scrollParent!==documentEl){var spStyle=$window.getComputedStyle(scrollParent);if(excludeStatic&&spStyle.position!=="static"){excludeStatic=false}if(!excludeStatic&&overflowRegex.test(spStyle.overflow+spStyle.overflowY+spStyle.overflowX)){break}scrollParent=scrollParent.parentElement}return scrollParent},position:function(elem,includeMagins){elem=this.getRawNode(elem);var elemOffset=this.offset(elem);if(includeMagins){var elemStyle=$window.getComputedStyle(elem);elemOffset.top-=this.parseStyle(elemStyle.marginTop);elemOffset.left-=this.parseStyle(elemStyle.marginLeft)}var parent=this.offsetParent(elem);var parentOffset={top:0,left:0};if(parent!==$document[0].documentElement){parentOffset=this.offset(parent);parentOffset.top+=parent.clientTop-parent.scrollTop;parentOffset.left+=parent.clientLeft-parent.scrollLeft}return{width:Math.round(angular.isNumber(elemOffset.width)?elemOffset.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemOffset.height)?elemOffset.height:elem.offsetHeight),top:Math.round(elemOffset.top-parentOffset.top),left:Math.round(elemOffset.left-parentOffset.left)}},offset:function(elem){elem=this.getRawNode(elem);var elemBCR=elem.getBoundingClientRect();return{width:Math.round(angular.isNumber(elemBCR.width)?elemBCR.width:elem.offsetWidth),height:Math.round(angular.isNumber(elemBCR.height)?elemBCR.height:elem.offsetHeight),top:Math.round(elemBCR.top+($window.pageYOffset||$document[0].documentElement.scrollTop)),left:Math.round(elemBCR.left+($window.pageXOffset||$document[0].documentElement.scrollLeft))}},viewportOffset:function(elem,useDocument,includePadding){elem=this.getRawNode(elem);includePadding=includePadding!==false?true:false;var elemBCR=elem.getBoundingClientRect();var offsetBCR={top:0,left:0,bottom:0,right:0};var offsetParent=useDocument?$document[0].documentElement:this.scrollParent(elem);var offsetParentBCR=offsetParent.getBoundingClientRect();offsetBCR.top=offsetParentBCR.top+offsetParent.clientTop;offsetBCR.left=offsetParentBCR.left+offsetParent.clientLeft;if(offsetParent===$document[0].documentElement){offsetBCR.top+=$window.pageYOffset;offsetBCR.left+=$window.pageXOffset}offsetBCR.bottom=offsetBCR.top+offsetParent.clientHeight;offsetBCR.right=offsetBCR.left+offsetParent.clientWidth;if(includePadding){var offsetParentStyle=$window.getComputedStyle(offsetParent);offsetBCR.top+=this.parseStyle(offsetParentStyle.paddingTop);offsetBCR.bottom-=this.parseStyle(offsetParentStyle.paddingBottom);offsetBCR.left+=this.parseStyle(offsetParentStyle.paddingLeft);offsetBCR.right-=this.parseStyle(offsetParentStyle.paddingRight)}return{top:Math.round(elemBCR.top-offsetBCR.top),bottom:Math.round(offsetBCR.bottom-elemBCR.bottom),left:Math.round(elemBCR.left-offsetBCR.left),right:Math.round(offsetBCR.right-elemBCR.right)}},parsePlacement:function(placement){var autoPlace=PLACEMENT_REGEX.auto.test(placement);if(autoPlace){placement=placement.replace(PLACEMENT_REGEX.auto,"")}placement=placement.split("-");placement[0]=placement[0]||"top";if(!PLACEMENT_REGEX.primary.test(placement[0])){placement[0]="top"}placement[1]=placement[1]||"center";if(!PLACEMENT_REGEX.secondary.test(placement[1])){placement[1]="center"}if(autoPlace){placement[2]=true}else{placement[2]=false}return placement},positionElements:function(hostElem,targetElem,placement,appendToBody){hostElem=this.getRawNode(hostElem);targetElem=this.getRawNode(targetElem);var targetWidth=angular.isDefined(targetElem.offsetWidth)?targetElem.offsetWidth:targetElem.prop("offsetWidth");var targetHeight=angular.isDefined(targetElem.offsetHeight)?targetElem.offsetHeight:targetElem.prop("offsetHeight");placement=this.parsePlacement(placement);var hostElemPos=appendToBody?this.offset(hostElem):this.position(hostElem);var targetElemPos={top:0,left:0,placement:""};if(placement[2]){var viewportOffset=this.viewportOffset(hostElem,appendToBody);var targetElemStyle=$window.getComputedStyle(targetElem);var adjustedSize={width:targetWidth+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginLeft)+this.parseStyle(targetElemStyle.marginRight))),height:targetHeight+Math.round(Math.abs(this.parseStyle(targetElemStyle.marginTop)+this.parseStyle(targetElemStyle.marginBottom)))};placement[0]=placement[0]==="top"&&adjustedSize.height>viewportOffset.top&&adjustedSize.height<=viewportOffset.bottom?"bottom":placement[0]==="bottom"&&adjustedSize.height>viewportOffset.bottom&&adjustedSize.height<=viewportOffset.top?"top":placement[0]==="left"&&adjustedSize.width>viewportOffset.left&&adjustedSize.width<=viewportOffset.right?"right":placement[0]==="right"&&adjustedSize.width>viewportOffset.right&&adjustedSize.width<=viewportOffset.left?"left":placement[0];placement[1]=placement[1]==="top"&&adjustedSize.height-hostElemPos.height>viewportOffset.bottom&&adjustedSize.height-hostElemPos.height<=viewportOffset.top?"bottom":placement[1]==="bottom"&&adjustedSize.height-hostElemPos.height>viewportOffset.top&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom?"top":placement[1]==="left"&&adjustedSize.width-hostElemPos.width>viewportOffset.right&&adjustedSize.width-hostElemPos.width<=viewportOffset.left?"right":placement[1]==="right"&&adjustedSize.width-hostElemPos.width>viewportOffset.left&&adjustedSize.width-hostElemPos.width<=viewportOffset.right?"left":placement[1];if(placement[1]==="center"){if(PLACEMENT_REGEX.vertical.test(placement[0])){var xOverflow=hostElemPos.width/2-targetWidth/2;if(viewportOffset.left+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.right){placement[1]="left"}else if(viewportOffset.right+xOverflow<0&&adjustedSize.width-hostElemPos.width<=viewportOffset.left){placement[1]="right"}}else{var yOverflow=hostElemPos.height/2-adjustedSize.height/2;if(viewportOffset.top+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.bottom){placement[1]="top"}else if(viewportOffset.bottom+yOverflow<0&&adjustedSize.height-hostElemPos.height<=viewportOffset.top){placement[1]="bottom"}}}}switch(placement[0]){case"top":targetElemPos.top=hostElemPos.top-targetHeight;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height;break;case"left":targetElemPos.left=hostElemPos.left-targetWidth;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width;break}switch(placement[1]){case"top":targetElemPos.top=hostElemPos.top;break;case"bottom":targetElemPos.top=hostElemPos.top+hostElemPos.height-targetHeight;break;case"left":targetElemPos.left=hostElemPos.left;break;case"right":targetElemPos.left=hostElemPos.left+hostElemPos.width-targetWidth;break;case"center":if(PLACEMENT_REGEX.vertical.test(placement[0])){targetElemPos.left=hostElemPos.left+hostElemPos.width/2-targetWidth/2}else{targetElemPos.top=hostElemPos.top+hostElemPos.height/2-targetHeight/2}break}targetElemPos.top=Math.round(targetElemPos.top);targetElemPos.left=Math.round(targetElemPos.left);targetElemPos.placement=placement[1]==="center"?placement[0]:placement[0]+"-"+placement[1];return targetElemPos},adjustTop:function(placementClasses,containerPosition,initialHeight,currentHeight){if(placementClasses.indexOf("top")!==-1&&initialHeight!==currentHeight){return{top:containerPosition.top-currentHeight+"px"}}},positionArrow:function(elem,placement){elem=this.getRawNode(elem);var innerElem=elem.querySelector(".tooltip-inner, .popover-inner");if(!innerElem){return}var isTooltip=angular.element(innerElem).hasClass("tooltip-inner");var arrowElem=isTooltip?elem.querySelector(".tooltip-arrow"):elem.querySelector(".arrow");if(!arrowElem){return}var arrowCss={top:"",bottom:"",left:"",right:""};placement=this.parsePlacement(placement);if(placement[1]==="center"){angular.element(arrowElem).css(arrowCss);return}var borderProp="border-"+placement[0]+"-width";var borderWidth=$window.getComputedStyle(arrowElem)[borderProp];var borderRadiusProp="border-";if(PLACEMENT_REGEX.vertical.test(placement[0])){borderRadiusProp+=placement[0]+"-"+placement[1]}else{borderRadiusProp+=placement[1]+"-"+placement[0]}borderRadiusProp+="-radius";var borderRadius=$window.getComputedStyle(isTooltip?innerElem:elem)[borderRadiusProp];switch(placement[0]){case"top":arrowCss.bottom=isTooltip?"0":"-"+borderWidth;break;case"bottom":arrowCss.top=isTooltip?"0":"-"+borderWidth;break;case"left":arrowCss.right=isTooltip?"0":"-"+borderWidth;break;case"right":arrowCss.left=isTooltip?"0":"-"+borderWidth;break}arrowCss[placement[1]]=borderRadius;angular.element(arrowElem).css(arrowCss)}}}]);angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",true).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:false,clearText:"Clear",closeOnDateSelection:true,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:true,showButtonBar:true,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function($scope,$element,$attrs,$compile,$log,$parse,$window,$document,$rootScope,$position,dateFilter,dateParser,datepickerPopupConfig,$timeout,datepickerConfig,$datepickerPopupLiteralWarning){var cache={},isHtml5DateInput=false;var dateFormat,closeOnDateSelection,appendToBody,onOpenFocus,datepickerPopupTemplateUrl,datepickerTemplateUrl,popupEl,datepickerEl,scrollParentEl,ngModel,ngModelOptions,$popup,altInputFormats,watchListeners=[];this.init=function(_ngModel_){ngModel=_ngModel_;ngModelOptions=extractOptions(ngModel);closeOnDateSelection=angular.isDefined($attrs.closeOnDateSelection)?$scope.$parent.$eval($attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection;appendToBody=angular.isDefined($attrs.datepickerAppendToBody)?$scope.$parent.$eval($attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody;onOpenFocus=angular.isDefined($attrs.onOpenFocus)?$scope.$parent.$eval($attrs.onOpenFocus):datepickerPopupConfig.onOpenFocus;datepickerPopupTemplateUrl=angular.isDefined($attrs.datepickerPopupTemplateUrl)?$attrs.datepickerPopupTemplateUrl:datepickerPopupConfig.datepickerPopupTemplateUrl;datepickerTemplateUrl=angular.isDefined($attrs.datepickerTemplateUrl)?$attrs.datepickerTemplateUrl:datepickerPopupConfig.datepickerTemplateUrl;altInputFormats=angular.isDefined($attrs.altInputFormats)?$scope.$parent.$eval($attrs.altInputFormats):datepickerPopupConfig.altInputFormats;$scope.showButtonBar=angular.isDefined($attrs.showButtonBar)?$scope.$parent.$eval($attrs.showButtonBar):datepickerPopupConfig.showButtonBar;if(datepickerPopupConfig.html5Types[$attrs.type]){dateFormat=datepickerPopupConfig.html5Types[$attrs.type];isHtml5DateInput=true}else{dateFormat=$attrs.uibDatepickerPopup||datepickerPopupConfig.datepickerPopup;$attrs.$observe("uibDatepickerPopup",function(value,oldValue){var newDateFormat=value||datepickerPopupConfig.datepickerPopup;if(newDateFormat!==dateFormat){dateFormat=newDateFormat;ngModel.$modelValue=null;if(!dateFormat){throw new Error("uibDatepickerPopup must have a date format specified.")}}})}if(!dateFormat){throw new Error("uibDatepickerPopup must have a date format specified.")}if(isHtml5DateInput&&$attrs.uibDatepickerPopup){throw new Error("HTML5 date input types do not support custom formats.")}popupEl=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>");popupEl.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":datepickerPopupTemplateUrl});datepickerEl=angular.element(popupEl.children()[0]);datepickerEl.attr("template-url",datepickerTemplateUrl);if(!$scope.datepickerOptions){$scope.datepickerOptions={}}if(isHtml5DateInput){if($attrs.type==="month"){$scope.datepickerOptions.datepickerMode="month";$scope.datepickerOptions.minMode="month"}}datepickerEl.attr("datepicker-options","datepickerOptions");if(!isHtml5DateInput){ngModel.$$parserName="date";ngModel.$validators.date=validator;ngModel.$parsers.unshift(parseDate);ngModel.$formatters.push(function(value){if(ngModel.$isEmpty(value)){$scope.date=value;return value}if(angular.isNumber(value)){value=new Date(value)}$scope.date=dateParser.fromTimezone(value,ngModelOptions.getOption("timezone"));return dateParser.filter($scope.date,dateFormat)})}else{ngModel.$formatters.push(function(value){$scope.date=dateParser.fromTimezone(value,ngModelOptions.getOption("timezone"));return value})}ngModel.$viewChangeListeners.push(function(){$scope.date=parseDateString(ngModel.$viewValue)});$element.on("keydown",inputKeydownBind);$popup=$compile(popupEl)($scope);popupEl.remove();if(appendToBody){$document.find("body").append($popup)}else{$element.after($popup)}$scope.$on("$destroy",function(){if($scope.isOpen===true){if(!$rootScope.$$phase){$scope.$apply(function(){$scope.isOpen=false})}}$popup.remove();$element.off("keydown",inputKeydownBind);$document.off("click",documentClickBind);if(scrollParentEl){scrollParentEl.off("scroll",positionPopup)}angular.element($window).off("resize",positionPopup);while(watchListeners.length){watchListeners.shift()()}})};$scope.getText=function(key){return $scope[key+"Text"]||datepickerPopupConfig[key+"Text"]};$scope.isDisabled=function(date){if(date==="today"){date=dateParser.fromTimezone(new Date,ngModelOptions.getOption("timezone"))}var dates={};angular.forEach(["minDate","maxDate"],function(key){if(!$scope.datepickerOptions[key]){dates[key]=null}else if(angular.isDate($scope.datepickerOptions[key])){dates[key]=new Date($scope.datepickerOptions[key])}else{if($datepickerPopupLiteralWarning){$log.warn("Literal date support has been deprecated, please switch to date object usage")}dates[key]=new Date(dateFilter($scope.datepickerOptions[key],"medium"))}});return $scope.datepickerOptions&&dates.minDate&&$scope.compare(date,dates.minDate)<0||dates.maxDate&&$scope.compare(date,dates.maxDate)>0};$scope.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())};$scope.dateSelection=function(dt){$scope.date=dt;var date=$scope.date?dateParser.filter($scope.date,dateFormat):null;$element.val(date);ngModel.$setViewValue(date);if(closeOnDateSelection){$scope.isOpen=false;$element[0].focus()}};$scope.keydown=function(evt){if(evt.which===27){evt.stopPropagation();$scope.isOpen=false;$element[0].focus()}};$scope.select=function(date,evt){evt.stopPropagation();if(date==="today"){var today=new Date;if(angular.isDate($scope.date)){date=new Date($scope.date);date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())}else{date=dateParser.fromTimezone(today,ngModelOptions.getOption("timezone"));date.setHours(0,0,0,0)}}$scope.dateSelection(date)};$scope.close=function(evt){evt.stopPropagation();$scope.isOpen=false;$element[0].focus()};$scope.disabled=angular.isDefined($attrs.disabled)||false;if($attrs.ngDisabled){watchListeners.push($scope.$parent.$watch($parse($attrs.ngDisabled),function(disabled){$scope.disabled=disabled}))}$scope.$watch("isOpen",function(value){if(value){if(!$scope.disabled){$timeout(function(){positionPopup();if(onOpenFocus){$scope.$broadcast("uib:datepicker.focus")}$document.on("click",documentClickBind);var placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement;if(appendToBody||$position.parsePlacement(placement)[2]){scrollParentEl=scrollParentEl||angular.element($position.scrollParent($element));if(scrollParentEl){scrollParentEl.on("scroll",positionPopup)}}else{scrollParentEl=null}angular.element($window).on("resize",positionPopup)},0,false)}else{$scope.isOpen=false}}else{$document.off("click",documentClickBind);if(scrollParentEl){scrollParentEl.off("scroll",positionPopup)}angular.element($window).off("resize",positionPopup)}});function cameltoDash(string){return string.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function parseDateString(viewValue){var date=dateParser.parse(viewValue,dateFormat,$scope.date);if(isNaN(date)){for(var i=0;i<altInputFormats.length;i++){date=dateParser.parse(viewValue,altInputFormats[i],$scope.date);if(!isNaN(date)){return date}}}return date}function parseDate(viewValue){if(angular.isNumber(viewValue)){viewValue=new Date(viewValue)}if(!viewValue){return null}if(angular.isDate(viewValue)&&!isNaN(viewValue)){return viewValue}if(angular.isString(viewValue)){var date=parseDateString(viewValue);if(!isNaN(date)){return dateParser.toTimezone(date,ngModelOptions.getOption("timezone"))}}return ngModelOptions.getOption("allowInvalid")?viewValue:undefined}function validator(modelValue,viewValue){var value=modelValue||viewValue;if(!$attrs.ngRequired&&!value){return true}if(angular.isNumber(value)){value=new Date(value)}if(!value){return true}if(angular.isDate(value)&&!isNaN(value)){return true}if(angular.isString(value)){return!isNaN(parseDateString(value))}return false}function documentClickBind(event){if(!$scope.isOpen&&$scope.disabled){return}var popup=$popup[0];var dpContainsTarget=$element[0].contains(event.target);var popupContainsTarget=popup.contains!==undefined&&popup.contains(event.target);if($scope.isOpen&&!(dpContainsTarget||popupContainsTarget)){$scope.$apply(function(){$scope.isOpen=false})}}function inputKeydownBind(evt){if(evt.which===27&&$scope.isOpen){evt.preventDefault();evt.stopPropagation();$scope.$apply(function(){$scope.isOpen=false});$element[0].focus()}else if(evt.which===40&&!$scope.isOpen){evt.preventDefault();evt.stopPropagation();$scope.$apply(function(){$scope.isOpen=true})}}function positionPopup(){if($scope.isOpen){var dpElement=angular.element($popup[0].querySelector(".uib-datepicker-popup"));var placement=$attrs.popupPlacement?$attrs.popupPlacement:datepickerPopupConfig.placement;var position=$position.positionElements($element,dpElement,placement,appendToBody);dpElement.css({top:position.top+"px",left:position.left+"px"});if(dpElement.hasClass("uib-position-measure")){dpElement.removeClass("uib-position-measure")}}}function extractOptions(ngModelCtrl){var ngModelOptions;if(angular.version.minor<6){ngModelOptions=angular.isObject(ngModelCtrl.$options)?ngModelCtrl.$options:{timezone:null};ngModelOptions.getOption=function(key){return ngModelOptions[key]}}else{ngModelOptions=ngModelCtrl.$options}return ngModelOptions}$scope.$on("uib:datepicker.mode",function(){$timeout(positionPopup,0,false)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(scope,element,attrs,ctrls){var ngModel=ctrls[0],ctrl=ctrls[1];ctrl.init(ngModel)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:true,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/datepickerPopup/popup.html"}}});angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function($timeout){return function(callback,debounceTime){var timeoutPromise;return function(){var self=this;var args=Array.prototype.slice.call(arguments);if(timeoutPromise){$timeout.cancel(timeoutPromise)}timeoutPromise=$timeout(function(){callback.apply(self,args)},debounceTime)}}}]);angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var map={};return{entries:function(){return Object.keys(map).map(function(key){return{key:key,value:map[key]}})},get:function(key){return map[key]},hasKey:function(key){return!!map[key]},keys:function(){return Object.keys(map)},put:function(key,value){if(!map[key]){map[key]=[]}map[key].push(value)},remove:function(key,value){var values=map[key];if(!values){return}var idx=values.indexOf(value);if(idx!==-1){values.splice(idx,1)}if(!values.length){delete map[key]}}}}}});angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function($document,$rootScope,$$multiMap){var openScope=null;var openedContainers=$$multiMap.createNew();this.isOnlyOpen=function(dropdownScope,appendTo){var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var openDropdown=openedDropdowns.reduce(function(toClose,dropdown){if(dropdown.scope===dropdownScope){return dropdown}return toClose},{});if(openDropdown){return openedDropdowns.length===1}}return false};this.open=function(dropdownScope,element,appendTo){if(!openScope){$document.on("click",closeDropdown)}if(openScope&&openScope!==dropdownScope){openScope.isOpen=false}openScope=dropdownScope;if(!appendTo){return}var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var openedScopes=openedDropdowns.map(function(dropdown){return dropdown.scope});if(openedScopes.indexOf(dropdownScope)===-1){openedContainers.put(appendTo,{scope:dropdownScope})}}else{openedContainers.put(appendTo,{scope:dropdownScope})}};this.close=function(dropdownScope,element,appendTo){if(openScope===dropdownScope){$document.off("click",closeDropdown);$document.off("keydown",this.keybindFilter);openScope=null}if(!appendTo){return}var openedDropdowns=openedContainers.get(appendTo);if(openedDropdowns){var dropdownToClose=openedDropdowns.reduce(function(toClose,dropdown){if(dropdown.scope===dropdownScope){return dropdown}return toClose},{});if(dropdownToClose){openedContainers.remove(appendTo,dropdownToClose)}}};var closeDropdown=function(evt){if(!openScope||!openScope.isOpen){return}if(evt&&openScope.getAutoClose()==="disabled"){return}if(evt&&evt.which===3){return}var toggleElement=openScope.getToggleElement();if(evt&&toggleElement&&toggleElement[0].contains(evt.target)){return}var dropdownElement=openScope.getDropdownElement();if(evt&&openScope.getAutoClose()==="outsideClick"&&dropdownElement&&dropdownElement[0].contains(evt.target)){return}openScope.focusToggleElement();openScope.isOpen=false;if(!$rootScope.$$phase){openScope.$apply()}};this.keybindFilter=function(evt){if(!openScope){return}var dropdownElement=openScope.getDropdownElement();var toggleElement=openScope.getToggleElement();var dropdownElementTargeted=dropdownElement&&dropdownElement[0].contains(evt.target);var toggleElementTargeted=toggleElement&&toggleElement[0].contains(evt.target);if(evt.which===27){evt.stopPropagation();openScope.focusToggleElement();closeDropdown()}else if(openScope.isKeynavEnabled()&&[38,40].indexOf(evt.which)!==-1&&openScope.isOpen&&(dropdownElementTargeted||toggleElementTargeted)){evt.preventDefault();evt.stopPropagation();openScope.focusDropdownEntry(evt.which)}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){var self=this,scope=$scope.$new(),templateScope,appendToOpenClass=dropdownConfig.appendToOpenClass,openClass=dropdownConfig.openClass,getIsOpen,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,keynavEnabled=false,selectedOption=null,body=$document.find("body");$element.addClass("dropdown");this.init=function(){if($attrs.isOpen){getIsOpen=$parse($attrs.isOpen);setIsOpen=getIsOpen.assign;$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})}keynavEnabled=angular.isDefined($attrs.keyboardNav)};this.toggle=function(open){scope.isOpen=arguments.length?!!open:!scope.isOpen;if(angular.isFunction(setIsOpen)){setIsOpen(scope,scope.isOpen)}return scope.isOpen};this.isOpen=function(){return scope.isOpen};scope.getToggleElement=function(){return self.toggleElement};scope.getAutoClose=function(){return $attrs.autoClose||"always"};scope.getElement=function(){return $element};scope.isKeynavEnabled=function(){return keynavEnabled};scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):$element.find("ul").eq(0).find("a");switch(keyCode){case 40:{if(!angular.isNumber(self.selectedOption)){self.selectedOption=0}else{self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1}break}case 38:{if(!angular.isNumber(self.selectedOption)){self.selectedOption=elems.length-1}else{self.selectedOption=self.selectedOption===0?0:self.selectedOption-1}break}}elems[self.selectedOption].focus()};scope.getDropdownElement=function(){return self.dropdownMenu};scope.focusToggleElement=function(){if(self.toggleElement){self.toggleElement[0].focus()}};function removeDropdownMenu(){$element.append(self.dropdownMenu)}scope.$watch("isOpen",function(isOpen,wasOpen){var appendTo=null,appendToBody=false;if(angular.isDefined($attrs.dropdownAppendTo)){var appendToEl=$parse($attrs.dropdownAppendTo)(scope);if(appendToEl){appendTo=angular.element(appendToEl)}}if(angular.isDefined($attrs.dropdownAppendToBody)){var appendToBodyValue=$parse($attrs.dropdownAppendToBody)(scope);if(appendToBodyValue!==false){appendToBody=true}}if(appendToBody&&!appendTo){appendTo=body}if(appendTo&&self.dropdownMenu){if(isOpen){appendTo.append(self.dropdownMenu);$element.on("$destroy",removeDropdownMenu)}else{$element.off("$destroy",removeDropdownMenu);removeDropdownMenu()}}if(appendTo&&self.dropdownMenu){var pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",true),css,rightalign,scrollbarPadding,scrollbarWidth=0;css={top:pos.top+"px",display:isOpen?"block":"none"};rightalign=self.dropdownMenu.hasClass("dropdown-menu-right");if(!rightalign){css.left=pos.left+"px";css.right="auto"}else{css.left="auto";scrollbarPadding=$position.scrollbarPadding(appendTo);if(scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth){scrollbarWidth=scrollbarPadding.scrollbarWidth}css.right=window.innerWidth-scrollbarWidth-(pos.left+$element.prop("offsetWidth"))+"px"}if(!appendToBody){var appendOffset=$position.offset(appendTo);css.top=pos.top-appendOffset.top+"px";if(!rightalign){css.left=pos.left-appendOffset.left+"px"}else{css.right=window.innerWidth-(pos.left-appendOffset.left+$element.prop("offsetWidth"))+"px"}}self.dropdownMenu.css(css)}var openContainer=appendTo?appendTo:$element;var dropdownOpenClass=appendTo?appendToOpenClass:openClass;var hasOpenClass=openContainer.hasClass(dropdownOpenClass);var isOnlyOpen=uibDropdownService.isOnlyOpen($scope,appendTo);if(hasOpenClass===!isOpen){var toggleClass;if(appendTo){toggleClass=!isOnlyOpen?"addClass":"removeClass"}else{toggleClass=isOpen?"addClass":"removeClass"}$animate[toggleClass](openContainer,dropdownOpenClass).then(function(){if(angular.isDefined(isOpen)&&isOpen!==wasOpen){toggleInvoker($scope,{open:!!isOpen})}})}if(isOpen){if(self.dropdownMenuTemplateUrl){$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new();$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl);self.dropdownMenu=newEl;$document.on("keydown",uibDropdownService.keybindFilter)})})}else{$document.on("keydown",uibDropdownService.keybindFilter)}scope.focusToggleElement();uibDropdownService.open(scope,$element,appendTo)}else{uibDropdownService.close(scope,$element,appendTo);if(self.dropdownMenuTemplateUrl){if(templateScope){templateScope.$destroy()}var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl);self.dropdownMenu=newEl}self.selectedOption=null}if(angular.isFunction(setIsOpen)){setIsOpen($scope,isOpen)}})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(!dropdownCtrl||angular.isDefined(attrs.dropdownNested)){return}element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;if(tplUrl){dropdownCtrl.dropdownMenuTemplateUrl=tplUrl}if(!dropdownCtrl.dropdownMenu){dropdownCtrl.dropdownMenu=element}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(!dropdownCtrl){return}element.addClass("dropdown-toggle");dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault();if(!element.hasClass("disabled")&&!attrs.disabled){scope.$apply(function(){dropdownCtrl.toggle()})}};element.on("click",toggleDropdown);element.attr({"aria-haspopup":true,"aria-expanded":false});scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)});scope.$on("$destroy",function(){element.off("click",toggleDropdown)})}}});angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++){if(key===stack[i].key){return stack[i]}}},keys:function(){var keys=[];for(var i=0;i<stack.length;i++){keys.push(stack[i].key)}return keys},top:function(){return stack[stack.length-1]},remove:function(key){var idx=-1;for(var i=0;i<stack.length;i++){if(key===stack[i].key){idx=i;break}}return stack.splice(idx,1)[0]},removeTop:function(){return stack.pop()},length:function(){return stack.length}}}}});angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var resolve=this;this.resolver=null;this.setResolver=function(resolver){this.resolver=resolver};this.$get=["$injector","$q",function($injector,$q){var resolver=resolve.resolver?$injector.get(resolve.resolver):null;return{resolve:function(invocables,locals,parent,self){if(resolver){return resolver.resolve(invocables,locals,parent,self)}var promises=[];angular.forEach(invocables,function(value){if(angular.isFunction(value)||angular.isArray(value)){promises.push($q.resolve($injector.invoke(value)))}else if(angular.isString(value)){promises.push($q.resolve($injector.get(value)))}else{promises.push($q.resolve(value))}});return $q.all(promises).then(function(resolves){var resolveObj={};var resolveIter=0;angular.forEach(invocables,function(value,key){resolveObj[key]=resolves[resolveIter++]});return resolveObj})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function($animate,$injector,$modalStack){return{restrict:"A",compile:function(tElement,tAttrs){tElement.addClass(tAttrs.backdropClass);return linkFn}};function linkFn(scope,element,attrs){if(attrs.modalInClass){$animate.addClass(element,attrs.modalInClass);scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();if(scope.modalOptions.animation){$animate.removeClass(element,attrs.modalInClass).then(done)}else{done()}})}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function($modalStack,$q,$animateCss,$document){return{scope:{index:"@"},restrict:"A",transclude:true,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"uib/template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowTopClass||"");scope.size=attrs.size;scope.close=function(evt){var modal=$modalStack.getTop();if(modal&&modal.value.backdrop&&modal.value.backdrop!=="static"&&evt.target===evt.currentTarget){evt.preventDefault();evt.stopPropagation();$modalStack.dismiss(modal.key,"backdrop click")}};element.on("click",scope.close);scope.$isRendered=true;var modalRenderDeferObj=$q.defer();scope.$$postDigest(function(){modalRenderDeferObj.resolve()});modalRenderDeferObj.promise.then(function(){var animationPromise=null;if(attrs.modalInClass){animationPromise=$animateCss(element,{addClass:attrs.modalInClass}).start();scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done)})}$q.when(animationPromise).then(function(){var modal=$modalStack.getTop();if(modal){$modalStack.modalRendered(modal.key)}if(!($document[0].activeElement&&element[0].contains($document[0].activeElement))){var inputWithAutofocus=element[0].querySelector("[autofocus]");if(inputWithAutofocus){inputWithAutofocus.focus()}else{element[0].focus()}}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(tElement,tAttrs){if(tAttrs.modalAnimation){tElement.addClass(tAttrs.uibModalAnimationClass)}}}}).directive("uibModalTransclude",["$animate",function($animate){return{link:function(scope,element,attrs,controller,transclude){transclude(scope.$parent,function(clone){element.empty();$animate.enter(clone,element)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function($animate,$animateCss,$document,$compile,$rootScope,$q,$$multiMap,$$stackedMap,$uibPosition){var OPENED_MODAL_CLASS="modal-open";var backdropDomEl,backdropScope;var openedWindows=$$stackedMap.createNew();var openedClasses=$$multiMap.createNew();var $modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"};var topModalIndex=0;var previousTopOpenedModal=null;var ARIA_HIDDEN_ATTRIBUTE_NAME="data-bootstrap-modal-aria-hidden-count";var tabbableSelector="a[href], area[href], input:not([disabled]):not([tabindex='-1']), "+"button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), "+"iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]";var scrollbarPadding;var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name){var separator="-";return name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function isVisible(element){return!!(element.offsetWidth||element.offsetHeight||element.getClientRects().length)}function backdropIndex(){var topBackdropIndex=-1;var opened=openedWindows.keys();for(var i=0;i<opened.length;i++){if(openedWindows.get(opened[i]).value.backdrop){topBackdropIndex=i}}if(topBackdropIndex>-1&&topBackdropIndex<topModalIndex){topBackdropIndex=topModalIndex}return topBackdropIndex}$rootScope.$watch(backdropIndex,function(newBackdropIndex){if(backdropScope){backdropScope.index=newBackdropIndex}});function removeModalWindow(modalInstance,elementToReceiveFocus){var modalWindow=openedWindows.get(modalInstance).value;var appendToElement=modalWindow.appendTo;openedWindows.remove(modalInstance);previousTopOpenedModal=openedWindows.top();if(previousTopOpenedModal){topModalIndex=parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)}removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){var modalBodyClass=modalWindow.openedClass||OPENED_MODAL_CLASS;openedClasses.remove(modalBodyClass,modalInstance);var areAnyOpen=openedClasses.hasKey(modalBodyClass);appendToElement.toggleClass(modalBodyClass,areAnyOpen);if(!areAnyOpen&&scrollbarPadding&&scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth){if(scrollbarPadding.originalRight){appendToElement.css({paddingRight:scrollbarPadding.originalRight+"px"})}else{appendToElement.css({paddingRight:""})}scrollbarPadding=null}toggleTopWindowClass(true)},modalWindow.closedDeferred);checkRemoveBackdrop();if(elementToReceiveFocus&&elementToReceiveFocus.focus){elementToReceiveFocus.focus()}else if(appendToElement.focus){appendToElement.focus()}}function toggleTopWindowClass(toggleSwitch){var modalWindow;if(openedWindows.length()>0){modalWindow=openedWindows.top().value;modalWindow.modalDomEl.toggleClass(modalWindow.windowTopClass||"",toggleSwitch)}}function checkRemoveBackdrop(){if(backdropDomEl&&backdropIndex()===-1){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null});backdropDomEl=undefined;backdropScope=undefined}}function removeAfterAnimate(domEl,scope,done,closedDeferred){var asyncDeferred;var asyncPromise=null;var setIsAsync=function(){if(!asyncDeferred){asyncDeferred=$q.defer();asyncPromise=asyncDeferred.promise}return function asyncDone(){asyncDeferred.resolve()}};scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync);return $q.when(asyncPromise).then(afterAnimating);function afterAnimating(){if(afterAnimating.done){return}afterAnimating.done=true;$animate.leave(domEl).then(function(){if(done){done()}domEl.remove();if(closedDeferred){closedDeferred.resolve()}});scope.$destroy()}}$document.on("keydown",keydownListener);$rootScope.$on("$destroy",function(){$document.off("keydown",keydownListener)});function keydownListener(evt){if(evt.isDefaultPrevented()){return evt}var modal=openedWindows.top();if(modal){switch(evt.which){case 27:{if(modal.value.keyboard){evt.preventDefault();$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")})}break}case 9:{var list=$modalStack.loadFocusElementList(modal);var focusChanged=false;if(evt.shiftKey){if($modalStack.isFocusInFirstItem(evt,list)||$modalStack.isModalFocused(evt,modal)){focusChanged=$modalStack.focusLastFocusableElement(list)}}else{if($modalStack.isFocusInLastItem(evt,list)){focusChanged=$modalStack.focusFirstFocusableElement(list)}}if(focusChanged){evt.preventDefault();evt.stopPropagation()}break}}}}$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement,modalBodyClass=modal.openedClass||OPENED_MODAL_CLASS;toggleTopWindowClass(false);previousTopOpenedModal=openedWindows.top();openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,closedDeferred:modal.closedDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard,openedClass:modal.openedClass,windowTopClass:modal.windowTopClass,animation:modal.animation,appendTo:modal.appendTo});openedClasses.put(modalBodyClass,modalInstance);var appendToElement=modal.appendTo,currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(true);backdropScope.modalOptions=modal;backdropScope.index=currBackdropIndex;backdropDomEl=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');backdropDomEl.attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"});if(modal.backdropClass){backdropDomEl.addClass(modal.backdropClass)}if(modal.animation){backdropDomEl.attr("modal-animation","true")}$compile(backdropDomEl)(backdropScope);$animate.enter(backdropDomEl,appendToElement);if($uibPosition.isScrollable(appendToElement)){scrollbarPadding=$uibPosition.scrollbarPadding(appendToElement);if(scrollbarPadding.heightOverflow&&scrollbarPadding.scrollbarWidth){appendToElement.css({paddingRight:scrollbarPadding.right+"px"})}}}var content;if(modal.component){content=document.createElement(snake_case(modal.component.name));content=angular.element(content);content.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})}else{content=modal.content}topModalIndex=previousTopOpenedModal?parseInt(previousTopOpenedModal.value.modalDomEl.attr("index"),10)+1:0;var angularDomEl=angular.element('<div uib-modal-window="modal-window"></div>');angularDomEl.attr({class:"modal","template-url":modal.windowTemplateUrl,"window-top-class":modal.windowTopClass,role:"dialog","aria-labelledby":modal.ariaLabelledBy,"aria-describedby":modal.ariaDescribedBy,size:modal.size,index:topModalIndex,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(content);if(modal.windowClass){angularDomEl.addClass(modal.windowClass)}if(modal.animation){angularDomEl.attr("modal-animation","true")}appendToElement.addClass(modalBodyClass);if(modal.scope){modal.scope.$$topModalIndex=topModalIndex}$animate.enter($compile(angularDomEl)(modal.scope),appendToElement);openedWindows.top().value.modalDomEl=angularDomEl;openedWindows.top().value.modalOpener=modalOpener;applyAriaHidden(angularDomEl);function applyAriaHidden(el){if(!el||el[0].tagName==="BODY"){return}getSiblings(el).forEach(function(sibling){var elemIsAlreadyHidden=sibling.getAttribute("aria-hidden")==="true",ariaHiddenCount=parseInt(sibling.getAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),10);if(!ariaHiddenCount){ariaHiddenCount=elemIsAlreadyHidden?1:0}sibling.setAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME,ariaHiddenCount+1);sibling.setAttribute("aria-hidden","true")});return applyAriaHidden(el.parent());function getSiblings(el){var children=el.parent()?el.parent().children():[];return Array.prototype.filter.call(children,function(child){return child!==el[0]})}}};function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}function unhideBackgroundElements(){Array.prototype.forEach.call(document.querySelectorAll("["+ARIA_HIDDEN_ATTRIBUTE_NAME+"]"),function(hiddenEl){var ariaHiddenCount=parseInt(hiddenEl.getAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME),10),newHiddenCount=ariaHiddenCount-1;hiddenEl.setAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME,newHiddenCount);if(!newHiddenCount){hiddenEl.removeAttribute(ARIA_HIDDEN_ATTRIBUTE_NAME);hiddenEl.removeAttribute("aria-hidden")}})}$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);unhideBackgroundElements();if(modalWindow&&broadcastClosing(modalWindow,result,true)){modalWindow.value.modalScope.$$uibDestructionScheduled=true;modalWindow.value.deferred.resolve(result);removeModalWindow(modalInstance,modalWindow.value.modalOpener);return true}return!modalWindow};$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);unhideBackgroundElements();if(modalWindow&&broadcastClosing(modalWindow,reason,false)){modalWindow.value.modalScope.$$uibDestructionScheduled=true;modalWindow.value.deferred.reject(reason);removeModalWindow(modalInstance,modalWindow.value.modalOpener);return true}return!modalWindow};$modalStack.dismissAll=function(reason){var topModal=this.getTop();while(topModal&&this.dismiss(topModal.key,reason)){topModal=this.getTop()}};$modalStack.getTop=function(){return openedWindows.top()};$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);if(modalWindow){modalWindow.value.renderDeferred.resolve()}};$modalStack.focusFirstFocusableElement=function(list){if(list.length>0){list[0].focus();return true}return false};$modalStack.focusLastFocusableElement=function(list){if(list.length>0){list[list.length-1].focus();return true}return false};$modalStack.isModalFocused=function(evt,modalWindow){if(evt&&modalWindow){var modalDomEl=modalWindow.value.modalDomEl;if(modalDomEl&&modalDomEl.length){return(evt.target||evt.srcElement)===modalDomEl[0]}}return false};$modalStack.isFocusInFirstItem=function(evt,list){if(list.length>0){return(evt.target||evt.srcElement)===list[0]}return false};$modalStack.isFocusInLastItem=function(evt,list){if(list.length>0){return(evt.target||evt.srcElement)===list[list.length-1]}return false};$modalStack.loadFocusElementList=function(modalWindow){if(modalWindow){var modalDomE1=modalWindow.value.modalDomEl;if(modalDomE1&&modalDomE1.length){var elements=modalDomE1[0].querySelectorAll(tabbableSelector);return elements?Array.prototype.filter.call(elements,function(element){return isVisible(element)}):elements}}};return $modalStack}]).provider("$uibModal",function(){var $modalProvider={options:{animation:true,backdrop:true,keyboard:true},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function($rootScope,$q,$document,$templateRequest,$controller,$uibResolve,$modalStack){var $modal={};function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}var promiseChain=null;$modal.getPromiseChain=function(){return promiseChain};$modal.open=function(modalOptions){var modalResultDeferred=$q.defer();var modalOpenedDeferred=$q.defer();var modalClosedDeferred=$q.defer();var modalRenderDeferred=$q.defer();var modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,closed:modalClosedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result)},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason)}};modalOptions=angular.extend({},$modalProvider.options,modalOptions);modalOptions.resolve=modalOptions.resolve||{};modalOptions.appendTo=modalOptions.appendTo||$document.find("body").eq(0);if(!modalOptions.appendTo.length){throw new Error("appendTo element not found. Make sure that the element passed is in DOM.")}if(!modalOptions.component&&!modalOptions.template&&!modalOptions.templateUrl){throw new Error("One of component or template or templateUrl options is required.")}var templateAndResolvePromise;if(modalOptions.component){templateAndResolvePromise=$q.when($uibResolve.resolve(modalOptions.resolve,{},null,null))}else{templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions),$uibResolve.resolve(modalOptions.resolve,{},null,null)])}function resolveWithTemplate(){return templateAndResolvePromise}var samePromise;samePromise=promiseChain=$q.all([promiseChain]).then(resolveWithTemplate,resolveWithTemplate).then(function resolveSuccess(tplAndVars){var providedScope=modalOptions.scope||$rootScope;var modalScope=providedScope.$new();modalScope.$close=modalInstance.close;modalScope.$dismiss=modalInstance.dismiss;modalScope.$on("$destroy",function(){if(!modalScope.$$uibDestructionScheduled){modalScope.$dismiss("$uibUnscheduledDestruction")}});var modal={scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,closedDeferred:modalClosedDeferred,animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowTopClass:modalOptions.windowTopClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,ariaLabelledBy:modalOptions.ariaLabelledBy,ariaDescribedBy:modalOptions.ariaDescribedBy,size:modalOptions.size,openedClass:modalOptions.openedClass,appendTo:modalOptions.appendTo};var component={};var ctrlInstance,ctrlInstantiate,ctrlLocals={};if(modalOptions.component){constructLocals(component,false,true,false);component.name=modalOptions.component;modal.component=component}else if(modalOptions.controller){constructLocals(ctrlLocals,true,false,true);ctrlInstantiate=$controller(modalOptions.controller,ctrlLocals,true,modalOptions.controllerAs);if(modalOptions.controllerAs&&modalOptions.bindToController){ctrlInstance=ctrlInstantiate.instance;ctrlInstance.$close=modalScope.$close;ctrlInstance.$dismiss=modalScope.$dismiss;angular.extend(ctrlInstance,{$resolve:ctrlLocals.$scope.$resolve},providedScope)}ctrlInstance=ctrlInstantiate();if(angular.isFunction(ctrlInstance.$onInit)){ctrlInstance.$onInit()}}if(!modalOptions.component){modal.content=tplAndVars[0]}$modalStack.open(modalInstance,modal);modalOpenedDeferred.resolve(true);function constructLocals(obj,template,instanceOnScope,injectable){obj.$scope=modalScope;obj.$scope.$resolve={};if(instanceOnScope){obj.$scope.$uibModalInstance=modalInstance}else{obj.$uibModalInstance=modalInstance}var resolves=template?tplAndVars[1]:tplAndVars;angular.forEach(resolves,function(value,key){if(injectable){obj[key]=value}obj.$scope.$resolve[key]=value})}},function resolveError(reason){modalOpenedDeferred.reject(reason);modalResultDeferred.reject(reason)})["finally"](function(){if(promiseChain===samePromise){promiseChain=null}});return modalInstance};return $modal}]};return $modalProvider});angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function($parse){return{create:function(ctrl,$scope,$attrs){ctrl.setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;ctrl.ngModelCtrl={$setViewValue:angular.noop};ctrl._watchers=[];ctrl.init=function(ngModelCtrl,config){ctrl.ngModelCtrl=ngModelCtrl;ctrl.config=config;ngModelCtrl.$render=function(){ctrl.render()};if($attrs.itemsPerPage){ctrl._watchers.push($scope.$parent.$watch($attrs.itemsPerPage,function(value){ctrl.itemsPerPage=parseInt(value,10);$scope.totalPages=ctrl.calculateTotalPages();ctrl.updatePage()}))}else{ctrl.itemsPerPage=config.itemsPerPage}$scope.$watch("totalItems",function(newTotal,oldTotal){if(angular.isDefined(newTotal)||newTotal!==oldTotal){$scope.totalPages=ctrl.calculateTotalPages();ctrl.updatePage()}})};ctrl.calculateTotalPages=function(){var totalPages=ctrl.itemsPerPage<1?1:Math.ceil($scope.totalItems/ctrl.itemsPerPage);return Math.max(totalPages||0,1)};ctrl.render=function(){$scope.page=parseInt(ctrl.ngModelCtrl.$viewValue,10)||1};$scope.selectPage=function(page,evt){if(evt){evt.preventDefault()}var clickAllowed=!$scope.ngDisabled||!evt;if(clickAllowed&&$scope.page!==page&&page>0&&page<=$scope.totalPages){if(evt&&evt.target){evt.target.blur()}ctrl.ngModelCtrl.$setViewValue(page);ctrl.ngModelCtrl.$render()}};$scope.getText=function(key){return $scope[key+"Text"]||ctrl.config[key+"Text"]};$scope.noPrevious=function(){return $scope.page===1};$scope.noNext=function(){return $scope.page===$scope.totalPages};ctrl.updatePage=function(){ctrl.setNumPages($scope.$parent,$scope.totalPages);if($scope.page>$scope.totalPages){$scope.selectPage($scope.totalPages)}else{ctrl.ngModelCtrl.$render()}};$scope.$on("$destroy",function(){while(ctrl._watchers.length){ctrl._watchers.shift()()}})}}}]);angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function($scope,$attrs,uibPaging,uibPagerConfig){$scope.align=angular.isDefined($attrs.align)?$scope.$parent.$eval($attrs.align):uibPagerConfig.align;uibPaging.create(this,$scope,$attrs)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"ยซ Previous",nextText:"Next ยป",align:true}).directive("uibPager",["uibPagerConfig",function(uibPagerConfig){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pager/pager.html"},link:function(scope,element,attrs,ctrls){element.addClass("pager");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl){return}paginationCtrl.init(ngModelCtrl,uibPagerConfig)}}}]);angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function($scope,$attrs,$parse,uibPaging,uibPaginationConfig){var ctrl=this;var maxSize=angular.isDefined($attrs.maxSize)?$scope.$parent.$eval($attrs.maxSize):uibPaginationConfig.maxSize,rotate=angular.isDefined($attrs.rotate)?$scope.$parent.$eval($attrs.rotate):uibPaginationConfig.rotate,forceEllipses=angular.isDefined($attrs.forceEllipses)?$scope.$parent.$eval($attrs.forceEllipses):uibPaginationConfig.forceEllipses,boundaryLinkNumbers=angular.isDefined($attrs.boundaryLinkNumbers)?$scope.$parent.$eval($attrs.boundaryLinkNumbers):uibPaginationConfig.boundaryLinkNumbers,pageLabel=angular.isDefined($attrs.pageLabel)?function(idx){return $scope.$parent.$eval($attrs.pageLabel,{$page:idx})}:angular.identity;$scope.boundaryLinks=angular.isDefined($attrs.boundaryLinks)?$scope.$parent.$eval($attrs.boundaryLinks):uibPaginationConfig.boundaryLinks;$scope.directionLinks=angular.isDefined($attrs.directionLinks)?$scope.$parent.$eval($attrs.directionLinks):uibPaginationConfig.directionLinks;$attrs.$set("role","menu");uibPaging.create(this,$scope,$attrs);if($attrs.maxSize){ctrl._watchers.push($scope.$parent.$watch($parse($attrs.maxSize),function(value){maxSize=parseInt(value,10);ctrl.render()}))}function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[];var startPage=1,endPage=totalPages;var isMaxSized=angular.isDefined(maxSize)&&maxSize<totalPages;if(isMaxSized){if(rotate){startPage=Math.max(currentPage-Math.floor(maxSize/2),1);endPage=startPage+maxSize-1;if(endPage>totalPages){endPage=totalPages;startPage=endPage-maxSize+1}}else{startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1;endPage=Math.min(startPage+maxSize-1,totalPages)}}for(var number=startPage;number<=endPage;number++){var page=makePage(number,pageLabel(number),number===currentPage);pages.push(page)}if(isMaxSized&&maxSize>0&&(!rotate||forceEllipses||boundaryLinkNumbers)){if(startPage>1){if(!boundaryLinkNumbers||startPage>3){var previousPageSet=makePage(startPage-1,"...",false);pages.unshift(previousPageSet)}if(boundaryLinkNumbers){if(startPage===3){var secondPageLink=makePage(2,"2",false);pages.unshift(secondPageLink)}var firstPageLink=makePage(1,"1",false);pages.unshift(firstPageLink)}}if(endPage<totalPages){if(!boundaryLinkNumbers||endPage<totalPages-2){var nextPageSet=makePage(endPage+1,"...",false);pages.push(nextPageSet)}if(boundaryLinkNumbers){if(endPage===totalPages-2){var secondToLastPageLink=makePage(totalPages-1,totalPages-1,false);pages.push(secondToLastPageLink)}var lastPageLink=makePage(totalPages,totalPages,false);pages.push(lastPageLink)}}}return pages}var originalRender=this.render;this.render=function(){originalRender();if($scope.page>0&&$scope.page<=$scope.totalPages){$scope.pages=getPages($scope.page,$scope.totalPages)}}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:false,boundaryLinkNumbers:false,directionLinks:true,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:true,forceEllipses:false}).directive("uibPagination",["$parse","uibPaginationConfig",function($parse,uibPaginationConfig){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/pagination/pagination.html"},link:function(scope,element,attrs,ctrls){element.addClass("pagination");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(!ngModelCtrl){return}paginationCtrl.init(ngModelCtrl,uibPaginationConfig)}}}]);angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){var defaultOptions={placement:"top",placementClassPrefix:"",animation:true,popupDelay:0,popupCloseDelay:0,useContentExp:false};var triggerMap={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""};var globalOptions={};this.options=function(value){angular.extend(globalOptions,value)};this.setTriggers=function setTriggers(triggers){angular.extend(triggerMap,triggers)};function snake_case(name){var regexp=/[A-Z]/g;var separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function($window,$compile,$timeout,$document,$position,$interpolate,$rootScope,$parse,$$stackedMap){var openedTooltips=$$stackedMap.createNew();$document.on("keyup",keypressListener);$rootScope.$on("$destroy",function(){$document.off("keyup",keypressListener)});function keypressListener(e){if(e.which===27){var last=openedTooltips.top();if(last){last.value.close();last=null}}}return function $tooltip(ttType,prefix,defaultTriggerShow,options){options=angular.extend({},defaultOptions,globalOptions,options);function getTriggers(trigger){var show=(trigger||options.trigger||defaultTriggerShow).split(" ");var hide=show.map(function(trigger){return triggerMap[trigger]||trigger});return{show:show,hide:hide}}var directiveName=snake_case(ttType);var startSym=$interpolate.startSymbol();var endSym=$interpolate.endSymbol();var template="<div "+directiveName+"-popup "+'uib-title="'+startSym+"title"+endSym+'" '+(options.useContentExp?'content-exp="contentExp()" ':'content="'+startSym+"content"+endSym+'" ')+'origin-scope="origScope" '+'class="uib-position-measure '+prefix+'" '+'tooltip-animation-class="fade"'+"uib-tooltip-classes "+'ng-class="{ in: isOpen }" '+">"+"</div>";return{compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function link(scope,element,attrs,tooltipCtrl){var tooltip;var tooltipLinkedScope;var transitionTimeout;var showTimeout;var hideTimeout;var positionTimeout;var adjustmentTimeout;var appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:false;var triggers=getTriggers(undefined);var hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]);var ttScope=scope.$new(true);var repositionScheduled=false;var isOpenParse=angular.isDefined(attrs[prefix+"IsOpen"])?$parse(attrs[prefix+"IsOpen"]):false;var contentParse=options.useContentExp?$parse(attrs[ttType]):false;var observers=[];var lastPlacement;var positionTooltip=function(){if(!tooltip||!tooltip.html()){return}if(!positionTimeout){positionTimeout=$timeout(function(){var ttPosition=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);var initialHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight");var elementPos=appendToBody?$position.offset(element):$position.position(element);tooltip.css({top:ttPosition.top+"px",left:ttPosition.left+"px"});var placementClasses=ttPosition.placement.split("-");if(!tooltip.hasClass(placementClasses[0])){tooltip.removeClass(lastPlacement.split("-")[0]);tooltip.addClass(placementClasses[0])}if(!tooltip.hasClass(options.placementClassPrefix+ttPosition.placement)){tooltip.removeClass(options.placementClassPrefix+lastPlacement);tooltip.addClass(options.placementClassPrefix+ttPosition.placement)}adjustmentTimeout=$timeout(function(){var currentHeight=angular.isDefined(tooltip.offsetHeight)?tooltip.offsetHeight:tooltip.prop("offsetHeight");var adjustment=$position.adjustTop(placementClasses,elementPos,initialHeight,currentHeight);if(adjustment){tooltip.css(adjustment)}adjustmentTimeout=null},0,false);if(tooltip.hasClass("uib-position-measure")){$position.positionArrow(tooltip,ttPosition.placement);tooltip.removeClass("uib-position-measure")}else if(lastPlacement!==ttPosition.placement){$position.positionArrow(tooltip,ttPosition.placement)}lastPlacement=ttPosition.placement;positionTimeout=null},0,false)}};ttScope.origScope=scope;ttScope.isOpen=false;function toggleTooltipBind(){if(!ttScope.isOpen){showTooltipBind()}else{hideTooltipBind()}}function showTooltipBind(){if(hasEnableExp&&!scope.$eval(attrs[prefix+"Enable"])){return}cancelHide();prepareTooltip();if(ttScope.popupDelay){if(!showTimeout){showTimeout=$timeout(show,ttScope.popupDelay,false)}}else{show()}}function hideTooltipBind(){cancelShow();if(ttScope.popupCloseDelay){if(!hideTimeout){hideTimeout=$timeout(hide,ttScope.popupCloseDelay,false)}}else{hide()}}function show(){cancelShow();cancelHide();if(!ttScope.content){return angular.noop}createTooltip();ttScope.$evalAsync(function(){ttScope.isOpen=true;assignIsOpen(true);positionTooltip()})}function cancelShow(){if(showTimeout){$timeout.cancel(showTimeout);showTimeout=null}if(positionTimeout){$timeout.cancel(positionTimeout);positionTimeout=null}}function hide(){if(!ttScope){return}ttScope.$evalAsync(function(){if(ttScope){ttScope.isOpen=false;assignIsOpen(false);if(ttScope.animation){if(!transitionTimeout){transitionTimeout=$timeout(removeTooltip,150,false)}}else{removeTooltip()}}})}function cancelHide(){if(hideTimeout){$timeout.cancel(hideTimeout);hideTimeout=null}if(transitionTimeout){$timeout.cancel(transitionTimeout);transitionTimeout=null}}function createTooltip(){if(tooltip){return}tooltipLinkedScope=ttScope.$new();tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){if(appendToBody){$document.find("body").append(tooltip)}else{element.after(tooltip)}});openedTooltips.add(ttScope,{close:hide});prepObservers()}function removeTooltip(){cancelShow();cancelHide();unregisterObservers();if(tooltip){tooltip.remove();tooltip=null;if(adjustmentTimeout){$timeout.cancel(adjustmentTimeout)}}openedTooltips.remove(ttScope);if(tooltipLinkedScope){tooltipLinkedScope.$destroy();tooltipLinkedScope=null}}function prepareTooltip(){ttScope.title=attrs[prefix+"Title"];if(contentParse){ttScope.content=contentParse(scope)}else{ttScope.content=attrs[ttType]}ttScope.popupClass=attrs[prefix+"Class"];ttScope.placement=angular.isDefined(attrs[prefix+"Placement"])?attrs[prefix+"Placement"]:options.placement;var placement=$position.parsePlacement(ttScope.placement);lastPlacement=placement[1]?placement[0]+"-"+placement[1]:placement[0];var delay=parseInt(attrs[prefix+"PopupDelay"],10);var closeDelay=parseInt(attrs[prefix+"PopupCloseDelay"],10);ttScope.popupDelay=!isNaN(delay)?delay:options.popupDelay;ttScope.popupCloseDelay=!isNaN(closeDelay)?closeDelay:options.popupCloseDelay}function assignIsOpen(isOpen){if(isOpenParse&&angular.isFunction(isOpenParse.assign)){isOpenParse.assign(scope,isOpen)}}ttScope.contentExp=function(){return ttScope.content};attrs.$observe("disabled",function(val){if(val){cancelShow()}if(val&&ttScope.isOpen){hide()}});if(isOpenParse){scope.$watch(isOpenParse,function(val){if(ttScope&&!val===ttScope.isOpen){toggleTooltipBind()}})}function prepObservers(){observers.length=0;if(contentParse){observers.push(scope.$watch(contentParse,function(val){ttScope.content=val;if(!val&&ttScope.isOpen){hide()}}));observers.push(tooltipLinkedScope.$watch(function(){if(!repositionScheduled){repositionScheduled=true;tooltipLinkedScope.$$postDigest(function(){repositionScheduled=false;if(ttScope&&ttScope.isOpen){positionTooltip()}})}}))}else{observers.push(attrs.$observe(ttType,function(val){ttScope.content=val;if(!val&&ttScope.isOpen){hide()}else{positionTooltip()}}))}observers.push(attrs.$observe(prefix+"Title",function(val){ttScope.title=val;if(ttScope.isOpen){positionTooltip()}}));observers.push(attrs.$observe(prefix+"Placement",function(val){ttScope.placement=val?val:options.placement;if(ttScope.isOpen){positionTooltip()}}))}function unregisterObservers(){if(observers.length){angular.forEach(observers,function(observer){observer()});observers.length=0}}function bodyHideTooltipBind(e){if(!ttScope||!ttScope.isOpen||!tooltip){return}if(!element[0].contains(e.target)&&!tooltip[0].contains(e.target)){hideTooltipBind()}}function hideOnEscapeKey(e){if(e.which===27){hideTooltipBind()}}var unregisterTriggers=function(){triggers.show.forEach(function(trigger){if(trigger==="outsideClick"){element.off("click",toggleTooltipBind)}else{element.off(trigger,showTooltipBind);element.off(trigger,toggleTooltipBind)}element.off("keypress",hideOnEscapeKey)});triggers.hide.forEach(function(trigger){if(trigger==="outsideClick"){$document.off("click",bodyHideTooltipBind)}else{element.off(trigger,hideTooltipBind)}})};function prepTriggers(){var showTriggers=[],hideTriggers=[];var val=scope.$eval(attrs[prefix+"Trigger"]);unregisterTriggers();if(angular.isObject(val)){Object.keys(val).forEach(function(key){showTriggers.push(key);hideTriggers.push(val[key])});triggers={show:showTriggers,hide:hideTriggers}}else{triggers=getTriggers(val)}if(triggers.show!=="none"){triggers.show.forEach(function(trigger,idx){if(trigger==="outsideClick"){element.on("click",toggleTooltipBind);$document.on("click",bodyHideTooltipBind)}else if(trigger===triggers.hide[idx]){element.on(trigger,toggleTooltipBind)}else if(trigger){element.on(trigger,showTooltipBind);element.on(triggers.hide[idx],hideTooltipBind)}element.on("keypress",hideOnEscapeKey)})}}prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal;var appendKey=prefix+"AppendToBody";if(appendKey in attrs&&attrs[appendKey]===undefined){appendToBodyVal=true}else{appendToBodyVal=scope.$eval(attrs[appendKey])}appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody;scope.$on("$destroy",function onDestroyTooltip(){unregisterTriggers();removeTooltip();ttScope=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function($animate,$sce,$compile,$templateRequest){return{link:function(scope,elem,attrs){var origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope);var changeCounter=0,currentScope,previousElement,currentElement;var cleanupLastIncludeContent=function(){if(previousElement){previousElement.remove();previousElement=null}if(currentScope){currentScope.$destroy();currentScope=null}if(currentElement){$animate.leave(currentElement).then(function(){previousElement=null});previousElement=currentElement;currentElement=null}};scope.$watch($sce.parseAsResourceUrl(attrs.uibTooltipTemplateTransclude),function(src){var thisChangeId=++changeCounter;if(src){$templateRequest(src,true).then(function(response){if(thisChangeId!==changeCounter){return}var newScope=origScope.$new();var template=response;var clone=$compile(template)(newScope,function(clone){cleanupLastIncludeContent();$animate.enter(clone,elem)});currentScope=newScope;currentElement=clone;currentScope.$emit("$includeContentLoaded",src)},function(){if(thisChangeId===changeCounter){cleanupLastIncludeContent();scope.$emit("$includeContentError",src)}});scope.$emit("$includeContentRequested",src)}else{cleanupLastIncludeContent()}});scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("uibTooltipClasses",["$uibPosition",function($uibPosition){return{restrict:"A",link:function(scope,element,attrs){if(scope.placement){var position=$uibPosition.parsePlacement(scope.placement);element.addClass(position[0])}if(scope.popupClass){element.addClass(scope.popupClass)}if(scope.animation){element.addClass(attrs.tooltipAnimationClass)}}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:true})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipHtml","tooltip","mouseenter",{useContentExp:true})}]);angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverTemplate","popover","click",{useContentExp:true})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverHtml","popover","click",{useContentExp:true})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopover","popover","click")}]);angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:true,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[];$scope.max=getMaxOrDefault();this.addBar=function(bar,element,attrs){if(!animate){element.css({transition:"none"})}this.bars.push(bar);bar.max=getMaxOrDefault();bar.title=attrs&&angular.isDefined(attrs.title)?attrs.title:"progressbar";bar.$watch("value",function(value){bar.recalculatePercentage()});bar.recalculatePercentage=function(){var totalPercentage=self.bars.reduce(function(total,bar){bar.percent=+(100*bar.value/bar.max).toFixed(2);return total+bar.percent},0);if(totalPercentage>100){bar.percent-=totalPercentage-100}};bar.$on("$destroy",function(){element=null;self.removeBar(bar)})};this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1);this.bars.forEach(function(bar){bar.recalculatePercentage()})};$scope.$watch("maxParam",function(maxParam){self.bars.forEach(function(bar){bar.max=getMaxOrDefault();bar.recalculatePercentage()})});function getMaxOrDefault(){return angular.isDefined($scope.maxParam)?$scope.maxParam:progressConfig.max}}]).directive("uibProgress",function(){return{replace:true,transclude:true,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:true,transclude:true,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element,attrs)}}}).directive("uibProgressbar",function(){return{replace:true,transclude:true,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]),{title:attrs.title})}}});angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:true,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop},self=this;this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;ngModelCtrl.$formatters.push(function(value){if(angular.isNumber(value)&&value<<0!==value){value=Math.round(value)}return value});this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn;this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;this.enableReset=angular.isDefined($attrs.enableReset)?$scope.$parent.$eval($attrs.enableReset):ratingConfig.enableReset;var tmpTitles=angular.isDefined($attrs.titles)?$scope.$parent.$eval($attrs.titles):ratingConfig.titles;this.titles=angular.isArray(tmpTitles)&&tmpTitles.length>0?tmpTitles:ratingConfig.titles;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)};this.buildTemplateObjects=function(states){for(var i=0,n=states.length;i<n;i++){states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(i)},states[i])}return states};this.getTitle=function(index){if(index>=this.titles.length){return index+1}return this.titles[index]};$scope.rate=function(value){if(!$scope.readonly&&value>=0&&value<=$scope.range.length){var newViewValue=self.enableReset&&ngModelCtrl.$viewValue===value?0:value;ngModelCtrl.$setViewValue(newViewValue);ngModelCtrl.$render()}};$scope.enter=function(value){if(!$scope.readonly){$scope.value=value}$scope.onHover({value:value})};$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue;$scope.onLeave()};$scope.onKeydown=function(evt){if(/(37|38|39|40)/.test(evt.which)){evt.preventDefault();evt.stopPropagation();$scope.rate($scope.value+(evt.which===38||evt.which===39?1:-1))}};this.render=function(){$scope.value=ngModelCtrl.$viewValue;$scope.title=self.getTitle($scope.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}});angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function($scope){var ctrl=this,oldIndex;ctrl.tabs=[];ctrl.select=function(index,evt){if(!destroyed){var previousIndex=findTabIndex(oldIndex);var previousSelected=ctrl.tabs[previousIndex];if(previousSelected){previousSelected.tab.onDeselect({$event:evt,$selectedIndex:index});if(evt&&evt.isDefaultPrevented()){return}previousSelected.tab.active=false}var selected=ctrl.tabs[index];if(selected){selected.tab.onSelect({$event:evt});selected.tab.active=true;ctrl.active=selected.index;oldIndex=selected.index}else if(!selected&&angular.isDefined(oldIndex)){ctrl.active=null;oldIndex=null}}};ctrl.addTab=function addTab(tab){ctrl.tabs.push({tab:tab,index:tab.index});ctrl.tabs.sort(function(t1,t2){if(t1.index>t2.index){return 1}if(t1.index<t2.index){return-1}return 0});if(tab.index===ctrl.active||!angular.isDefined(ctrl.active)&&ctrl.tabs.length===1){var newActiveIndex=findTabIndex(tab.index);ctrl.select(newActiveIndex)}};ctrl.removeTab=function removeTab(tab){var index;for(var i=0;i<ctrl.tabs.length;i++){if(ctrl.tabs[i].tab===tab){index=i;break}}if(ctrl.tabs[index].index===ctrl.active){var newActiveTabIndex=index===ctrl.tabs.length-1?index-1:index+1%ctrl.tabs.length;ctrl.select(newActiveTabIndex)}ctrl.tabs.splice(index,1)};$scope.$watch("tabset.active",function(val){if(angular.isDefined(val)&&val!==oldIndex){ctrl.select(findTabIndex(val))}});var destroyed;$scope.$on("$destroy",function(){destroyed=true});function findTabIndex(index){for(var i=0;i<ctrl.tabs.length;i++){if(ctrl.tabs[i].index===index){return i}}}}]).directive("uibTabset",function(){return{transclude:true,replace:true,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tabset.html"},link:function(scope,element,attrs){scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):false;scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):false}}}).directive("uibTab",["$parse",function($parse){return{require:"^uibTabset",replace:true,templateUrl:function(element,attrs){return attrs.templateUrl||"uib/template/tabs/tab.html"},transclude:true,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(scope,elm,attrs,tabsetCtrl,transclude){scope.disabled=false;if(attrs.disable){scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value})}if(angular.isUndefined(attrs.index)){if(tabsetCtrl.tabs&&tabsetCtrl.tabs.length){scope.index=Math.max.apply(null,tabsetCtrl.tabs.map(function(t){return t.index}))+1}else{scope.index=0}}if(angular.isUndefined(attrs.classes)){scope.classes=""}scope.select=function(evt){if(!scope.disabled){var index;for(var i=0;i<tabsetCtrl.tabs.length;i++){if(tabsetCtrl.tabs[i].tab===scope){index=i;break}}tabsetCtrl.select(index,evt)}};tabsetCtrl.addTab(scope);scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)});scope.$transcludeFn=transclude}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(scope,elm){scope.$watch("headingElement",function updateHeadingElement(heading){if(heading){elm.html("");elm.append(heading)}})}}}).directive("uibTabContentTransclude",function(){return{restrict:"A",require:"^uibTabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.uibTabContentTransclude).tab;tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){if(isTabHeading(node)){tab.headingElement=node}else{elm.append(node)}})})}};function isTabHeading(node){return node.tagName&&(node.hasAttribute("uib-tab-heading")||node.hasAttribute("data-uib-tab-heading")||node.hasAttribute("x-uib-tab-heading")||node.tagName.toLowerCase()==="uib-tab-heading"||node.tagName.toLowerCase()==="data-uib-tab-heading"||node.tagName.toLowerCase()==="x-uib-tab-heading"||node.tagName.toLowerCase()==="uib:tab-heading")}});angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:true,showSeconds:false,meridians:null,readonlyInput:false,mousewheel:true,arrowkeys:true,showSpinners:true,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function($scope,$element,$attrs,$parse,$log,$locale,timepickerConfig){var hoursModelCtrl,minutesModelCtrl,secondsModelCtrl;var selected=new Date,watchers=[],ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS,padHours=angular.isDefined($attrs.padHours)?$scope.$parent.$eval($attrs.padHours):true;$scope.tabindex=angular.isDefined($attrs.tabindex)?$attrs.tabindex:0;$element.removeAttr("tabindex");this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_;ngModelCtrl.$render=this.render;ngModelCtrl.$formatters.unshift(function(modelValue){return modelValue?new Date(modelValue):null});var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),secondsInputEl=inputs.eq(2);hoursModelCtrl=hoursInputEl.controller("ngModel");minutesModelCtrl=minutesInputEl.controller("ngModel");secondsModelCtrl=secondsInputEl.controller("ngModel");var mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;if(mousewheel){this.setupMousewheelEvents(hoursInputEl,minutesInputEl,secondsInputEl)}var arrowkeys=angular.isDefined($attrs.arrowkeys)?$scope.$parent.$eval($attrs.arrowkeys):timepickerConfig.arrowkeys;if(arrowkeys){this.setupArrowkeyEvents(hoursInputEl,minutesInputEl,secondsInputEl)}$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput;this.setupInputEvents(hoursInputEl,minutesInputEl,secondsInputEl)};var hourStep=timepickerConfig.hourStep;if($attrs.hourStep){watchers.push($scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=+value}))}var minuteStep=timepickerConfig.minuteStep;if($attrs.minuteStep){watchers.push($scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=+value}))}var min;watchers.push($scope.$parent.$watch($parse($attrs.min),function(value){var dt=new Date(value);min=isNaN(dt)?undefined:dt}));var max;watchers.push($scope.$parent.$watch($parse($attrs.max),function(value){var dt=new Date(value);max=isNaN(dt)?undefined:dt}));var disabled=false;if($attrs.ngDisabled){watchers.push($scope.$parent.$watch($parse($attrs.ngDisabled),function(value){disabled=value}))}$scope.noIncrementHours=function(){var incrementedSelected=addMinutes(selected,hourStep*60);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min};$scope.noDecrementHours=function(){var decrementedSelected=addMinutes(selected,-hourStep*60);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max};$scope.noIncrementMinutes=function(){var incrementedSelected=addMinutes(selected,minuteStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min};$scope.noDecrementMinutes=function(){var decrementedSelected=addMinutes(selected,-minuteStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max};$scope.noIncrementSeconds=function(){var incrementedSelected=addSeconds(selected,secondStep);return disabled||incrementedSelected>max||incrementedSelected<selected&&incrementedSelected<min};$scope.noDecrementSeconds=function(){var decrementedSelected=addSeconds(selected,-secondStep);return disabled||decrementedSelected<min||decrementedSelected>selected&&decrementedSelected>max};$scope.noToggleMeridian=function(){if(selected.getHours()<12){return disabled||addMinutes(selected,12*60)>max}return disabled||addMinutes(selected,-12*60)<min};var secondStep=timepickerConfig.secondStep;if($attrs.secondStep){watchers.push($scope.$parent.$watch($parse($attrs.secondStep),function(value){secondStep=+value}))}$scope.showSeconds=timepickerConfig.showSeconds;if($attrs.showSeconds){watchers.push($scope.$parent.$watch($parse($attrs.showSeconds),function(value){$scope.showSeconds=!!value}))}$scope.showMeridian=timepickerConfig.showMeridian;if($attrs.showMeridian){watchers.push($scope.$parent.$watch($parse($attrs.showMeridian),function(value){$scope.showMeridian=!!value;if(ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();if(angular.isDefined(hours)&&angular.isDefined(minutes)){selected.setHours(hours);refresh()}}else{updateTemplate()}}))}function getHoursFromTemplate(){var hours=+$scope.hours;var valid=$scope.showMeridian?hours>0&&hours<13:hours>=0&&hours<24;if(!valid||$scope.hours===""){return undefined}if($scope.showMeridian){if(hours===12){hours=0}if($scope.meridian===meridians[1]){hours=hours+12}}return hours}function getMinutesFromTemplate(){var minutes=+$scope.minutes;var valid=minutes>=0&&minutes<60;if(!valid||$scope.minutes===""){return undefined}return minutes}function getSecondsFromTemplate(){var seconds=+$scope.seconds;return seconds>=0&&seconds<60?seconds:undefined}function pad(value,noPad){if(value===null){return""}return angular.isDefined(value)&&value.toString().length<2&&!noPad?"0"+value:value.toString()}this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){var isScrollingUp=function(e){if(e.originalEvent){e=e.originalEvent}var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.on("mousewheel wheel",function(e){if(!disabled){$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours())}e.preventDefault()});minutesInputEl.on("mousewheel wheel",function(e){if(!disabled){$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes())}e.preventDefault()});secondsInputEl.on("mousewheel wheel",function(e){if(!disabled){$scope.$apply(isScrollingUp(e)?$scope.incrementSeconds():$scope.decrementSeconds())}e.preventDefault()})};this.setupArrowkeyEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){hoursInputEl.on("keydown",function(e){if(!disabled){if(e.which===38){e.preventDefault();$scope.incrementHours();$scope.$apply()}else if(e.which===40){e.preventDefault();$scope.decrementHours();$scope.$apply()}}});minutesInputEl.on("keydown",function(e){if(!disabled){if(e.which===38){e.preventDefault();$scope.incrementMinutes();$scope.$apply()}else if(e.which===40){e.preventDefault();$scope.decrementMinutes();$scope.$apply()}}});secondsInputEl.on("keydown",function(e){if(!disabled){if(e.which===38){e.preventDefault();$scope.incrementSeconds();$scope.$apply()}else if(e.which===40){e.preventDefault();$scope.decrementSeconds();$scope.$apply()}}})};this.setupInputEvents=function(hoursInputEl,minutesInputEl,secondsInputEl){if($scope.readonlyInput){$scope.updateHours=angular.noop;$scope.updateMinutes=angular.noop;$scope.updateSeconds=angular.noop;return}var invalidate=function(invalidHours,invalidMinutes,invalidSeconds){ngModelCtrl.$setViewValue(null);ngModelCtrl.$setValidity("time",false);if(angular.isDefined(invalidHours)){$scope.invalidHours=invalidHours;if(hoursModelCtrl){hoursModelCtrl.$setValidity("hours",false)}}if(angular.isDefined(invalidMinutes)){$scope.invalidMinutes=invalidMinutes;if(minutesModelCtrl){minutesModelCtrl.$setValidity("minutes",false)}}if(angular.isDefined(invalidSeconds)){$scope.invalidSeconds=invalidSeconds;if(secondsModelCtrl){secondsModelCtrl.$setValidity("seconds",false)}}};$scope.updateHours=function(){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();ngModelCtrl.$setDirty();if(angular.isDefined(hours)&&angular.isDefined(minutes)){selected.setHours(hours);selected.setMinutes(minutes);if(selected<min||selected>max){invalidate(true)}else{refresh("h")}}else{invalidate(true)}};hoursInputEl.on("blur",function(e){ngModelCtrl.$setTouched();if(modelIsEmpty()){makeValid()}else if($scope.hours===null||$scope.hours===""){invalidate(true)}else if(!$scope.invalidHours&&$scope.hours<10){$scope.$apply(function(){$scope.hours=pad($scope.hours,!padHours)})}});$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();ngModelCtrl.$setDirty();if(angular.isDefined(minutes)&&angular.isDefined(hours)){selected.setHours(hours);selected.setMinutes(minutes);if(selected<min||selected>max){invalidate(undefined,true)}else{refresh("m")}}else{invalidate(undefined,true)}};minutesInputEl.on("blur",function(e){ngModelCtrl.$setTouched();if(modelIsEmpty()){makeValid()}else if($scope.minutes===null){invalidate(undefined,true)}else if(!$scope.invalidMinutes&&$scope.minutes<10){$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})}});$scope.updateSeconds=function(){var seconds=getSecondsFromTemplate();ngModelCtrl.$setDirty();if(angular.isDefined(seconds)){selected.setSeconds(seconds);refresh("s")}else{invalidate(undefined,undefined,true)}};secondsInputEl.on("blur",function(e){if(modelIsEmpty()){makeValid()}else if(!$scope.invalidSeconds&&$scope.seconds<10){$scope.$apply(function(){$scope.seconds=pad($scope.seconds)})}})};this.render=function(){var date=ngModelCtrl.$viewValue;if(isNaN(date)){ngModelCtrl.$setValidity("time",false);$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}else{if(date){selected=date}if(selected<min||selected>max){ngModelCtrl.$setValidity("time",false);$scope.invalidHours=true;$scope.invalidMinutes=true}else{makeValid()}updateTemplate()}};function refresh(keyboardChange){makeValid();ngModelCtrl.$setViewValue(new Date(selected));updateTemplate(keyboardChange)}function makeValid(){if(hoursModelCtrl){hoursModelCtrl.$setValidity("hours",true)}if(minutesModelCtrl){minutesModelCtrl.$setValidity("minutes",true)}if(secondsModelCtrl){secondsModelCtrl.$setValidity("seconds",true)}ngModelCtrl.$setValidity("time",true);$scope.invalidHours=false;$scope.invalidMinutes=false;$scope.invalidSeconds=false}function updateTemplate(keyboardChange){if(!ngModelCtrl.$modelValue){$scope.hours=null;$scope.minutes=null;$scope.seconds=null;$scope.meridian=meridians[0]}else{var hours=selected.getHours(),minutes=selected.getMinutes(),seconds=selected.getSeconds();if($scope.showMeridian){hours=hours===0||hours===12?12:hours%12}$scope.hours=keyboardChange==="h"?hours:pad(hours,!padHours);if(keyboardChange!=="m"){$scope.minutes=pad(minutes)}$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1];if(keyboardChange!=="s"){$scope.seconds=pad(seconds)}$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}}function addSecondsToSelected(seconds){selected=addSeconds(selected,seconds);refresh()}function addMinutes(selected,minutes){return addSeconds(selected,minutes*60)}function addSeconds(date,seconds){var dt=new Date(date.getTime()+seconds*1e3);var newDate=new Date(date);newDate.setHours(dt.getHours(),dt.getMinutes(),dt.getSeconds());return newDate}function modelIsEmpty(){return($scope.hours===null||$scope.hours==="")&&($scope.minutes===null||$scope.minutes==="")&&(!$scope.showSeconds||$scope.showSeconds&&($scope.seconds===null||$scope.seconds===""))}$scope.showSpinners=angular.isDefined($attrs.showSpinners)?$scope.$parent.$eval($attrs.showSpinners):timepickerConfig.showSpinners;$scope.incrementHours=function(){if(!$scope.noIncrementHours()){addSecondsToSelected(hourStep*60*60)}};$scope.decrementHours=function(){if(!$scope.noDecrementHours()){addSecondsToSelected(-hourStep*60*60)}};$scope.incrementMinutes=function(){if(!$scope.noIncrementMinutes()){addSecondsToSelected(minuteStep*60)}};$scope.decrementMinutes=function(){if(!$scope.noDecrementMinutes()){addSecondsToSelected(-minuteStep*60)}};$scope.incrementSeconds=function(){if(!$scope.noIncrementSeconds()){addSecondsToSelected(secondStep)}};$scope.decrementSeconds=function(){if(!$scope.noDecrementSeconds()){addSecondsToSelected(-secondStep)}};$scope.toggleMeridian=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();if(!$scope.noToggleMeridian()){if(angular.isDefined(minutes)&&angular.isDefined(hours)){addSecondsToSelected(12*60*(selected.getHours()<12?60:-60))}else{$scope.meridian=$scope.meridian===meridians[0]?meridians[1]:meridians[0]}}};$scope.blur=function(){ngModelCtrl.$setTouched()};$scope.$on("$destroy",function(){while(watchers.length){watchers.shift()()}})}]).directive("uibTimepicker",["uibTimepickerConfig",function(uibTimepickerConfig){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(element,attrs){return attrs.templateUrl||uibTimepickerConfig.templateUrl},link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}}]);angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match){throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_"'+' but got "'+input+'".')}return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(originalScope,element,attrs,$compile,$parse,$q,$timeout,$document,$window,$rootScope,$$debounce,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40];var eventDebounceTime=200;var modelCtrl,ngModelOptions;var minLength=originalScope.$eval(attrs.typeaheadMinLength);if(!minLength&&minLength!==0){minLength=1}originalScope.$watch(attrs.typeaheadMinLength,function(newVal){minLength=!newVal&&newVal!==0?1:newVal});var waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0;var isEditable=originalScope.$eval(attrs.typeaheadEditable)!==false;originalScope.$watch(attrs.typeaheadEditable,function(newVal){isEditable=newVal!==false});var isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop;var isSelectEvent=attrs.typeaheadShouldSelect?$parse(attrs.typeaheadShouldSelect):function(scope,vals){var evt=vals.$event;return evt.which===13||evt.which===9};var onSelectCallback=$parse(attrs.typeaheadOnSelect);var isSelectOnBlur=angular.isDefined(attrs.typeaheadSelectOnBlur)?originalScope.$eval(attrs.typeaheadSelectOnBlur):false;var isNoResultsSetter=$parse(attrs.typeaheadNoResults).assign||angular.noop;var inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):undefined;var appendToBody=attrs.typeaheadAppendToBody?originalScope.$eval(attrs.typeaheadAppendToBody):false;var appendTo=attrs.typeaheadAppendTo?originalScope.$eval(attrs.typeaheadAppendTo):null;var focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==false;var selectOnExact=attrs.typeaheadSelectOnExact?originalScope.$eval(attrs.typeaheadSelectOnExact):false;var isOpenSetter=$parse(attrs.typeaheadIsOpen).assign||angular.noop;var showHint=originalScope.$eval(attrs.typeaheadShowHint)||false;var parsedModel=$parse(attrs.ngModel);var invokeModelSetter=$parse(attrs.ngModel+"($$$p)");var $setModelValue=function(scope,newValue){if(angular.isFunction(parsedModel(originalScope))&&ngModelOptions.getOption("getterSetter")){return invokeModelSetter(scope,{$$$p:newValue})}return parsedModel.assign(scope,newValue)};var parserResult=typeaheadParser.parse(attrs.uibTypeahead);var hasFocus;var selected;var scope=originalScope.$new();var offDestroy=originalScope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy);var popupId="typeahead-"+scope.$id+"-"+Math.floor(Math.random()*1e4);element.attr({"aria-autocomplete":"list","aria-expanded":false,"aria-owns":popupId});var inputsContainer,hintInputElem;if(showHint){inputsContainer=angular.element("<div></div>");inputsContainer.css("position","relative");element.after(inputsContainer);hintInputElem=element.clone();hintInputElem.attr("placeholder","");hintInputElem.attr("tabindex","-1");hintInputElem.val("");hintInputElem.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"});element.css({position:"relative","vertical-align":"top","background-color":"transparent"});if(hintInputElem.attr("id")){hintInputElem.removeAttr("id")}inputsContainer.append(hintInputElem);hintInputElem.after(element)}var popUpEl=angular.element("<div uib-typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"});if(angular.isDefined(attrs.typeaheadTemplateUrl)){popUpEl.attr("template-url",attrs.typeaheadTemplateUrl)}if(angular.isDefined(attrs.typeaheadPopupTemplateUrl)){popUpEl.attr("popup-template-url",attrs.typeaheadPopupTemplateUrl)}var resetHint=function(){if(showHint){hintInputElem.val("")}};var resetMatches=function(){scope.matches=[];scope.activeIdx=-1;element.attr("aria-expanded",false);resetHint()};var getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){if(index<0){element.removeAttr("aria-activedescendant")}else{element.attr("aria-activedescendant",getMatchId(index))}});var inputIsExactMatch=function(inputValue,index){if(scope.matches.length>index&&inputValue){return inputValue.toUpperCase()===scope.matches[index].label.toUpperCase()}return false};var getMatchesAsync=function(inputValue,evt){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,true);isNoResultsSetter(originalScope,false);$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus){if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1;isNoResultsSetter(originalScope,false);scope.matches.length=0;for(var i=0;i<matches.length;i++){locals[parserResult.itemName]=matches[i];scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]})}scope.query=inputValue;recalculatePosition();element.attr("aria-expanded",true);if(selectOnExact&&scope.matches.length===1&&inputIsExactMatch(inputValue,0)){if(angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)){$$debounce(function(){scope.select(0,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate["default"])}else{scope.select(0,evt)}}if(showHint){var firstLabel=scope.matches[0].label;if(angular.isString(inputValue)&&inputValue.length>0&&firstLabel.slice(0,inputValue.length).toUpperCase()===inputValue.toUpperCase()){hintInputElem.val(inputValue+firstLabel.slice(inputValue.length))}else{hintInputElem.val("")}}}else{resetMatches();isNoResultsSetter(originalScope,true)}}if(onCurrentRequest){isLoadingSetter(originalScope,false)}},function(){resetMatches();isLoadingSetter(originalScope,false);isNoResultsSetter(originalScope,true)})};if(appendToBody){angular.element($window).on("resize",fireRecalculating);$document.find("body").on("scroll",fireRecalculating)}var debouncedRecalculate=$$debounce(function(){if(scope.matches.length){recalculatePosition()}scope.moveInProgress=false},eventDebounceTime);scope.moveInProgress=false;function fireRecalculating(){if(!scope.moveInProgress){scope.moveInProgress=true;scope.$digest()}debouncedRecalculate()}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element);scope.position.top+=element.prop("offsetHeight")}scope.query=undefined;var timeoutPromise;var scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)};var cancelPreviousTimeout=function(){if(timeoutPromise){$timeout.cancel(timeoutPromise)}};resetMatches();scope.assignIsOpen=function(isOpen){isOpenSetter(originalScope,isOpen)};scope.select=function(activeIdx,evt){var locals={};var model,item;selected=true;locals[parserResult.itemName]=item=scope.matches[activeIdx].model;model=parserResult.modelMapper(originalScope,locals);$setModelValue(originalScope,model);modelCtrl.$setValidity("editable",true);modelCtrl.$setValidity("parse",true);onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals),$event:evt});resetMatches();if(scope.$eval(attrs.typeaheadFocusOnSelect)!==false){$timeout(function(){element[0].focus()},0,false)}};element.on("keydown",function(evt){if(scope.matches.length===0||HOT_KEYS.indexOf(evt.which)===-1){return}var shouldSelect=isSelectEvent(originalScope,{$event:evt});if(scope.activeIdx===-1&&shouldSelect||evt.which===9&&!!evt.shiftKey){resetMatches();scope.$digest();return}evt.preventDefault();var target;switch(evt.which){case 27:evt.stopPropagation();resetMatches();originalScope.$digest();break;case 38:scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1;scope.$digest();target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx];target.parentNode.scrollTop=target.offsetTop;break;case 40:scope.activeIdx=(scope.activeIdx+1)%scope.matches.length;scope.$digest();target=popUpEl[0].querySelectorAll(".uib-typeahead-match")[scope.activeIdx];target.parentNode.scrollTop=target.offsetTop;break;default:if(shouldSelect){scope.$apply(function(){if(angular.isNumber(scope.debounceUpdate)||angular.isObject(scope.debounceUpdate)){$$debounce(function(){scope.select(scope.activeIdx,evt)},angular.isNumber(scope.debounceUpdate)?scope.debounceUpdate:scope.debounceUpdate["default"])}else{scope.select(scope.activeIdx,evt)}})}}});element.on("focus",function(evt){hasFocus=true;if(minLength===0&&!modelCtrl.$viewValue){$timeout(function(){getMatchesAsync(modelCtrl.$viewValue,evt)},0)}});element.on("blur",function(evt){if(isSelectOnBlur&&scope.matches.length&&scope.activeIdx!==-1&&!selected){selected=true;scope.$apply(function(){if(angular.isObject(scope.debounceUpdate)&&angular.isNumber(scope.debounceUpdate.blur)){$$debounce(function(){scope.select(scope.activeIdx,evt)},scope.debounceUpdate.blur)}else{scope.select(scope.activeIdx,evt)}})}if(!isEditable&&modelCtrl.$error.editable){modelCtrl.$setViewValue();scope.$apply(function(){modelCtrl.$setValidity("editable",true);modelCtrl.$setValidity("parse",true)});element.val("")}hasFocus=false;selected=false});var dismissClickHandler=function(evt){if(element[0]!==evt.target&&evt.which!==3&&scope.matches.length!==0){resetMatches();if(!$rootScope.$$phase){originalScope.$digest()}}};$document.on("click",dismissClickHandler);originalScope.$on("$destroy",function(){$document.off("click",dismissClickHandler);if(appendToBody||appendTo){$popup.remove()}if(appendToBody){angular.element($window).off("resize",fireRecalculating);$document.find("body").off("scroll",fireRecalculating)}popUpEl.remove();if(showHint){inputsContainer.remove()}});var $popup=$compile(popUpEl)(scope);if(appendToBody){$document.find("body").append($popup)}else if(appendTo){angular.element(appendTo).eq(0).append($popup)}else{element.after($popup)}this.init=function(_modelCtrl){modelCtrl=_modelCtrl;ngModelOptions=extractOptions(modelCtrl);scope.debounceUpdate=$parse(ngModelOptions.getOption("debounce"))(originalScope);modelCtrl.$parsers.unshift(function(inputValue){hasFocus=true;if(minLength===0||inputValue&&inputValue.length>=minLength){if(waitTime>0){cancelPreviousTimeout();scheduleSearchWithTimeout(inputValue)}else{getMatchesAsync(inputValue)}}else{isLoadingSetter(originalScope,false);cancelPreviousTimeout();resetMatches()}if(isEditable){return inputValue}if(!inputValue){modelCtrl.$setValidity("editable",true);return null}modelCtrl.$setValidity("editable",false);return undefined});modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue;var locals={};if(!isEditable){modelCtrl.$setValidity("editable",true)}if(inputFormatter){locals.$model=modelValue;return inputFormatter(originalScope,locals)}locals[parserResult.itemName]=modelValue;candidateViewValue=parserResult.viewMapper(originalScope,locals);locals[parserResult.itemName]=undefined;emptyViewValue=parserResult.viewMapper(originalScope,locals);return candidateViewValue!==emptyViewValue?candidateViewValue:modelValue})};function extractOptions(ngModelCtrl){var ngModelOptions;if(angular.version.minor<6){ngModelOptions=ngModelCtrl.$options||{};ngModelOptions.getOption=function(key){return ngModelOptions[key]}}else{ngModelOptions=ngModelCtrl.$options}return ngModelOptions}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(originalScope,element,attrs,ctrls){ctrls[1].init(ctrls[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function($$debounce){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:true,templateUrl:function(element,attrs){return attrs.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl;scope.isOpen=function(){var isDropdownOpen=scope.matches.length>0;scope.assignIsOpen({isOpen:isDropdownOpen});return isDropdownOpen};scope.isActive=function(matchIdx){return scope.active===matchIdx};scope.selectActive=function(matchIdx){scope.active=matchIdx};scope.selectMatch=function(activeIdx,evt){var debounce=scope.debounce();if(angular.isNumber(debounce)||angular.isObject(debounce)){$$debounce(function(){scope.select({activeIdx:activeIdx,evt:evt})},angular.isNumber(debounce)?debounce:debounce["default"])}else{scope.select({activeIdx:activeIdx,evt:evt})}}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function($templateRequest,$compile,$parse){return{scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"uib/template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then(function(tplContent){var tplEl=angular.element(tplContent.trim());element.replaceWith(tplEl);$compile(tplEl)(scope)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function($sce,$injector,$log){var isSanitizePresent;isSanitizePresent=$injector.has("$sanitize");function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function containsHtml(matchItem){return/<.*>/g.test(matchItem)}return function(matchItem,query){if(!isSanitizePresent&&containsHtml(matchItem)){$log.warn("Unsafe use of typeahead please use ngSanitize")}matchItem=query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem;if(!isSanitizePresent){matchItem=$sce.trustAsHtml(matchItem)}return matchItem}}]);angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n'+'  <h4 class="panel-title">\n'+'    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n'+"  </h4>\n"+"</div>\n"+'<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n'+'  <div class="panel-body" ng-transclude></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]);angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n'+'  <span aria-hidden="true">&times;</span>\n'+'  <span class="sr-only">Close</span>\n'+"</button>\n"+"<div ng-transclude></div>\n"+"")}]);angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n'+'<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n'+'  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n'+'  <span class="sr-only">previous</span>\n'+"</a>\n"+'<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n'+'  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n'+'  <span class="sr-only">next</span>\n'+"</a>\n"+'<ol class="carousel-indicators" ng-show="slides.length > 1">\n'+'  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n'+'    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n'+"  </li>\n"+"</ol>\n"+"")}]);angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n'+"")}]);angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n'+'  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n'+'  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n'+'  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n'+'      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n'+"    </tr>\n"+"    <tr>\n"+'      <th ng-if="showWeeks" class="text-center"></th>\n'+'      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n'+'      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n'+'      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" class="btn btn-default btn-sm"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+"          tabindex=\"-1\"><span ng-class=\"::{'text-muted': dt.secondary, 'text-info': dt.current}\">{{::dt.label}}</span></button>\n"+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n'+'      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n'+'      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" class="btn btn-default"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+'          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n'+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n'+"  <thead>\n"+"    <tr>\n"+'      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n'+'      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n'+'      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n'+"    </tr>\n"+"  </thead>\n"+"  <tbody>\n"+'    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n'+'      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n'+'        id="{{::dt.uid}}"\n'+'        ng-class="::dt.customClass">\n'+'        <button type="button" class="btn btn-default"\n'+'          uib-is-class="\n'+"            'btn-info' for selectedDt,\n"+"            'active' for activeDt\n"+'            on dt"\n'+'          ng-click="select(dt.date)"\n'+'          ng-disabled="::dt.disabled"\n'+'          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n'+"      </td>\n"+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n'+"  <li ng-transclude></li>\n"+'  <li ng-if="showButtonBar" class="uib-button-bar">\n'+'    <span class="btn-group pull-left">\n'+'      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n'+'      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n'+"    </span>\n"+'    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n'+"  </li>\n"+"</ul>\n"+"")}]);angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n"+"")}]);angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n'+'<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n'+"")}]);angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n'+'<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n'+'<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n'+'<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n'+'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n'+"")}]);angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n'+'<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n'+"")}]);angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n'+'<div class="tooltip-inner" ng-bind="content"></div>\n'+"")}]);angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n'+'<div class="tooltip-inner"\n'+'  uib-tooltip-template-transclude="contentExp()"\n'+'  tooltip-template-transclude-scope="originScope()"></div>\n'+"")}]);angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n'+"\n"+'<div class="popover-inner">\n'+'    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n'+'    <div class="popover-content" ng-bind-html="contentExp()"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n'+"\n"+'<div class="popover-inner">\n'+'    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n'+'    <div class="popover-content"\n'+'      uib-tooltip-template-transclude="contentExp()"\n'+'      tooltip-template-transclude-scope="originScope()"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n'+"\n"+'<div class="popover-inner">\n'+'    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n'+'    <div class="popover-content" ng-bind="content"></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n'+"")}]);angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]);angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n'+'  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n'+"</div>\n"+"")}]);angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n'+"    <span ng-repeat-start=\"r in range track by $index\" class=\"sr-only\">({{ $index < value ? '*' : ' ' }})</span>\n"+'    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n'+"</span>\n"+"")}]);angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n'+'  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n'+"</li>\n"+"")}]);angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/tabs/tabset.html","<div>\n"+"  <ul class=\"nav nav-{{tabset.type || 'tabs'}}\" ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\" ng-transclude></ul>\n"+'  <div class="tab-content">\n'+'    <div class="tab-pane"\n'+'         ng-repeat="tab in tabset.tabs"\n'+'         ng-class="{active: tabset.active === tab.index}"\n'+'         uib-tab-content-transclude="tab">\n'+"    </div>\n"+"  </div>\n"+"</div>\n"+"")}]);angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n'+"  <tbody>\n"+'    <tr class="text-center" ng-show="::showSpinners">\n'+'      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+"      <td>&nbsp;</td>\n"+'      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+'      <td ng-show="showSeconds">&nbsp;</td>\n'+'      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n'+'      <td ng-show="showMeridian"></td>\n'+"    </tr>\n"+"    <tr>\n"+'      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n'+'        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n'+"      </td>\n"+'      <td class="uib-separator">:</td>\n'+'      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n'+'        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n'+"      </td>\n"+'      <td ng-show="showSeconds" class="uib-separator">:</td>\n'+'      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n'+'        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n'+"      </td>\n"+'      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n'+"    </tr>\n"+'    <tr class="text-center" ng-show="::showSpinners">\n'+'      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+"      <td>&nbsp;</td>\n"+'      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+'      <td ng-show="showSeconds">&nbsp;</td>\n'+'      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n'+'      <td ng-show="showMeridian"></td>\n'+"    </tr>\n"+"  </tbody>\n"+"</table>\n"+"")}]);angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-match.html","<a href\n"+'   tabindex="-1"\n'+'   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n'+'   ng-attr-title="{{match.label}}"></a>\n'+"")}]);angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n'+'    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n'+'        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n'+"    </li>\n"+"</ul>\n"+"")}]);angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>');angular.$$uibCarouselCss=true});angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>');angular.$$uibDatepickerCss=true});angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>');angular.$$uibPositionCss=true});angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>');angular.$$uibDatepickerpopupCss=true});angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>');angular.$$uibTooltipCss=true});angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>');angular.$$uibTimepickerCss=true});angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>');angular.$$uibTypeaheadCss=true})},{}],78:[function(require,module,exports){require("./dist/ui-bootstrap-tpls");module.exports="ui.bootstrap"},{"./dist/ui-bootstrap-tpls":77}],79:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ng_from_import=require("angular");var ng_from_global=angular;exports.ng=ng_from_import&&ng_from_import.module?ng_from_import:ng_from_global},{angular:94}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=require("../angular");var core_1=require("@uirouter/core");function parseStateRef(ref){var paramsOnly=ref.match(/^\s*({[^}]*})\s*$/),parsed;if(paramsOnly)ref="("+paramsOnly[1]+")";parsed=ref.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/);if(!parsed||parsed.length!==4)throw new Error("Invalid state ref '"+ref+"'");return{state:parsed[1]||null,paramExpr:parsed[3]||null}}function stateContext(el){var $uiView=el.parent().inheritedData("$uiView");var path=core_1.parse("$cfg.path")($uiView);return path?core_1.tail(path).state.name:undefined}function processedDef($state,$element,def){var uiState=def.uiState||$state.current.name;var uiStateOpts=core_1.extend(defaultOpts($element,$state),def.uiStateOpts||{});var href=$state.href(uiState,def.uiStateParams,uiStateOpts);return{uiState:uiState,uiStateParams:def.uiStateParams,uiStateOpts:uiStateOpts,href:href}}function getTypeInfo(el){var isSvg=Object.prototype.toString.call(el.prop("href"))==="[object SVGAnimatedString]";var isForm=el[0].nodeName==="FORM";return{attr:isForm?"action":isSvg?"xlink:href":"href",isAnchor:el.prop("tagName").toUpperCase()==="A",clickable:!isForm}}function clickHook(el,$state,$timeout,type,getDef){return function(e){var button=e.which||e.button,target=getDef();if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||el.attr("target"))){var transition=$timeout(function(){$state.go(target.uiState,target.uiStateParams,target.uiStateOpts)});e.preventDefault();var ignorePreventDefaultCount=type.isAnchor&&!target.href?1:0;e.preventDefault=function(){if(ignorePreventDefaultCount--<=0)$timeout.cancel(transition)}}}}function defaultOpts(el,$state){return{relative:stateContext(el)||$state.$current,inherit:true,source:"sref"}}function bindEvents(element,scope,hookFn,uiStateOpts){var events;if(uiStateOpts){events=uiStateOpts.events}if(!core_1.isArray(events)){events=["click"]}var on=element.on?"on":"bind";for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];element[on](event_1,hookFn)}scope.$on("$destroy",function(){var off=element.off?"off":"unbind";for(var _i=0,events_2=events;_i<events_2.length;_i++){var event_2=events_2[_i];element[off](event_2,hookFn)}})}var uiSref;uiSref=["$uiRouter","$timeout",function $StateRefDirective($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var type=getTypeInfo(element);var active=uiSrefActive[1]||uiSrefActive[0];var unlinkInfoFn=null;var hookFn;var rawDef={};var getDef=function(){return processedDef($state,element,rawDef)};var ref=parseStateRef(attrs.uiSref);rawDef.uiState=ref.state;rawDef.uiStateOpts=attrs.uiSrefOpts?scope.$eval(attrs.uiSrefOpts):{};function update(){var def=getDef();if(unlinkInfoFn)unlinkInfoFn();if(active)unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams);if(def.href!=null)attrs.$set(type.attr,def.href)}if(ref.paramExpr){scope.$watch(ref.paramExpr,function(val){rawDef.uiStateParams=core_1.extend({},val);update()},true);rawDef.uiStateParams=core_1.extend({},scope.$eval(ref.paramExpr))}update();scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update));scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update));if(!type.clickable)return;hookFn=clickHook(element,$state,$timeout,type,getDef);bindEvents(element,scope,hookFn,rawDef.uiStateOpts)}}}];var uiState;uiState=["$uiRouter","$timeout",function $StateRefDynamicDirective($uiRouter,$timeout){var $state=$uiRouter.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(scope,element,attrs,uiSrefActive){var type=getTypeInfo(element);var active=uiSrefActive[1]||uiSrefActive[0];var unlinkInfoFn=null;var hookFn;var rawDef={};var getDef=function(){return processedDef($state,element,rawDef)};var inputAttrs=["uiState","uiStateParams","uiStateOpts"];var watchDeregFns=inputAttrs.reduce(function(acc,attr){return acc[attr]=core_1.noop,acc},{});function update(){var def=getDef();if(unlinkInfoFn)unlinkInfoFn();if(active)unlinkInfoFn=active.$$addStateInfo(def.uiState,def.uiStateParams);if(def.href!=null)attrs.$set(type.attr,def.href)}inputAttrs.forEach(function(field){rawDef[field]=attrs[field]?scope.$eval(attrs[field]):null;attrs.$observe(field,function(expr){watchDeregFns[field]();watchDeregFns[field]=scope.$watch(expr,function(newval){rawDef[field]=newval;update()},true)})});update();scope.$on("$destroy",$uiRouter.stateRegistry.onStatesChanged(update));scope.$on("$destroy",$uiRouter.transitionService.onSuccess({},update));if(!type.clickable)return;hookFn=clickHook(element,$state,$timeout,type,getDef);bindEvents(element,scope,hookFn,rawDef.uiStateOpts)}}}];var uiSrefActive;uiSrefActive=["$state","$stateParams","$interpolate","$uiRouter",function $StateRefActiveDirective($state,$stateParams,$interpolate,$uiRouter){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var states=[],activeEqClass,uiSrefActive;activeEqClass=$interpolate($attrs.uiSrefActiveEq||"",false)($scope);try{uiSrefActive=$scope.$eval($attrs.uiSrefActive)}catch(e){}uiSrefActive=uiSrefActive||$interpolate($attrs.uiSrefActive||"",false)($scope);if(core_1.isObject(uiSrefActive)){core_1.forEach(uiSrefActive,function(stateOrName,activeClass){if(core_1.isString(stateOrName)){var ref=parseStateRef(stateOrName);addState(ref.state,$scope.$eval(ref.paramExpr),activeClass)}})}this.$$addStateInfo=function(newState,newParams){if(core_1.isObject(uiSrefActive)&&states.length>0){return}var deregister=addState(newState,newParams,uiSrefActive);update();return deregister};function updateAfterTransition(trans){trans.promise.then(update)}$scope.$on("$stateChangeSuccess",update);$scope.$on("$destroy",$uiRouter.transitionService.onStart({},updateAfterTransition));if($uiRouter.globals.transition){updateAfterTransition($uiRouter.globals.transition)}function addState(stateName,stateParams,activeClass){var state=$state.get(stateName,stateContext($element));var stateInfo={state:state||{name:stateName},params:stateParams,activeClass:activeClass};states.push(stateInfo);return function removeState(){core_1.removeFrom(states)(stateInfo)}}function update(){var splitClasses=function(str){return str.split(/\s/).filter(core_1.identity)};var getClasses=function(stateList){return stateList.map(function(x){return x.activeClass}).map(splitClasses).reduce(core_1.unnestR,[])};var allClasses=getClasses(states).concat(splitClasses(activeEqClass)).reduce(core_1.uniqR,[]);var fuzzyClasses=getClasses(states.filter(function(x){return $state.includes(x.state.name,x.params)}));var exactlyMatchesAny=!!states.filter(function(x){return $state.is(x.state.name,x.params)}).length;var exactClasses=exactlyMatchesAny?splitClasses(activeEqClass):[];var addClasses=fuzzyClasses.concat(exactClasses).reduce(core_1.uniqR,[]);var removeClasses=allClasses.filter(function(cls){return!core_1.inArray(addClasses,cls)});$scope.$evalAsync(function(){addClasses.forEach(function(className){return $element.addClass(className)});removeClasses.forEach(function(className){return $element.removeClass(className)})})}update()}]}}];angular_1.ng.module("ui.router.state").directive("uiSref",uiSref).directive("uiSrefActive",uiSrefActive).directive("uiSrefActiveEq",uiSrefActive).directive("uiState",uiState)},{"../angular":79,"@uirouter/core":25}],81:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=require("../angular");var angular_2=require("angular");var core_1=require("@uirouter/core");var views_1=require("../statebuilders/views");var services_1=require("../services");exports.uiView=["$view","$animate","$uiViewScroll","$interpolate","$q",function $ViewDirective($view,$animate,$uiViewScroll,$interpolate,$q){function getRenderer(attrs,scope){return{enter:function(element,target,cb){if(angular_1.ng.version.minor>2){$animate.enter(element,null,target).then(cb)}else{$animate.enter(element,null,target,cb)}},leave:function(element,cb){if(angular_1.ng.version.minor>2){$animate.leave(element).then(cb)}else{$animate.leave(element,cb)}}}}function configsEqual(config1,config2){return config1===config2}var rootData={$cfg:{viewDecl:{$context:$view._pluginapi._rootViewContext()}},$uiView:{}};var directive={count:0,restrict:"ECA",terminal:true,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,unregister,onloadExp=attrs["onload"]||"",autoScrollExp=attrs["autoscroll"],renderer=getRenderer(attrs,scope),viewConfig=undefined,inherited=$element.inheritedData("$uiView")||rootData,name=$interpolate(attrs["uiView"]||attrs["name"]||"")(scope)||"$default";var activeUIView={$type:"ng1",id:directive.count++,name:name,fqn:inherited.$uiView.fqn?inherited.$uiView.fqn+"."+name:name,config:null,configUpdated:configUpdatedCallback,get creationContext(){var fromParentTagConfig=core_1.parse("$cfg.viewDecl.$context")(inherited);var fromParentTag=core_1.parse("$uiView.creationContext")(inherited);return fromParentTagConfig||fromParentTag}};core_1.trace.traceUIViewEvent("Linking",activeUIView);function configUpdatedCallback(config){if(config&&!(config instanceof views_1.Ng1ViewConfig))return;if(configsEqual(viewConfig,config))return;core_1.trace.traceUIViewConfigUpdated(activeUIView,config&&config.viewDecl&&config.viewDecl.$context);viewConfig=config;updateView(config)}$element.data("$uiView",{$uiView:activeUIView});updateView();unregister=$view.registerUIView(activeUIView);scope.$on("$destroy",function(){core_1.trace.traceUIViewEvent("Destroying/Unregistering",activeUIView);unregister()});function cleanupLastView(){if(previousEl){core_1.trace.traceUIViewEvent("Removing (previous) el",previousEl.data("$uiView"));previousEl.remove();previousEl=null}if(currentScope){core_1.trace.traceUIViewEvent("Destroying scope",activeUIView);currentScope.$destroy();currentScope=null}if(currentEl){var _viewData_1=currentEl.data("$uiViewAnim");core_1.trace.traceUIViewEvent("Animate out",_viewData_1);renderer.leave(currentEl,function(){_viewData_1.$$animLeave.resolve();previousEl=null});previousEl=currentEl;currentEl=null}}function updateView(config){var newScope=scope.$new();var animEnter=$q.defer(),animLeave=$q.defer();var $uiViewData={$cfg:config,$uiView:activeUIView};var $uiViewAnim={$animEnter:animEnter.promise,$animLeave:animLeave.promise,$$animLeave:animLeave};newScope.$emit("$viewContentLoading",name);var cloned=$transclude(newScope,function(clone){clone.data("$uiViewAnim",$uiViewAnim);clone.data("$uiView",$uiViewData);renderer.enter(clone,$element,function onUIViewEnter(){animEnter.resolve();if(currentScope)currentScope.$emit("$viewContentAnimationEnded");if(core_1.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp)){$uiViewScroll(clone)}});cleanupLastView()});currentEl=cloned;currentScope=newScope;currentScope.$emit("$viewContentLoaded",config||viewConfig);currentScope.$eval(onloadExp)}}}};return directive}];$ViewDirectiveFill.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];function $ViewDirectiveFill($compile,$controller,$transitions,$view,$q,$timeout){var getControllerAs=core_1.parse("viewDecl.controllerAs");var getResolveAs=core_1.parse("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();tElement.empty();return function(scope,$element){var data=$element.data("$uiView");if(!data){$element.html(initial);$compile($element.contents())(scope);return}var cfg=data.$cfg||{viewDecl:{},getTemplate:angular_2.noop};var resolveCtx=cfg.path&&new core_1.ResolveContext(cfg.path);$element.html(cfg.getTemplate($element,resolveCtx)||initial);core_1.trace.traceUIViewFill(data.$uiView,$element.html());var link=$compile($element.contents());var controller=cfg.controller;var controllerAs=getControllerAs(cfg);var resolveAs=getResolveAs(cfg);var locals=resolveCtx&&services_1.getLocals(resolveCtx);scope[resolveAs]=locals;if(controller){var controllerInstance=$controller(controller,core_1.extend({},locals,{$scope:scope,$element:$element}));if(controllerAs){scope[controllerAs]=controllerInstance;scope[controllerAs][resolveAs]=locals}$element.data("$ngControllerController",controllerInstance);$element.children().data("$ngControllerController",controllerInstance);registerControllerCallbacks($q,$transitions,controllerInstance,scope,cfg)}if(core_1.isString(cfg.viewDecl.component)){var cmp_1=cfg.viewDecl.component;var kebobName=core_1.kebobString(cmp_1);var tagRegexp_1=new RegExp("^(x-|data-)?"+kebobName+"$","i");var getComponentController=function(){var directiveEl=[].slice.call($element[0].children).filter(function(el){return el&&el.tagName&&tagRegexp_1.exec(el.tagName)});return directiveEl&&angular_1.ng.element(directiveEl).data("$"+cmp_1+"Controller")};var deregisterWatch_1=scope.$watch(getComponentController,function(ctrlInstance){if(!ctrlInstance)return;registerControllerCallbacks($q,$transitions,ctrlInstance,scope,cfg);deregisterWatch_1()})}link(scope)}}}}var hasComponentImpl=typeof angular_1.ng.module("ui.router")["component"]==="function";var _uiCanExitId=0;function registerControllerCallbacks($q,$transitions,controllerInstance,$scope,cfg){if(core_1.isFunction(controllerInstance.$onInit)&&!(cfg.viewDecl.component&&hasComponentImpl)){controllerInstance.$onInit()}var viewState=core_1.tail(cfg.path).state.self;var hookOptions={bind:controllerInstance};if(core_1.isFunction(controllerInstance.uiOnParamsChanged)){var resolveContext=new core_1.ResolveContext(cfg.path);var viewCreationTrans_1=resolveContext.getResolvable("$transition$").data;var paramsUpdated=function($transition$){if($transition$===viewCreationTrans_1||$transition$.exiting().indexOf(viewState)!==-1)return;var toParams=$transition$.params("to");var fromParams=$transition$.params("from");var toSchema=$transition$.treeChanges().to.map(function(node){return node.paramSchema}).reduce(core_1.unnestR,[]);var fromSchema=$transition$.treeChanges().from.map(function(node){return node.paramSchema}).reduce(core_1.unnestR,[]);var changedToParams=toSchema.filter(function(param){var idx=fromSchema.indexOf(param);return idx===-1||!fromSchema[idx].type.equals(toParams[param.id],fromParams[param.id])});if(changedToParams.length){var changedKeys_1=changedToParams.map(function(x){return x.id});var newValues=core_1.filter(toParams,function(val,key){return changedKeys_1.indexOf(key)!==-1});controllerInstance.uiOnParamsChanged(newValues,$transition$)}};$scope.$on("$destroy",$transitions.onSuccess({},paramsUpdated,hookOptions))}if(core_1.isFunction(controllerInstance.uiCanExit)){var id_1=_uiCanExitId++;var cacheProp_1="_uiCanExitIds";var prevTruthyAnswer_1=function(trans){return!!trans&&(trans[cacheProp_1]&&trans[cacheProp_1][id_1]===true||prevTruthyAnswer_1(trans.redirectedFrom()))};var wrappedHook=function(trans){var promise,ids=trans[cacheProp_1]=trans[cacheProp_1]||{};if(!prevTruthyAnswer_1(trans)){promise=$q.when(controllerInstance.uiCanExit(trans));promise.then(function(val){return ids[id_1]=val!==false})}return promise};var criteria={exiting:viewState.name};$scope.$on("$destroy",$transitions.onBefore(criteria,wrappedHook,hookOptions))}}angular_1.ng.module("ui.router.state").directive("uiView",exports.uiView);angular_1.ng.module("ui.router.state").directive("uiView",$ViewDirectiveFill)},{"../angular":79,"../services":85,"../statebuilders/views":89,"@uirouter/core":25,angular:94}],82:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});var core=require("@uirouter/core");exports.core=core;__export(require("@uirouter/core"));__export(require("./services"));__export(require("./statebuilders/views"));__export(require("./stateProvider"));__export(require("./urlRouterProvider"));require("./injectables");require("./directives/stateDirectives");require("./stateFilters");require("./directives/viewDirective");require("./viewScroll");exports.default="ui.router"},{"./directives/stateDirectives":80,"./directives/viewDirective":81,"./injectables":83,"./services":85,"./stateFilters":86,"./stateProvider":87,"./statebuilders/views":89,"./urlRouterProvider":91,"./viewScroll":92,"@uirouter/core":25}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var $stateParams;var $uiRouterGlobals;var $uiRouter;var $uiRouterProvider;var $trace;var $transitions;var $transitionsProvider;var $transition$;var $state;var $stateRegistry;var $stateRegistryProvider;var $uiViewScrollProvider;var $uiViewScroll;var $stateProvider;var $urlServiceProvider;var $urlService;var $urlRouterProvider;var $urlRouter;var $urlMatcherFactory;var $urlMatcherFactoryProvider},{}],84:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=require("@uirouter/core");var Ng1LocationServices=function(){function Ng1LocationServices($locationProvider){this._urlListeners=[];this.$locationProvider=$locationProvider;var _lp=core_1.val($locationProvider);core_1.createProxyFunctions(_lp,this,_lp,["hashPrefix"])}Ng1LocationServices.prototype.dispose=function(){};Ng1LocationServices.prototype.onChange=function(callback){var _this=this;this._urlListeners.push(callback);return function(){return core_1.removeFrom(_this._urlListeners)(callback)}};Ng1LocationServices.prototype.html5Mode=function(){var html5Mode=this.$locationProvider.html5Mode();html5Mode=core_1.isObject(html5Mode)?html5Mode.enabled:html5Mode;return html5Mode&&this.$sniffer.history};Ng1LocationServices.prototype.url=function(newUrl,replace,state){if(replace===void 0){replace=false}if(newUrl)this.$location.url(newUrl);if(replace)this.$location.replace();if(state)this.$location.state(state);return this.$location.url()};Ng1LocationServices.prototype._runtimeServices=function($rootScope,$location,$sniffer,$browser){var _this=this;this.$location=$location;this.$sniffer=$sniffer;$rootScope.$on("$locationChangeSuccess",function(evt){return _this._urlListeners.forEach(function(fn){return fn(evt)})});var _loc=core_1.val($location);var _browser=core_1.val($browser);core_1.createProxyFunctions(_loc,this,_loc,["replace","path","search","hash"]);core_1.createProxyFunctions(_loc,this,_loc,["port","protocol","host"]);core_1.createProxyFunctions(_browser,this,_browser,["baseHref"])};Ng1LocationServices.monkeyPatchPathParameterType=function(router){var pathType=router.urlMatcherFactory.type("path");pathType.encode=function(val){return val!=null?val.toString().replace(/(~|\/)/g,function(m){return{"~":"~~","/":"~2F"}[m]}):val};pathType.decode=function(val){return val!=null?val.toString().replace(/(~~|~2F)/g,function(m){return{"~~":"~","~2F":"/"}[m]}):val}};return Ng1LocationServices}();exports.Ng1LocationServices=Ng1LocationServices},{"@uirouter/core":25}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=require("./angular");var core_1=require("@uirouter/core");var views_1=require("./statebuilders/views");var templateFactory_1=require("./templateFactory");var stateProvider_1=require("./stateProvider");var onEnterExitRetain_1=require("./statebuilders/onEnterExitRetain");var locationServices_1=require("./locationServices");var urlRouterProvider_1=require("./urlRouterProvider");angular_1.ng.module("ui.router.angular1",[]);var mod_init=angular_1.ng.module("ui.router.init",[]);var mod_util=angular_1.ng.module("ui.router.util",["ng","ui.router.init"]);var mod_rtr=angular_1.ng.module("ui.router.router",["ui.router.util"]);var mod_state=angular_1.ng.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]);var mod_main=angular_1.ng.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]);var mod_cmpt=angular_1.ng.module("ui.router.compat",["ui.router"]);var router=null;$uiRouter.$inject=["$locationProvider"];function $uiRouter($locationProvider){router=this.router=new core_1.UIRouter;router.stateProvider=new stateProvider_1.StateProvider(router.stateRegistry,router.stateService);router.stateRegistry.decorator("views",views_1.ng1ViewsBuilder);router.stateRegistry.decorator("onExit",onEnterExitRetain_1.getStateHookBuilder("onExit"));router.stateRegistry.decorator("onRetain",onEnterExitRetain_1.getStateHookBuilder("onRetain"));router.stateRegistry.decorator("onEnter",onEnterExitRetain_1.getStateHookBuilder("onEnter"));router.viewService._pluginapi._viewConfigFactory("ng1",views_1.getNg1ViewConfigFactory());var ng1LocationService=router.locationService=router.locationConfig=new locationServices_1.Ng1LocationServices($locationProvider);locationServices_1.Ng1LocationServices.monkeyPatchPathParameterType(router);router["router"]=router;router["$get"]=$get;$get.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"];function $get($location,$browser,$sniffer,$rootScope,$http,$templateCache){ng1LocationService._runtimeServices($rootScope,$location,$sniffer,$browser);delete router["router"];delete router["$get"];return router}return router}var getProviderFor=function(serviceName){return["$uiRouterProvider",function($urp){var service=$urp.router[serviceName];service["$get"]=function(){return service};return service}]};runBlock.$inject=["$injector","$q","$uiRouter"];function runBlock($injector,$q,$uiRouter){core_1.services.$injector=$injector;core_1.services.$q=$q;$uiRouter.stateRegistry.get().map(function(x){return x.$$state().resolvables}).reduce(core_1.unnestR,[]).filter(function(x){return x.deps==="deferred"}).forEach(function(resolvable){return resolvable.deps=$injector.annotate(resolvable.resolveFn)})}var getUrlRouterProvider=function(uiRouter){return uiRouter.urlRouterProvider=new urlRouterProvider_1.UrlRouterProvider(uiRouter)};var getStateProvider=function(){return core_1.extend(router.stateProvider,{$get:function(){return router.stateService}})};watchDigests.$inject=["$rootScope"];function watchDigests($rootScope){$rootScope.$watch(function(){core_1.trace.approximateDigests++})}exports.watchDigests=watchDigests;mod_init.provider("$uiRouter",$uiRouter);mod_rtr.provider("$urlRouter",["$uiRouterProvider",getUrlRouterProvider]);mod_util.provider("$urlService",getProviderFor("urlService"));mod_util.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return router.urlMatcherFactory}]);mod_util.provider("$templateFactory",function(){return new templateFactory_1.TemplateFactory});mod_state.provider("$stateRegistry",getProviderFor("stateRegistry"));mod_state.provider("$uiRouterGlobals",getProviderFor("globals"));mod_state.provider("$transitions",getProviderFor("transitionService"));mod_state.provider("$state",["$uiRouterProvider",getStateProvider]);mod_state.factory("$stateParams",["$uiRouter",function($uiRouter){return $uiRouter.globals.params}]);mod_main.factory("$view",function(){return router.viewService});mod_main.service("$trace",function(){return core_1.trace});mod_main.run(watchDigests);mod_util.run(["$urlMatcherFactory",function($urlMatcherFactory){}]);mod_state.run(["$state",function($state){}]);mod_rtr.run(["$urlRouter",function($urlRouter){}]);mod_init.run(runBlock);exports.getLocals=function(ctx){var tokens=ctx.getTokens().filter(core_1.isString);var tuples=tokens.map(function(key){var resolvable=ctx.getResolvable(key);var waitPolicy=ctx.getPolicy(resolvable).async;return[key,waitPolicy==="NOWAIT"?resolvable.promise:resolvable.data]});return tuples.reduce(core_1.applyPairs,{})}},{"./angular":79,"./locationServices":84,"./stateProvider":87,"./statebuilders/onEnterExitRetain":88,"./statebuilders/views":89,"./templateFactory":90,"./urlRouterProvider":91,"@uirouter/core":25}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=require("./angular");$IsStateFilter.$inject=["$state"];function $IsStateFilter($state){var isFilter=function(state,params,options){return $state.is(state,params,options)};isFilter.$stateful=true;return isFilter}exports.$IsStateFilter=$IsStateFilter;$IncludedByStateFilter.$inject=["$state"];function $IncludedByStateFilter($state){var includesFilter=function(state,params,options){return $state.includes(state,params,options)};includesFilter.$stateful=true;return includesFilter}exports.$IncludedByStateFilter=$IncludedByStateFilter;angular_1.ng.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)},{"./angular":79}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=require("@uirouter/core");var StateProvider=function(){function StateProvider(stateRegistry,stateService){this.stateRegistry=stateRegistry;this.stateService=stateService;core_1.createProxyFunctions(core_1.val(StateProvider.prototype),this,core_1.val(this))}StateProvider.prototype.decorator=function(name,func){return this.stateRegistry.decorator(name,func)||this};StateProvider.prototype.state=function(name,definition){if(core_1.isObject(name)){definition=name}else{definition.name=name}this.stateRegistry.register(definition);return this};StateProvider.prototype.onInvalid=function(callback){return this.stateService.onInvalid(callback)};return StateProvider}();exports.StateProvider=StateProvider},{"@uirouter/core":25}],88:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=require("@uirouter/core");var services_1=require("../services");exports.getStateHookBuilder=function(hookName){return function stateHookBuilder(state,parentFn){var hook=state[hookName];var pathname=hookName==="onExit"?"from":"to";function decoratedNg1Hook(trans,state){var resolveContext=new core_1.ResolveContext(trans.treeChanges(pathname));var locals=core_1.extend(services_1.getLocals(resolveContext),{$state$:state,$transition$:trans});return core_1.services.$injector.invoke(hook,this,locals)}return hook?decoratedNg1Hook:undefined}}},{"../services":85,"@uirouter/core":25}],89:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=require("@uirouter/core");function getNg1ViewConfigFactory(){var templateFactory=null;return function(path,view){templateFactory=templateFactory||core_1.services.$injector.get("$templateFactory");return[new Ng1ViewConfig(path,view,templateFactory)]}}exports.getNg1ViewConfigFactory=getNg1ViewConfigFactory;var hasAnyKey=function(keys,obj){return keys.reduce(function(acc,key){return acc||core_1.isDefined(obj[key])},false)};function ng1ViewsBuilder(state){if(!state.parent)return{};var tplKeys=["templateProvider","templateUrl","template","notify","async"],ctrlKeys=["controller","controllerProvider","controllerAs","resolveAs"],compKeys=["component","bindings","componentProvider"],nonCompKeys=tplKeys.concat(ctrlKeys),allViewKeys=compKeys.concat(nonCompKeys);if(core_1.isDefined(state.views)&&hasAnyKey(allViewKeys,state)){throw new Error("State '"+state.name+"' has a 'views' object. "+'It cannot also have "view properties" at the state level.  '+"Move the following properties into a view (in the 'views' object): "+(" "+allViewKeys.filter(function(key){return core_1.isDefined(state[key])}).join(", ")))}var views={},viewsObject=state.views||{$default:core_1.pick(state,allViewKeys)};core_1.forEach(viewsObject,function(config,name){name=name||"$default";if(core_1.isString(config))config={component:config};config=core_1.extend({},config);if(hasAnyKey(compKeys,config)&&hasAnyKey(nonCompKeys,config)){throw new Error("Cannot combine: "+compKeys.join("|")+" with: "+nonCompKeys.join("|")+" in stateview: '"+name+"@"+state.name+"'")}config.resolveAs=config.resolveAs||"$resolve";config.$type="ng1";config.$context=state;config.$name=name;var normalized=core_1.ViewService.normalizeUIViewTarget(config.$context,config.$name);config.$uiViewName=normalized.uiViewName;config.$uiViewContextAnchor=normalized.uiViewContextAnchor;views[name]=config});return views}exports.ng1ViewsBuilder=ng1ViewsBuilder;var id=0;var Ng1ViewConfig=function(){function Ng1ViewConfig(path,viewDecl,factory){var _this=this;this.path=path;this.viewDecl=viewDecl;this.factory=factory;this.$id=id++;this.loaded=false;this.getTemplate=function(uiView,context){return _this.component?_this.factory.makeComponentTemplate(uiView,context,_this.component,_this.viewDecl.bindings):_this.template}}Ng1ViewConfig.prototype.load=function(){var _this=this;var $q=core_1.services.$q;var context=new core_1.ResolveContext(this.path);var params=this.path.reduce(function(acc,node){return core_1.extend(acc,node.paramValues)},{});var promises={template:$q.when(this.factory.fromConfig(this.viewDecl,params,context)),controller:$q.when(this.getController(context))};return $q.all(promises).then(function(results){core_1.trace.traceViewServiceEvent("Loaded",_this);_this.controller=results.controller;core_1.extend(_this,results.template);return _this})};Ng1ViewConfig.prototype.getController=function(context){var provider=this.viewDecl.controllerProvider;if(!core_1.isInjectable(provider))return this.viewDecl.controller;var deps=core_1.services.$injector.annotate(provider);var providerFn=core_1.isArray(provider)?core_1.tail(provider):provider;var resolvable=new core_1.Resolvable("",providerFn,deps);return resolvable.get(context)};return Ng1ViewConfig}();exports.Ng1ViewConfig=Ng1ViewConfig},{"@uirouter/core":25}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=require("./angular");var core_1=require("@uirouter/core");var TemplateFactory=function(){function TemplateFactory(){var _this=this;this._useHttp=angular_1.ng.version.minor<3;this.$get=["$http","$templateCache","$injector",function($http,$templateCache,$injector){_this.$templateRequest=$injector.has&&$injector.has("$templateRequest")&&$injector.get("$templateRequest");_this.$http=$http;_this.$templateCache=$templateCache;return _this}]}TemplateFactory.prototype.useHttpService=function(value){this._useHttp=value};TemplateFactory.prototype.fromConfig=function(config,params,context){var defaultTemplate="<ui-view></ui-view>";var asTemplate=function(result){return core_1.services.$q.when(result).then(function(str){return{template:str}})};var asComponent=function(result){return core_1.services.$q.when(result).then(function(str){return{component:str}})};return core_1.isDefined(config.template)?asTemplate(this.fromString(config.template,params)):core_1.isDefined(config.templateUrl)?asTemplate(this.fromUrl(config.templateUrl,params)):core_1.isDefined(config.templateProvider)?asTemplate(this.fromProvider(config.templateProvider,params,context)):core_1.isDefined(config.component)?asComponent(config.component):core_1.isDefined(config.componentProvider)?asComponent(this.fromComponentProvider(config.componentProvider,params,context)):asTemplate(defaultTemplate)};TemplateFactory.prototype.fromString=function(template,params){return core_1.isFunction(template)?template(params):template};TemplateFactory.prototype.fromUrl=function(url,params){if(core_1.isFunction(url))url=url(params);if(url==null)return null;if(this._useHttp){return this.$http.get(url,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(response){return response.data})}return this.$templateRequest(url)};TemplateFactory.prototype.fromProvider=function(provider,params,context){var deps=core_1.services.$injector.annotate(provider);var providerFn=core_1.isArray(provider)?core_1.tail(provider):provider;var resolvable=new core_1.Resolvable("",providerFn,deps);return resolvable.get(context)};TemplateFactory.prototype.fromComponentProvider=function(provider,params,context){var deps=core_1.services.$injector.annotate(provider);var providerFn=core_1.isArray(provider)?core_1.tail(provider):provider;var resolvable=new core_1.Resolvable("",providerFn,deps);return resolvable.get(context)};TemplateFactory.prototype.makeComponentTemplate=function(uiView,context,component,bindings){bindings=bindings||{};var prefix=angular_1.ng.version.minor>=3?"::":"";var kebob=function(camelCase){var kebobed=core_1.kebobString(camelCase);return/^(x|data)-/.exec(kebobed)?"x-"+kebobed:kebobed};var attributeTpl=function(input){var name=input.name,type=input.type;var attrName=kebob(name);if(uiView.attr(attrName)&&!bindings[name])return attrName+"='"+uiView.attr(attrName)+"'";var resolveName=bindings[name]||name;if(type==="@")return attrName+"='{{"+prefix+"$resolve."+resolveName+"}}'";if(type==="&"){var res=context.getResolvable(resolveName);var fn=res&&res.data;var args=fn&&core_1.services.$injector.annotate(fn)||[];var arrayIdxStr=core_1.isArray(fn)?"["+(fn.length-1)+"]":"";return attrName+"='$resolve."+resolveName+arrayIdxStr+"("+args.join(",")+")'"}return attrName+"='"+prefix+"$resolve."+resolveName+"'"};var attrs=getComponentBindings(component).map(attributeTpl).join(" ");var kebobName=kebob(component);return"<"+kebobName+" "+attrs+"></"+kebobName+">"};return TemplateFactory}();exports.TemplateFactory=TemplateFactory;function getComponentBindings(name){var cmpDefs=core_1.services.$injector.get(name+"Directive");if(!cmpDefs||!cmpDefs.length)throw new Error("Unable to find component named '"+name+"'");return cmpDefs.map(getBindings).reduce(core_1.unnestR,[])}var getBindings=function(def){if(core_1.isObject(def.bindToController))return scopeBindings(def.bindToController);return scopeBindings(def.scope)};var scopeBindings=function(bindingsObj){return Object.keys(bindingsObj||{}).map(function(key){return[key,/^([=<@&])[?]?(.*)/.exec(bindingsObj[key])]}).filter(function(tuple){return core_1.isDefined(tuple)&&core_1.isArray(tuple[1])}).map(function(tuple){return{name:tuple[1][2]||tuple[0],type:tuple[1][1]}})}},{"./angular":79,"@uirouter/core":25}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var core_1=require("@uirouter/core");var core_2=require("@uirouter/core");var UrlRouterProvider=function(){function UrlRouterProvider(router){this._router=router;this._urlRouter=router.urlRouter}UrlRouterProvider.prototype.$get=function(){var urlRouter=this._urlRouter;urlRouter.update(true);if(!urlRouter.interceptDeferred)urlRouter.listen();return urlRouter};UrlRouterProvider.prototype.rule=function(ruleFn){var _this=this;if(!core_2.isFunction(ruleFn))throw new Error("'rule' must be a function");var match=function(){return ruleFn(core_2.services.$injector,_this._router.locationService)};var rule=new core_1.BaseUrlRule(match,core_2.identity);this._urlRouter.rule(rule);return this};UrlRouterProvider.prototype.otherwise=function(rule){var _this=this;var urlRouter=this._urlRouter;if(core_2.isString(rule)){urlRouter.otherwise(rule)}else if(core_2.isFunction(rule)){urlRouter.otherwise(function(){return rule(core_2.services.$injector,_this._router.locationService)})}else{throw new Error("'rule' must be a string or function")}return this};UrlRouterProvider.prototype.when=function(what,handler){if(core_2.isArray(handler)||core_2.isFunction(handler)){handler=UrlRouterProvider.injectableHandler(this._router,handler)}this._urlRouter.when(what,handler);return this};UrlRouterProvider.injectableHandler=function(router,handler){return function(match){return core_2.services.$injector.invoke(handler,null,{$match:match,$stateParams:router.globals.params})}};UrlRouterProvider.prototype.deferIntercept=function(defer){this._urlRouter.deferIntercept(defer)};return UrlRouterProvider}();exports.UrlRouterProvider=UrlRouterProvider},{"@uirouter/core":25}],92:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var angular_1=require("./angular");function $ViewScrollProvider(){var useAnchorScroll=false;this.useAnchorScroll=function(){useAnchorScroll=true};this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){if(useAnchorScroll){return $anchorScroll}return function($element){return $timeout(function(){$element[0].scrollIntoView()},0,false)}}]}angular_1.ng.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider)},{"./angular":79}],93:[function(require,module,exports){(function(window){"use strict";function minErr(module,ErrorConstructor){ErrorConstructor=ErrorConstructor||Error;return function(){var code=arguments[0],template=arguments[1],message="["+(module?module+":":"")+code+"] ",templateArgs=sliceArgs(arguments,2).map(function(arg){return toDebugString(arg,minErrConfig.objectMaxDepth)}),paramPrefix,i;message+=template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1);if(index<templateArgs.length){return templateArgs[index]}return match});message+="\nhttp://errors.angularjs.org/1.6.4/"+(module?module+"/":"")+code;for(i=0,paramPrefix="?";i<templateArgs.length;i++,paramPrefix="&"){message+=paramPrefix+"p"+i+"="+encodeURIComponent(templateArgs[i])}return new ErrorConstructor(message)}}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/;var VALIDITY_STATE_PROPERTY="validity";var hasOwnProperty=Object.prototype.hasOwnProperty;var minErrConfig={objectMaxDepth:5};function errorHandlingConfig(config){if(isObject(config)){if(isDefined(config.objectMaxDepth)){minErrConfig.objectMaxDepth=isValidObjectMaxDepth(config.objectMaxDepth)?config.objectMaxDepth:NaN}}else{return minErrConfig}}function isValidObjectMaxDepth(maxDepth){return isNumber(maxDepth)&&maxDepth>0}var lowercase=function(string){return isString(string)?string.toLowerCase():string};var uppercase=function(string){return isString(string)?string.toUpperCase():string};var manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(ch.charCodeAt(0)|32)}):s};var manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(ch.charCodeAt(0)&~32)}):s};if("i"!=="I".toLowerCase()){lowercase=manualLowercase;uppercase=manualUppercase}var msie,jqLite,jQuery,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,getPrototypeOf=Object.getPrototypeOf,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),angularModule,uid=0;msie=window.document.documentMode;function isArrayLike(obj){if(obj==null||isWindow(obj))return false;if(isArray(obj)||isString(obj)||jqLite&&obj instanceof jqLite)return true;var length="length"in Object(obj)&&obj.length;return isNumber(length)&&(length>=0&&(length-1 in obj||obj instanceof Array)||typeof obj.item==="function")}function forEach(obj,iterator,context){var key,length;if(obj){if(isFunction(obj)){for(key in obj){if(key!=="prototype"&&key!=="length"&&key!=="name"&&obj.hasOwnProperty(key)){iterator.call(context,obj[key],key,obj)}}}else if(isArray(obj)||isArrayLike(obj)){var isPrimitive=typeof obj!=="object";for(key=0,length=obj.length;key<length;key++){if(isPrimitive||key in obj){iterator.call(context,obj[key],key,obj)}}}else if(obj.forEach&&obj.forEach!==forEach){obj.forEach(iterator,context,obj)}else if(isBlankObject(obj)){for(key in obj){iterator.call(context,obj[key],key,obj)}}else if(typeof obj.hasOwnProperty==="function"){for(key in obj){if(obj.hasOwnProperty(key)){iterator.call(context,obj[key],key,obj)}}}else{for(key in obj){if(hasOwnProperty.call(obj,key)){iterator.call(context,obj[key],key,obj)}}}}return obj}function forEachSorted(obj,iterator,context){var keys=Object.keys(obj).sort();for(var i=0;i<keys.length;i++){iterator.call(context,obj[keys[i]],keys[i])}return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){if(h){obj.$$hashKey=h}else{delete obj.$$hashKey}}function baseExtend(dst,objs,deep){var h=dst.$$hashKey;for(var i=0,ii=objs.length;i<ii;++i){var obj=objs[i];if(!isObject(obj)&&!isFunction(obj))continue;var keys=Object.keys(obj);for(var j=0,jj=keys.length;j<jj;j++){var key=keys[j];var src=obj[key];if(deep&&isObject(src)){if(isDate(src)){dst[key]=new Date(src.valueOf())}else if(isRegExp(src)){dst[key]=new RegExp(src)}else if(src.nodeName){dst[key]=src.cloneNode(true)}else if(isElement(src)){dst[key]=src.clone()}else{if(!isObject(dst[key]))dst[key]=isArray(src)?[]:{};baseExtend(dst[key],[src],true)}}else{dst[key]=src}}}setHashKey(dst,h);return dst}function extend(dst){return baseExtend(dst,slice.call(arguments,1),false)}function merge(dst){return baseExtend(dst,slice.call(arguments,1),true)}function toInt(str){return parseInt(str,10)}var isNumberNaN=Number.isNaN||function isNumberNaN(num){return num!==num};function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}noop.$inject=[];function identity($){return $}identity.$inject=[];function valueFn(value){return function valueRef(){return value}}function hasCustomToString(obj){return isFunction(obj.toString)&&obj.toString!==toString}function isUndefined(value){return typeof value==="undefined"}function isDefined(value){return typeof value!=="undefined"}function isObject(value){return value!==null&&typeof value==="object"}function isBlankObject(value){return value!==null&&typeof value==="object"&&!getPrototypeOf(value)}function isString(value){return typeof value==="string"}function isNumber(value){return typeof value==="number"}function isDate(value){return toString.call(value)==="[object Date]"}var isArray=Array.isArray;function isFunction(value){return typeof value==="function"}function isRegExp(value){return toString.call(value)==="[object RegExp]"}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return toString.call(obj)==="[object File]"}function isFormData(obj){return toString.call(obj)==="[object FormData]"}function isBlob(obj){return toString.call(obj)==="[object Blob]"}function isBoolean(value){return typeof value==="boolean"}function isPromiseLike(obj){return obj&&isFunction(obj.then)}var TYPED_ARRAY_REGEXP=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/;function isTypedArray(value){return value&&isNumber(value.length)&&TYPED_ARRAY_REGEXP.test(toString.call(value))}function isArrayBuffer(obj){return toString.call(obj)==="[object ArrayBuffer]"}var trim=function(value){return isString(value)?value.trim():value};var escapeForRegexp=function(s){return s.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};function isElement(node){return!!(node&&(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var obj={},items=str.split(","),i;for(i=0;i<items.length;i++){obj[items[i]]=true}return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function includes(array,obj){return Array.prototype.indexOf.call(array,obj)!==-1}function arrayRemove(array,value){var index=array.indexOf(value);if(index>=0){array.splice(index,1)}return index}function copy(source,destination,maxDepth){var stackSource=[];var stackDest=[];maxDepth=isValidObjectMaxDepth(maxDepth)?maxDepth:NaN;if(destination){if(isTypedArray(destination)||isArrayBuffer(destination)){throw ngMinErr("cpta","Can't copy! TypedArray destination cannot be mutated.")}if(source===destination){throw ngMinErr("cpi","Can't copy! Source and destination are identical.")}if(isArray(destination)){destination.length=0}else{forEach(destination,function(value,key){if(key!=="$$hashKey"){delete destination[key]}})}stackSource.push(source);stackDest.push(destination);return copyRecurse(source,destination,maxDepth)}return copyElement(source,maxDepth);function copyRecurse(source,destination,maxDepth){maxDepth--;if(maxDepth<0){return"..."}var h=destination.$$hashKey;var key;if(isArray(source)){for(var i=0,ii=source.length;i<ii;i++){destination.push(copyElement(source[i],maxDepth))}}else if(isBlankObject(source)){for(key in source){destination[key]=copyElement(source[key],maxDepth)}}else if(source&&typeof source.hasOwnProperty==="function"){for(key in source){if(source.hasOwnProperty(key)){destination[key]=copyElement(source[key],maxDepth)}}}else{for(key in source){if(hasOwnProperty.call(source,key)){destination[key]=copyElement(source[key],maxDepth)}}}setHashKey(destination,h);return destination}function copyElement(source,maxDepth){if(!isObject(source)){return source}var index=stackSource.indexOf(source);if(index!==-1){return stackDest[index]}if(isWindow(source)||isScope(source)){throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.")}var needsRecurse=false;var destination=copyType(source);if(destination===undefined){destination=isArray(source)?[]:Object.create(getPrototypeOf(source));needsRecurse=true}stackSource.push(source);stackDest.push(destination);return needsRecurse?copyRecurse(source,destination,maxDepth):destination}function copyType(source){switch(toString.call(source)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new source.constructor(copyElement(source.buffer),source.byteOffset,source.length);case"[object ArrayBuffer]":if(!source.slice){var copied=new ArrayBuffer(source.byteLength);new Uint8Array(copied).set(new Uint8Array(source));return copied}return source.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new source.constructor(source.valueOf());case"[object RegExp]":var re=new RegExp(source.source,source.toString().match(/[^/]*$/)[0]);re.lastIndex=source.lastIndex;return re;case"[object Blob]":return new source.constructor([source],{type:source.type})}if(isFunction(source.cloneNode)){return source.cloneNode(true)}}}function simpleCompare(a,b){return a===b||a!==a&&b!==b}function equals(o1,o2){if(o1===o2)return true;if(o1===null||o2===null)return false;if(o1!==o1&&o2!==o2)return true;var t1=typeof o1,t2=typeof o2,length,key,keySet;if(t1===t2&&t1==="object"){if(isArray(o1)){if(!isArray(o2))return false;if((length=o1.length)===o2.length){for(key=0;key<length;key++){if(!equals(o1[key],o2[key]))return false}return true}}else if(isDate(o1)){if(!isDate(o2))return false;return simpleCompare(o1.getTime(),o2.getTime())}else if(isRegExp(o1)){if(!isRegExp(o2))return false;return o1.toString()===o2.toString()}else{if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return false;keySet=createMap();for(key in o1){if(key.charAt(0)==="$"||isFunction(o1[key]))continue;if(!equals(o1[key],o2[key]))return false;keySet[key]=true}for(key in o2){if(!(key in keySet)&&key.charAt(0)!=="$"&&isDefined(o2[key])&&!isFunction(o2[key]))return false}return true}}return false}var csp=function(){if(!isDefined(csp.rules)){var ngCspElement=window.document.querySelector("[ng-csp]")||window.document.querySelector("[data-ng-csp]");if(ngCspElement){var ngCspAttribute=ngCspElement.getAttribute("ng-csp")||ngCspElement.getAttribute("data-ng-csp");csp.rules={noUnsafeEval:!ngCspAttribute||ngCspAttribute.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!ngCspAttribute||ngCspAttribute.indexOf("no-inline-style")!==-1}}else{csp.rules={noUnsafeEval:noUnsafeEval(),noInlineStyle:false}}}return csp.rules;function noUnsafeEval(){try{new Function("");return false}catch(e){return true}}};var jq=function(){if(isDefined(jq.name_))return jq.name_;var el;var i,ii=ngAttrPrefixes.length,prefix,name;for(i=0;i<ii;++i){prefix=ngAttrPrefixes[i];el=window.document.querySelector("["+prefix.replace(":","\\:")+"jq]");if(el){name=el.getAttribute(prefix+"jq");break}}return jq.name_=name};function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];if(isFunction(fn)&&!(fn instanceof RegExp)){return curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}else{return fn}}function toJsonReplacer(key,value){var val=value;if(typeof key==="string"&&key.charAt(0)==="$"&&key.charAt(1)==="$"){val=undefined}else if(isWindow(value)){val="$WINDOW"}else if(value&&window.document===value){val="$DOCUMENT"}else if(isScope(value)){val="$SCOPE"}return val}function toJson(obj,pretty){if(isUndefined(obj))return undefined;if(!isNumber(pretty)){pretty=pretty?2:null}return JSON.stringify(obj,toJsonReplacer,pretty)}function fromJson(json){return isString(json)?JSON.parse(json):json}var ALL_COLONS=/:/g;function timezoneToOffset(timezone,fallback){timezone=timezone.replace(ALL_COLONS,"");var requestedTimezoneOffset=Date.parse("Jan 01, 1970 00:00:00 "+timezone)/6e4;return isNumberNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function addDateMinutes(date,minutes){date=new Date(date.getTime());date.setMinutes(date.getMinutes()+minutes);return date}function convertTimezoneToLocal(date,timezone,reverse){reverse=reverse?-1:1;var dateTimezoneOffset=date.getTimezoneOffset();var timezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);return addDateMinutes(date,reverse*(timezoneOffset-dateTimezoneOffset))}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var obj={};forEach((keyValue||"").split("&"),function(keyValue){var splitPoint,key,val;if(keyValue){key=keyValue=keyValue.replace(/\+/g,"%20");splitPoint=keyValue.indexOf("=");if(splitPoint!==-1){key=keyValue.substring(0,splitPoint);val=keyValue.substring(splitPoint+1)}key=tryDecodeURIComponent(key);if(isDefined(key)){val=isDefined(val)?tryDecodeURIComponent(val):true;if(!hasOwnProperty.call(obj,key)){obj[key]=val}else if(isArray(obj[key])){obj[key].push(val)}else{obj[key]=[obj[key],val]}}}});return obj}function toKeyValue(obj){var parts=[];forEach(obj,function(value,key){if(isArray(value)){forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,true)+(arrayValue===true?"":"="+encodeUriQuery(arrayValue,true)))})}else{parts.push(encodeUriQuery(key,true)+(value===true?"":"="+encodeUriQuery(value,true)))}});return parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}var ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"];function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(i=0;i<ii;++i){attr=ngAttrPrefixes[i]+ngAttr;if(isString(attr=element.getAttribute(attr))){return attr}}return null}function allowAutoBootstrap(document){var script=document.currentScript;if(!script){return true}if(!(script instanceof window.HTMLScriptElement||script instanceof window.SVGScriptElement)){return false}var attributes=script.attributes;var srcs=[attributes.getNamedItem("src"),attributes.getNamedItem("href"),attributes.getNamedItem("xlink:href")];return srcs.every(function(src){if(!src){return true}if(!src.value){return false}var link=document.createElement("a");link.href=src.value;if(document.location.origin===link.origin){return true}switch(link.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return true;default:return false}})}var isAutoBootstrapAllowed=allowAutoBootstrap(window.document);function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";if(!appElement&&element.hasAttribute&&element.hasAttribute(name)){appElement=element;module=element.getAttribute(name)}});forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";var candidate;if(!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))){appElement=candidate;module=candidate.getAttribute(name)}});if(appElement){if(!isAutoBootstrapAllowed){window.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates "+"an extension, document.location.href does not match.");return}config.strictDi=getNgAttribute(appElement,"strict-di")!==null;bootstrap(appElement,module?[module]:[],config)}}function bootstrap(element,modules,config){if(!isObject(config))config={};var defaultConfig={strictDi:false};config=extend(defaultConfig,config);var doBootstrap=function(){element=jqLite(element);if(element.injector()){var tag=element[0]===window.document?"document":startingTag(element);throw ngMinErr("btstrpd","App already bootstrapped with this element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[];modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]);if(config.debugInfoEnabled){modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(true)}])}modules.unshift("ng");var injector=createInjector(modules,config.strictDi);injector.invoke(["$rootScope","$rootElement","$compile","$injector",function bootstrapApply(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector);compile(element)(scope)})}]);return injector};var NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/;var NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;if(window&&NG_ENABLE_DEBUG_INFO.test(window.name)){config.debugInfoEnabled=true;window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")}if(window&&!NG_DEFER_BOOTSTRAP.test(window.name)){return doBootstrap()}window.name=window.name.replace(NG_DEFER_BOOTSTRAP,"");angular.resumeBootstrap=function(extraModules){forEach(extraModules,function(module){modules.push(module)});return doBootstrap()};if(isFunction(angular.resumeDeferredBootstrap)){angular.resumeDeferredBootstrap()}}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name;window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector){throw ngMinErr("test","no injector found for element argument to getTestability")}return injector.get("$$testability")}var SNAKE_CASE_REGEXP=/[A-Z]/g;function snake_case(name,separator){separator=separator||"_";return name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var bindJQueryFired=false;function bindJQuery(){var originalCleanData;if(bindJQueryFired){return}var jqName=jq();jQuery=isUndefined(jqName)?window.jQuery:!jqName?undefined:window[jqName];if(jQuery&&jQuery.fn.on){jqLite=jQuery;extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData});originalCleanData=jQuery.cleanData;jQuery.cleanData=function(elems){var events;for(var i=0,elem;(elem=elems[i])!=null;i++){events=jQuery._data(elem,"events");if(events&&events.$destroy){jQuery(elem).triggerHandler("$destroy")}}originalCleanData(elems)}}else{jqLite=JQLite}angular.element=jqLite;bindJQueryFired=true}function assertArg(arg,name,reason){if(!arg){throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required")}return arg}function assertArgFn(arg,name,acceptArrayAnnotation){if(acceptArrayAnnotation&&isArray(arg)){arg=arg[arg.length-1]}assertArg(isFunction(arg),name,"not a function, got "+(arg&&typeof arg==="object"?arg.constructor.name||"Object":typeof arg));return arg}function assertNotHasOwnProperty(name,context){if(name==="hasOwnProperty"){throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}}function getter(obj,path,bindFnToScope){if(!path)return obj;var keys=path.split(".");var key;var lastInstance=obj;var len=keys.length;for(var i=0;i<len;i++){key=keys[i];if(obj){obj=(lastInstance=obj)[key]}}if(!bindFnToScope&&isFunction(obj)){return bind(lastInstance,obj)}return obj}function getBlockNodes(nodes){var node=nodes[0];var endNode=nodes[nodes.length-1];var blockNodes;for(var i=1;node!==endNode&&(node=node.nextSibling);i++){if(blockNodes||nodes[i]!==node){if(!blockNodes){blockNodes=jqLite(slice.call(nodes,0,i))}blockNodes.push(node)}}return blockNodes||nodes}function createMap(){return Object.create(null)}function stringify(value){if(value==null){return""}switch(typeof value){case"string":break;case"number":value=""+value;break;default:if(hasCustomToString(value)&&!isArray(value)&&!isDate(value)){value=value.toString()}else{value=toJson(value)}}return value}var NODE_TYPE_ELEMENT=1;var NODE_TYPE_ATTRIBUTE=2;var NODE_TYPE_TEXT=3;var NODE_TYPE_COMMENT=8;var NODE_TYPE_DOCUMENT=9;var NODE_TYPE_DOCUMENT_FRAGMENT=11;function setupModuleLoader(window){var $injectorMinErr=minErr("$injector");var ngMinErr=minErr("ng");function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var angular=ensure(window,"angular",Object);angular.$$minErr=angular.$$minErr||minErr;return ensure(angular,"module",function(){var modules={};return function module(name,requires,configFn){var info={};var assertNotHasOwnProperty=function(name,context){if(name==="hasOwnProperty"){throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}};assertNotHasOwnProperty(name,"module");if(requires&&modules.hasOwnProperty(name)){modules[name]=null}return ensure(modules,name,function(){if(!requires){throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled "+"the module name or forgot to load it. If registering a module ensure that you "+"specify the dependencies as the second argument.",name)}var invokeQueue=[];var configBlocks=[];var runBlocks=[];var config=invokeLater("$injector","invoke","push",configBlocks);var moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,info:function(value){if(isDefined(value)){if(!isObject(value))throw ngMinErr("aobj","Argument '{0}' must be an object","value");info=value;return this}return info},requires:requires,name:name,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator",configBlocks),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:config,run:function(block){runBlocks.push(block);return this}};if(configFn){config(configFn)}return moduleInstance;function invokeLater(provider,method,insertMethod,queue){if(!queue)queue=invokeQueue;return function(){queue[insertMethod||"push"]([provider,method,arguments]);return moduleInstance}}function invokeLaterAndSetModuleName(provider,method,queue){if(!queue)queue=invokeQueue;return function(recipeName,factoryFunction){if(factoryFunction&&isFunction(factoryFunction))factoryFunction.$$moduleName=name;queue.push([provider,method,arguments]);return moduleInstance}}})}})}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;i<ii;i++){dst[i]=src[i]}}else if(isObject(src)){dst=dst||{};for(var key in src){if(!(key.charAt(0)==="$"&&key.charAt(1)==="$")){dst[key]=src[key]}}}return dst||src}function serializeObject(obj,maxDepth){var seen=[];if(isValidObjectMaxDepth(maxDepth)){obj=copy(obj,null,maxDepth)}return JSON.stringify(obj,function(key,val){val=toJsonReplacer(key,val);if(isObject(val)){if(seen.indexOf(val)>=0)return"...";seen.push(val)}return val})}function toDebugString(obj,maxDepth){if(typeof obj==="function"){return obj.toString().replace(/ \{[\s\S]*$/,"")}else if(isUndefined(obj)){return"undefined"}else if(typeof obj!=="string"){return serializeObject(obj,maxDepth)}return obj}var version={full:"1.6.4",major:1,minor:6,dot:4,codeName:"phenomenal-footnote"};function publishExternalAPI(angular){extend(angular,{errorHandlingConfig:errorHandlingConfig,bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{$$counter:0},getTestability:getTestability,reloadWithDebugInfo:reloadWithDebugInfo,$$minErr:minErr,$$csp:csp,$$encodeUriSegment:encodeUriSegment,$$encodeUriQuery:encodeUriQuery,$$stringify:stringify});angularModule=setupModuleLoader(window);angularModule("ng",["ngLocale"],["$provide",function ngModule($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider});$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives);$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$animateCss:$CoreAnimateCssProvider,$$animateJs:$$CoreAnimateJsProvider,$$animateQueue:$$CoreAnimateQueueProvider,$$AnimateRunner:$$AnimateRunnerFactoryProvider,$$animateAsyncRun:$$AnimateAsyncRunFactoryProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$$isDocumentHidden:$$IsDocumentHiddenProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:$$ForceReflowProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$jsonpCallbacks:$jsonpCallbacksProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$Map:$$MapProvider,$$cookieReader:$$CookieReaderProvider})}]).info({angularVersion:"1.6.4"})}JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1;JQLite._data=function(node){return this.cache[node[this.expando]]||{}};function jqNextId(){return++jqId}var DASH_LOWERCASE_REGEXP=/-([a-z])/g;var MS_HACK_REGEXP=/^-ms-/;var MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"};var jqLiteMinErr=minErr("jqLite");function cssKebabToCamel(name){return kebabToCamel(name.replace(MS_HACK_REGEXP,"ms-"))}function fnCamelCaseReplace(all,letter){return letter.toUpperCase()}function kebabToCamel(name){return name.replace(DASH_LOWERCASE_REGEXP,fnCamelCaseReplace)}var SINGLE_TAG_REGEXP=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/;var HTML_REGEXP=/<|&#?\w+;/;var TAG_NAME_REGEXP=/<([\w:-]+)/;var XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi;var wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteHasData(node){for(var key in jqCache[node.ng339]){return true}return false}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,fragment=context.createDocumentFragment(),nodes=[],i;if(jqLiteIsTextNode(html)){nodes.push(context.createTextNode(html))}else{tmp=fragment.appendChild(context.createElement("div"));tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2];i=wrap[0];while(i--){tmp=tmp.lastChild}nodes=concat(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}fragment.textContent="";fragment.innerHTML="";forEach(nodes,function(node){fragment.appendChild(node)});return fragment}function jqLiteParseHTML(html,context){context=context||window.document;var parsed;if(parsed=SINGLE_TAG_REGEXP.exec(html)){return[context.createElement(parsed[1])]}if(parsed=jqLiteBuildFragment(html,context)){return parsed.childNodes}return[]}function jqLiteWrapNode(node,wrapper){var parent=node.parentNode;if(parent){parent.replaceChild(wrapper,node)}wrapper.appendChild(node)}var jqLiteContains=window.Node.prototype.contains||function(arg){return!!(this.compareDocumentPosition(arg)&16)};function JQLite(element){if(element instanceof JQLite){return element}var argIsString;if(isString(element)){element=trim(element);argIsString=true}if(!(this instanceof JQLite)){if(argIsString&&element.charAt(0)!=="<"){throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element")}return new JQLite(element)}if(argIsString){jqLiteAddNodes(this,jqLiteParseHTML(element))}else if(isFunction(element)){jqLiteReady(element)}else{jqLiteAddNodes(this,element)}}function jqLiteClone(element){return element.cloneNode(true)}function jqLiteDealoc(element,onlyDescendants){if(!onlyDescendants&&jqLiteAcceptsData(element))jqLite.cleanData([element]);if(element.querySelectorAll){jqLite.cleanData(element.querySelectorAll("*"))}}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element);var events=expandoStore&&expandoStore.events;var handle=expandoStore&&expandoStore.handle;if(!handle)return;if(!type){for(type in events){if(type!=="$destroy"){element.removeEventListener(type,handle)}delete events[type]}}else{var removeHandler=function(type){var listenerFns=events[type];if(isDefined(fn)){arrayRemove(listenerFns||[],fn)}if(!(isDefined(fn)&&listenerFns&&listenerFns.length>0)){element.removeEventListener(type,handle);delete events[type]}};forEach(type.split(" "),function(type){removeHandler(type);if(MOUSE_EVENT_MAP[type]){removeHandler(MOUSE_EVENT_MAP[type])}})}}function jqLiteRemoveData(element,name){var expandoId=element.ng339;var expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name){delete expandoStore.data[name];return}if(expandoStore.handle){if(expandoStore.events.$destroy){expandoStore.handle({},"$destroy")}jqLiteOff(element)}delete jqCache[expandoId];element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(createIfNecessary&&!expandoStore){element.ng339=expandoId=jqNextId();expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}}return expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var prop;var isSimpleSetter=isDefined(value);var isSimpleGetter=!isSimpleSetter&&key&&!isObject(key);var massGetter=!key;var expandoStore=jqLiteExpandoStore(element,!isSimpleGetter);var data=expandoStore&&expandoStore.data;if(isSimpleSetter){data[kebabToCamel(key)]=value}else{if(massGetter){return data}else{if(isSimpleGetter){return data&&data[kebabToCamel(key)]}else{for(prop in key){data[kebabToCamel(prop)]=key[prop]}}}}}}function jqLiteHasClass(element,selector){if(!element.getAttribute)return false;return(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1}function jqLiteRemoveClass(element,cssClasses){if(cssClasses&&element.setAttribute){forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass);if(existingClasses.indexOf(" "+cssClass+" ")===-1){existingClasses+=cssClass+" "}});element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements){if(elements.nodeType){root[root.length++]=elements}else{var length=elements.length;if(typeof length==="number"&&elements.window!==elements){if(length){for(var i=0;i<length;i++){root[root.length++]=elements[i]}}}else{root[root.length++]=elements}}}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){if(element.nodeType===NODE_TYPE_DOCUMENT){element=element.documentElement}var names=isArray(name)?name:[name];while(element){for(var i=0,ii=names.length;i<ii;i++){if(isDefined(value=jqLite.data(element,names[i])))return value}element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){jqLiteDealoc(element,true);while(element.firstChild){element.removeChild(element.firstChild)}}function jqLiteRemove(element,keepData){if(!keepData)jqLiteDealoc(element);var parent=element.parentNode;if(parent)parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){win=win||window;if(win.document.readyState==="complete"){win.setTimeout(action)}else{jqLite(win).on("load",action)}}function jqLiteReady(fn){function trigger(){window.document.removeEventListener("DOMContentLoaded",trigger);window.removeEventListener("load",trigger);fn()}if(window.document.readyState==="complete"){window.setTimeout(fn)}else{window.document.addEventListener("DOMContentLoaded",trigger);window.addEventListener("load",trigger)}}var JQLitePrototype=JQLite.prototype={ready:jqLiteReady,toString:function(){var value=[];forEach(this,function(e){value.push(""+e)});return"["+value.join(", ")+"]"},eq:function(index){return index>=0?jqLite(this[index]):jqLite(this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice};var BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=true});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(name){return ALIASED_ATTR[name]}forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData,cleanData:function jqLiteCleanData(nodes){for(var i=0,ii=nodes.length;i<ii;i++){jqLiteRemoveData(nodes[i])}}},function(fn,name){JQLite[name]=fn});forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){name=cssKebabToCamel(name);if(isDefined(value)){element.style[name]=value}else{return element.style[name]}},attr:function(element,name,value){var ret;var nodeType=element.nodeType;if(nodeType===NODE_TYPE_TEXT||nodeType===NODE_TYPE_ATTRIBUTE||nodeType===NODE_TYPE_COMMENT||!element.getAttribute){return}var lowercasedName=lowercase(name);var isBooleanAttr=BOOLEAN_ATTR[lowercasedName];if(isDefined(value)){if(value===null||value===false&&isBooleanAttr){element.removeAttribute(name)}else{element.setAttribute(name,isBooleanAttr?lowercasedName:value)}}else{ret=element.getAttribute(name);if(isBooleanAttr&&ret!==null){ret=lowercasedName}return ret===null?undefined:ret}},prop:function(element,name,value){if(isDefined(value)){element[name]=value}else{return element[name]}},text:function(){getText.$dv="";return getText;function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:""}element.textContent=value}}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&nodeName_(element)==="select"){var result=[];forEach(element.options,function(option){if(option.selected){result.push(option.value||option.text)}});return result}return element.value}element.value=value},html:function(element,value){if(isUndefined(value)){return element.innerHTML}jqLiteDealoc(element,true);element.innerHTML=value},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key;var nodeCount=this.length;if(fn!==jqLiteEmpty&&isUndefined(fn.length===2&&(fn!==jqLiteHasClass&&fn!==jqLiteController)?arg1:arg2)){if(isObject(arg1)){for(i=0;i<nodeCount;i++){if(fn===jqLiteData){fn(this[i],arg1)}else{for(key in arg1){fn(this[i],key,arg1[key])}}}return this}else{var value=fn.$dv;var jj=isUndefined(value)?Math.min(nodeCount,1):nodeCount;for(var j=0;j<jj;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}}else{for(i=0;i<nodeCount;i++){fn(this[i],arg1,arg2)}return this}}});function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type];var eventFnsLength=eventFns?eventFns.length:0;if(!eventFnsLength)return;if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=true;if(event.stopPropagation){event.stopPropagation()}if(originalStopImmediatePropagation){originalStopImmediatePropagation.call(event)}}}event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===true};var handlerWrapper=eventFns.specialHandlerWrapper||defaultHandlerWrapper;if(eventFnsLength>1){eventFns=shallowCopy(eventFns)}for(var i=0;i<eventFnsLength;i++){if(!event.isImmediatePropagationStopped()){handlerWrapper(element,event,eventFns[i])}}};eventHandler.elem=element;return eventHandler}function defaultHandlerWrapper(element,event,handler){handler.call(element,event)}function specialMouseHandlerWrapper(target,event,handler){var related=event.relatedTarget;if(!related||related!==target&&!jqLiteContains.call(target,related)){handler.call(target,event)}}forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(!jqLiteAcceptsData(element)){return}var expandoStore=jqLiteExpandoStore(element,true);var events=expandoStore.events;var handle=expandoStore.handle;if(!handle){handle=expandoStore.handle=createEventHandler(element,events)}var types=type.indexOf(" ")>=0?type.split(" "):[type];var i=types.length;var addHandler=function(type,specialHandlerWrapper,noEventListener){var eventFns=events[type];if(!eventFns){eventFns=events[type]=[];eventFns.specialHandlerWrapper=specialHandlerWrapper;if(type!=="$destroy"&&!noEventListener){element.addEventListener(type,handle)}}eventFns.push(fn)};while(i--){type=types[i];if(MOUSE_EVENT_MAP[type]){addHandler(MOUSE_EVENT_MAP[type],specialMouseHandlerWrapper);addHandler(type,undefined,true)}else{addHandler(type)}}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element);element.on(type,function onFn(){element.off(type,fn);element.off(type,onFn)});element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element);forEach(new JQLite(replaceNode),function(node){if(index){parent.insertBefore(node,index.nextSibling)}else{parent.replaceChild(node,element)}index=node})},children:function(element){var children=[];forEach(element.childNodes,function(element){if(element.nodeType===NODE_TYPE_ELEMENT){children.push(element)}});return children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType!==NODE_TYPE_ELEMENT&&nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT)return;node=new JQLite(node);for(var i=0,ii=node.length;i<ii;i++){var child=node[i];element.appendChild(child)}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){jqLiteWrapNode(element,jqLite(wrapNode).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,true)},after:function(element,newElement){var index=element,parent=element.parentNode;if(parent){newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;i<ii;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling);index=node}}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){if(selector){forEach(selector.split(" "),function(className){var classCondition=condition;if(isUndefined(classCondition)){classCondition=!jqLiteHasClass(element,className)}(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})}},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){if(element.getElementsByTagName){return element.getElementsByTagName(selector)}else{return[]}},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs;var eventName=event.type||event;var expandoStore=jqLiteExpandoStore(element);var events=expandoStore&&expandoStore.events;var eventFns=events&&events[eventName];if(eventFns){dummyEvent={preventDefault:function(){this.defaultPrevented=true},isDefaultPrevented:function(){return this.defaultPrevented===true},stopImmediatePropagation:function(){this.immediatePropagationStopped=true},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===true},stopPropagation:noop,type:eventName,target:element};if(event.type){dummyEvent=extend(dummyEvent,event)}eventFnsCopy=shallowCopy(eventFns);handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent];forEach(eventFnsCopy,function(fn){if(!dummyEvent.isImmediatePropagationStopped()){fn.apply(element,handlerArgs)}})}}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){var value;for(var i=0,ii=this.length;i<ii;i++){if(isUndefined(value)){value=fn(this[i],arg1,arg2,arg3);if(isDefined(value)){value=jqLite(value)}}else{jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3))}}return isDefined(value)?value:this}});JQLite.prototype.bind=JQLite.prototype.on;JQLite.prototype.unbind=JQLite.prototype.off;function $$jqLiteProvider(){this.$get=function $$jqLite(){return extend(JQLite,{hasClass:function(node,classes){if(node.attr)node=node[0];return jqLiteHasClass(node,classes)},addClass:function(node,classes){if(node.attr)node=node[0];return jqLiteAddClass(node,classes)},removeClass:function(node,classes){if(node.attr)node=node[0];return jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key){if(typeof key==="function"){key=obj.$$hashKey()}return key}var objType=typeof obj;if(objType==="function"||objType==="object"&&obj!==null){key=obj.$$hashKey=objType+":"+(nextUidFn||nextUid)()}else{key=objType+":"+obj}return key}var nanKey=Object.create(null);function NgMapShim(){this._keys=[];this._values=[];this._lastKey=NaN;this._lastIndex=-1}NgMapShim.prototype={_idx:function(key){if(key===this._lastKey){return this._lastIndex}this._lastKey=key;this._lastIndex=this._keys.indexOf(key);return this._lastIndex},_transformKey:function(key){return isNumberNaN(key)?nanKey:key},get:function(key){key=this._transformKey(key);var idx=this._idx(key);if(idx!==-1){return this._values[idx]}},set:function(key,value){key=this._transformKey(key);var idx=this._idx(key);if(idx===-1){idx=this._lastIndex=this._keys.length}this._keys[idx]=key;this._values[idx]=value},delete:function(key){key=this._transformKey(key);var idx=this._idx(key);if(idx===-1){return false}this._keys.splice(idx,1);this._values.splice(idx,1);this._lastKey=NaN;this._lastIndex=-1;return true}};var NgMap=NgMapShim;var $$MapProvider=[function(){this.$get=[function(){return NgMap}]}];var ARROW_ARG=/^([^(]+?)=>/;var FN_ARGS=/^[^(]*\(\s*([^)]*)\)/m;var FN_ARG_SPLIT=/,/;var FN_ARG=/^\s*(_?)(\S+?)\1\s*$/;var STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;var $injectorMinErr=minErr("$injector");function stringifyFn(fn){return Function.prototype.toString.call(fn)}function extractArgs(fn){var fnText=stringifyFn(fn).replace(STRIP_COMMENTS,""),args=fnText.match(ARROW_ARG)||fnText.match(FN_ARGS);return args}function anonFn(fn){var args=extractArgs(fn);if(args){return"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")"}return"fn"}function annotate(fn,strictDi,name){var $inject,argDecl,last;if(typeof fn==="function"){if(!($inject=fn.$inject)){$inject=[];if(fn.length){if(strictDi){if(!isString(name)||!name){name=fn.name||anonFn(fn)}throw $injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name)}argDecl=extractArgs(fn);forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else if(isArray(fn)){last=fn.length-1;assertArgFn(fn[last],"fn");$inject=fn.slice(0,last)}else{assertArgFn(fn,"fn",true)}return $inject}function createInjector(modulesToLoad,strictDi){strictDi=strictDi===true;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new NgMap,providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){if(angular.isString(caller)){path.push(caller)}throw $injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},protoInstanceInjector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)}),instanceInjector=protoInstanceInjector;providerCache["$injector"+providerSuffix]={$get:valueFn(protoInstanceInjector)};instanceInjector.modules=providerInjector.modules=createMap();var runBlocks=loadModules(modulesToLoad);instanceInjector=protoInstanceInjector.get("$injector");instanceInjector.strictDi=strictDi;forEach(runBlocks,function(fn){if(fn)instanceInjector.invoke(fn)});return instanceInjector;function supportObject(delegate){return function(key,value){if(isObject(key)){forEach(key,reverseParams(delegate))}else{return delegate(key,value)}}}function provider(name,provider_){assertNotHasOwnProperty(name,"service");if(isFunction(provider_)||isArray(provider_)){provider_=providerInjector.instantiate(provider_)}if(!provider_.$get){throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name)}return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function enforcedReturnValue(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result)){throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name)}return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==false?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),false)}function constant(name,value){assertNotHasOwnProperty(name,"constant");providerCache[name]=value;instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){assertArg(isUndefined(modulesToLoad)||isArray(modulesToLoad),"modulesToLoad","not an array");var runBlocks=[],moduleFn;forEach(modulesToLoad,function(module){if(loadedModules.get(module))return;loadedModules.set(module,true);function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;i<ii;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}try{if(isString(module)){moduleFn=angularModule(module);instanceInjector.modules[module]=moduleFn;runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks);runInvokeQueue(moduleFn._invokeQueue);runInvokeQueue(moduleFn._configBlocks)}else if(isFunction(module)){runBlocks.push(providerInjector.invoke(module))}else if(isArray(module)){runBlocks.push(providerInjector.invoke(module))}else{assertArgFn(module,"module")}}catch(e){if(isArray(module)){module=module[module.length-1]}if(e.message&&e.stack&&e.stack.indexOf(e.message)===-1){e=e.message+"\n"+e.stack}throw $injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}});return runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING){throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "))}return cache[serviceName]}else{try{path.unshift(serviceName);cache[serviceName]=INSTANTIATING;cache[serviceName]=factory(serviceName,caller);return cache[serviceName]}catch(err){if(cache[serviceName]===INSTANTIATING){delete cache[serviceName]}throw err}finally{path.shift()}}}function injectionArgs(fn,locals,serviceName){var args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName);for(var i=0,length=$inject.length;i<length;i++){var key=$inject[i];if(typeof key!=="string"){throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key)}args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return args}function isClass(func){if(msie||typeof func!=="function"){return false}var result=func.$$ngIsClass;if(!isBoolean(result)){result=func.$$ngIsClass=/^(?:class\b|constructor\()/.test(stringifyFn(func))}return result}function invoke(fn,self,locals,serviceName){if(typeof locals==="string"){serviceName=locals;locals=null}var args=injectionArgs(fn,locals,serviceName);if(isArray(fn)){fn=fn[fn.length-1]}if(!isClass(fn)){return fn.apply(self,args)}else{args.unshift(null);return new(Function.prototype.bind.apply(fn,args))}}function instantiate(Type,locals,serviceName){var ctor=isArray(Type)?Type[Type.length-1]:Type;var args=injectionArgs(Type,locals,serviceName);args.unshift(null);return new(Function.prototype.bind.apply(ctor,args))}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}}createInjector.$$annotate=annotate;function $AnchorScrollProvider(){var autoScrollingEnabled=true;this.disableAutoScrolling=function(){autoScrollingEnabled=false};this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){var document=$window.document;function getFirstAnchor(list){var result=null;Array.prototype.some.call(list,function(element){if(nodeName_(element)==="a"){result=element;return true}});return result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset)){offset=offset()}else if(isElement(offset)){var elem=offset[0];var style=$window.getComputedStyle(elem);if(style.position!=="fixed"){offset=0}else{offset=elem.getBoundingClientRect().bottom}}else if(!isNumber(offset)){offset=0}return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else{$window.scrollTo(0,0)}}function scroll(hash){hash=isString(hash)?hash:isNumber(hash)?hash.toString():$location.hash();var elm;if(!hash)scrollTo(null);else if(elm=document.getElementById(hash))scrollTo(elm);else if(elm=getFirstAnchor(document.getElementsByName(hash)))scrollTo(elm);else if(hash==="top")scrollTo(null)}if(autoScrollingEnabled){$rootScope.$watch(function autoScrollWatch(){return $location.hash()},function autoScrollWatchAction(newVal,oldVal){if(newVal===oldVal&&newVal==="")return;jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})})}return scroll}]}var $animateMinErr=minErr("$animate");var ELEMENT_NODE=1;var NG_ANIMATE_CLASSNAME="ng-animate";function mergeClasses(a,b){if(!a&&!b)return"";if(!a)return b;if(!b)return a;if(isArray(a))a=a.join(" ");if(isArray(b))b=b.join(" ");return a+" "+b}function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType===ELEMENT_NODE){return elm}}}function splitClasses(classes){if(isString(classes)){classes=classes.split(" ")}var obj=createMap();forEach(classes,function(klass){if(klass.length){obj[klass]=true}});return obj}function prepareAnimateOptions(options){return isObject(options)?options:{}}var $$CoreAnimateJsProvider=function(){this.$get=noop};var $$CoreAnimateQueueProvider=function(){var postDigestQueue=new NgMap;var postDigestElements=[];this.$get=["$$AnimateRunner","$rootScope",function($$AnimateRunner,$rootScope){return{enabled:noop,on:noop,off:noop,pin:noop,push:function(element,event,options,domOperation){if(domOperation){domOperation()}options=options||{};if(options.from){element.css(options.from)}if(options.to){element.css(options.to)}if(options.addClass||options.removeClass){addRemoveClassesPostDigest(element,options.addClass,options.removeClass)}var runner=new $$AnimateRunner;runner.complete();return runner}};function updateData(data,classes,value){var changed=false;if(classes){classes=isString(classes)?classes.split(" "):isArray(classes)?classes:[];forEach(classes,function(className){if(className){changed=true;data[className]=value}})}return changed}function handleCSSClassChanges(){forEach(postDigestElements,function(element){var data=postDigestQueue.get(element);if(data){var existing=splitClasses(element.attr("class"));var toAdd="";var toRemove="";forEach(data,function(status,className){var hasClass=!!existing[className];if(status!==hasClass){if(status){toAdd+=(toAdd.length?" ":"")+className}else{toRemove+=(toRemove.length?" ":"")+className}}});forEach(element,function(elm){if(toAdd){jqLiteAddClass(elm,toAdd)}if(toRemove){jqLiteRemoveClass(elm,toRemove)}});postDigestQueue.delete(element)}});postDigestElements.length=0}function addRemoveClassesPostDigest(element,add,remove){var data=postDigestQueue.get(element)||{};var classesAdded=updateData(data,add,true);var classesRemoved=updateData(data,remove,false);if(classesAdded||classesRemoved){postDigestQueue.set(element,data);postDigestElements.push(element);if(postDigestElements.length===1){$rootScope.$$postDigest(handleCSSClassChanges)}}}}]};var $AnimateProvider=["$provide",function($provide){var provider=this;var classNameFilter=null;this.$$registeredAnimations=Object.create(null);this.register=function(name,factory){if(name&&name.charAt(0)!=="."){throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name)}var key=name+"-animation";provider.$$registeredAnimations[name.substr(1)]=key;$provide.factory(key,factory)};this.classNameFilter=function(expression){if(arguments.length===1){classNameFilter=expression instanceof RegExp?expression:null;if(classNameFilter){var reservedRegex=new RegExp("[(\\s|\\/)]"+NG_ANIMATE_CLASSNAME+"[(\\s|\\/)]");if(reservedRegex.test(classNameFilter.toString())){classNameFilter=null;throw $animateMinErr("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',NG_ANIMATE_CLASSNAME)}}}return classNameFilter};this.$get=["$$animateQueue",function($$animateQueue){function domInsert(element,parentElement,afterElement){if(afterElement){var afterNode=extractElementNode(afterElement);if(afterNode&&!afterNode.parentNode&&!afterNode.previousElementSibling){afterElement=null}}if(afterElement){afterElement.after(element)}else{parentElement.prepend(element)}}return{on:$$animateQueue.on,off:$$animateQueue.off,pin:$$animateQueue.pin,enabled:$$animateQueue.enabled,cancel:function(runner){if(runner.end){runner.end()}},enter:function(element,parent,after,options){parent=parent&&jqLite(parent);after=after&&jqLite(after);parent=parent||after.parent();domInsert(element,parent,after);return $$animateQueue.push(element,"enter",prepareAnimateOptions(options))},move:function(element,parent,after,options){parent=parent&&jqLite(parent);after=after&&jqLite(after);parent=parent||after.parent();domInsert(element,parent,after);return $$animateQueue.push(element,"move",prepareAnimateOptions(options))},leave:function(element,options){return $$animateQueue.push(element,"leave",prepareAnimateOptions(options),function(){element.remove()})},addClass:function(element,className,options){options=prepareAnimateOptions(options);options.addClass=mergeClasses(options.addclass,className);return $$animateQueue.push(element,"addClass",options)},removeClass:function(element,className,options){options=prepareAnimateOptions(options);options.removeClass=mergeClasses(options.removeClass,className);return $$animateQueue.push(element,"removeClass",options)},setClass:function(element,add,remove,options){options=prepareAnimateOptions(options);options.addClass=mergeClasses(options.addClass,add);options.removeClass=mergeClasses(options.removeClass,remove);return $$animateQueue.push(element,"setClass",options)},animate:function(element,from,to,className,options){options=prepareAnimateOptions(options);options.from=options.from?extend(options.from,from):from;options.to=options.to?extend(options.to,to):to;className=className||"ng-inline-animate";options.tempClasses=mergeClasses(options.tempClasses,className);return $$animateQueue.push(element,"animate",options)}}}]}];var $$AnimateAsyncRunFactoryProvider=function(){this.$get=["$$rAF",function($$rAF){var waitQueue=[];function waitForTick(fn){waitQueue.push(fn);if(waitQueue.length>1)return;$$rAF(function(){for(var i=0;i<waitQueue.length;i++){waitQueue[i]()}waitQueue=[]})}return function(){var passed=false;waitForTick(function(){passed=true});return function(callback){if(passed){callback()}else{waitForTick(callback)}}}}]};var $$AnimateRunnerFactoryProvider=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function($q,$sniffer,$$animateAsyncRun,$$isDocumentHidden,$timeout){var INITIAL_STATE=0;var DONE_PENDING_STATE=1;var DONE_COMPLETE_STATE=2;AnimateRunner.chain=function(chain,callback){var index=0;next();function next(){if(index===chain.length){callback(true);return}chain[index](function(response){if(response===false){callback(false);return}index++;next()})}};AnimateRunner.all=function(runners,callback){var count=0;var status=true;forEach(runners,function(runner){runner.done(onProgress)});function onProgress(response){status=status&&response;if(++count===runners.length){callback(status)}}};function AnimateRunner(host){this.setHost(host);var rafTick=$$animateAsyncRun();var timeoutTick=function(fn){$timeout(fn,0,false)};this._doneCallbacks=[];this._tick=function(fn){if($$isDocumentHidden()){timeoutTick(fn)}else{rafTick(fn)}};this._state=0}AnimateRunner.prototype={setHost:function(host){this.host=host||{}},done:function(fn){if(this._state===DONE_COMPLETE_STATE){fn()}else{this._doneCallbacks.push(fn)}},progress:noop,getPromise:function(){if(!this.promise){var self=this;this.promise=$q(function(resolve,reject){self.done(function(status){if(status===false){reject()}else{resolve()}})})}return this.promise},then:function(resolveHandler,rejectHandler){return this.getPromise().then(resolveHandler,rejectHandler)},catch:function(handler){return this.getPromise()["catch"](handler)},finally:function(handler){return this.getPromise()["finally"](handler)},pause:function(){if(this.host.pause){this.host.pause()}},resume:function(){if(this.host.resume){this.host.resume()}},end:function(){if(this.host.end){this.host.end()}this._resolve(true)},cancel:function(){if(this.host.cancel){this.host.cancel()}this._resolve(false)},complete:function(response){var self=this;if(self._state===INITIAL_STATE){self._state=DONE_PENDING_STATE;self._tick(function(){self._resolve(response)})}},_resolve:function(response){if(this._state!==DONE_COMPLETE_STATE){forEach(this._doneCallbacks,function(fn){fn(response)});this._doneCallbacks.length=0;this._state=DONE_COMPLETE_STATE}}};return AnimateRunner}]};var $CoreAnimateCssProvider=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function($$rAF,$q,$$AnimateRunner){return function(element,initialOptions){var options=initialOptions||{};if(!options.$$prepared){options=copy(options)}if(options.cleanupStyles){options.from=options.to=null}if(options.from){element.css(options.from);options.from=null}var closed,runner=new $$AnimateRunner;return{start:run,end:run};function run(){$$rAF(function(){applyAnimationContents();if(!closed){runner.complete()}closed=true});return runner}function applyAnimationContents(){if(options.addClass){element.addClass(options.addClass);options.addClass=null}if(options.removeClass){element.removeClass(options.removeClass);options.removeClass=null}if(options.to){element.css(options.to);options.to=null}}}}]};function Browser(window,document,$log,$sniffer){var self=this,location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=false;var outstandingRequestCount=0;var outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest;self.$$incOutstandingRequestCount=function(){outstandingRequestCount++};function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{outstandingRequestCount--;if(outstandingRequestCount===0){while(outstandingRequestCallbacks.length){try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}}}function getHash(url){var index=url.indexOf("#");return index===-1?"":url.substr(index)}self.notifyWhenNoOutstandingRequests=function(callback){if(outstandingRequestCount===0){callback()}else{outstandingRequestCallbacks.push(callback)}};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),pendingLocation=null,getCurrentState=!$sniffer.history?noop:function getCurrentState(){try{return history.state}catch(e){}};cacheState();self.url=function(url,replace,state){if(isUndefined(state)){state=null}if(location!==window.location)location=window.location;if(history!==window.history)history=window.history;if(url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState)){return self}var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);lastBrowserUrl=url;lastHistoryState=state;if($sniffer.history&&(!sameBase||!sameState)){history[replace?"replaceState":"pushState"](state,"",url);cacheState()}else{if(!sameBase){pendingLocation=url}if(replace){location.replace(url)}else if(!sameBase){location.href=url}else{location.hash=getHash(url)}if(location.href!==url){pendingLocation=url}}if(pendingLocation){pendingLocation=url}return self}else{return pendingLocation||location.href.replace(/%27/g,"'")}};self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=false;function cacheStateAndFireUrlChange(){pendingLocation=null;fireStateOrUrlChange()}var lastCachedState=null;function cacheState(){cachedState=getCurrentState();cachedState=isUndefined(cachedState)?null:cachedState;if(equals(cachedState,lastCachedState)){cachedState=lastCachedState}lastCachedState=cachedState;lastHistoryState=cachedState}function fireStateOrUrlChange(){var prevLastHistoryState=lastHistoryState;cacheState();if(lastBrowserUrl===self.url()&&prevLastHistoryState===cachedState){return}lastBrowserUrl=self.url();lastHistoryState=cachedState;forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)})}self.onUrlChange=function(callback){if(!urlChangeInit){if($sniffer.history)jqLite(window).on("popstate",cacheStateAndFireUrlChange);jqLite(window).on("hashchange",cacheStateAndFireUrlChange);urlChangeInit=true}urlChangeListeners.push(callback);return callback};self.$$applicationDestroyed=function(){jqLite(window).off("hashchange popstate",cacheStateAndFireUrlChange)};self.$$checkUrlChange=fireStateOrUrlChange;self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?:)?\/\/[^/]*/,""):""};self.defer=function(fn,delay){var timeoutId;outstandingRequestCount++;timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId];completeOutstandingRequest(fn)},delay||0);pendingDeferIds[timeoutId]=true;return timeoutId};self.defer.cancel=function(deferId){if(pendingDeferIds[deferId]){delete pendingDeferIds[deferId];clearTimeout(deferId);completeOutstandingRequest(noop);return true}return false}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){var caches={};function cacheFactory(cacheId,options){if(cacheId in caches){throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId)}var size=0,stats=extend({},options,{id:cacheId}),data=createMap(),capacity=options&&options.capacity||Number.MAX_VALUE,lruHash=createMap(),freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(isUndefined(value))return;if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}if(!(key in data))size++;data[key]=value;if(size>capacity){this.remove(staleEnd.key)}return value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;if(lruEntry===freshEnd)freshEnd=lruEntry.p;if(lruEntry===staleEnd)staleEnd=lruEntry.n;link(lruEntry.n,lruEntry.p);delete lruHash[key]}if(!(key in data))return;delete data[key];size--},removeAll:function(){data=createMap();size=0;lruHash=createMap();freshEnd=staleEnd=null},destroy:function(){data=null;stats=null;lruHash=null;delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}};function refresh(entry){if(entry!==freshEnd){if(!staleEnd){staleEnd=entry}else if(staleEnd===entry){staleEnd=entry.n}link(entry.n,entry.p);link(entry,freshEnd);freshEnd=entry;freshEnd.n=null}}function link(nextEntry,prevEntry){if(nextEntry!==prevEntry){if(nextEntry)nextEntry.p=prevEntry;if(prevEntry)prevEntry.n=nextEntry}}}cacheFactory.info=function(){var info={};forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()});return info};cacheFactory.get=function(cacheId){return caches[cacheId]};return cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){return $cacheFactory("templates")}]}var $compileMinErr=minErr("$compile");function UNINITIALIZED_VALUE(){}var _UNINITIALIZED_VALUE=new UNINITIALIZED_VALUE;$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];function $CompileProvider($provide,$$sanitizeUriProvider){var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive:\s*([\w-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w-]+)(?::([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/;var EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;var bindingCache=createMap();function parseIsolateBindings(scope,directiveName,isController){var LOCAL_REGEXP=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/;var bindings=createMap();forEach(scope,function(definition,scopeName){if(definition in bindingCache){bindings[scopeName]=bindingCache[definition];return}var match=definition.match(LOCAL_REGEXP);if(!match){throw $compileMinErr("iscp","Invalid {3} for directive '{0}'."+" Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition,isController?"controller bindings definition":"isolate scope definition")}bindings[scopeName]={mode:match[1][0],collection:match[2]==="*",optional:match[3]==="?",attrName:match[4]||scopeName};if(match[4]){bindingCache[definition]=bindings[scopeName]}});return bindings}function parseDirectiveBindings(directive,directiveName){var bindings={isolateScope:null,bindToController:null};if(isObject(directive.scope)){if(directive.bindToController===true){bindings.bindToController=parseIsolateBindings(directive.scope,directiveName,true);bindings.isolateScope={}}else{bindings.isolateScope=parseIsolateBindings(directive.scope,directiveName,false)}}if(isObject(directive.bindToController)){bindings.bindToController=parseIsolateBindings(directive.bindToController,directiveName,true)}if(bindings.bindToController&&!directive.controller){throw $compileMinErr("noctrl","Cannot bind to controller without directive '{0}'s controller.",directiveName)}return bindings}function assertValidDirectiveName(name){var letter=name.charAt(0);if(!letter||letter!==lowercase(letter)){throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",name)}if(name!==name.trim()){throw $compileMinErr("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",name)}}function getDirectiveRequire(directive){var require=directive.require||directive.controller&&directive.name;if(!isArray(require)&&isObject(require)){forEach(require,function(value,key){var match=value.match(REQUIRE_PREFIX_REGEXP);var name=value.substring(match[0].length);if(!name)require[key]=match[0]+key})}return require}function getDirectiveRestrict(restrict,name){if(restrict&&!(isString(restrict)&&/[EACM]/.test(restrict))){throw $compileMinErr("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",restrict,name)}return restrict||"EA"}this.directive=function registerDirective(name,directiveFactory){assertArg(name,"name");assertNotHasOwnProperty(name,"directive");if(isString(name)){assertValidDirectiveName(name);assertArg(directiveFactory,"directiveFactory");if(!hasDirectives.hasOwnProperty(name)){hasDirectives[name]=[];$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);if(isFunction(directive)){directive={compile:valueFn(directive)}}else if(!directive.compile&&directive.link){directive.compile=valueFn(directive.link)}directive.priority=directive.priority||0;directive.index=index;directive.name=directive.name||name;directive.require=getDirectiveRequire(directive);directive.restrict=getDirectiveRestrict(directive.restrict,name);directive.$$moduleName=directiveFactory.$$moduleName;directives.push(directive)}catch(e){$exceptionHandler(e)}});return directives}])}hasDirectives[name].push(directiveFactory)}else{forEach(name,reverseParams(registerDirective))}return this};this.component=function registerComponent(name,options){var controller=options.controller||function(){};function factory($injector){function makeInjectable(fn){if(isFunction(fn)||isArray(fn)){return function(tElement,tAttrs){return $injector.invoke(fn,this,{$element:tElement,$attrs:tAttrs})}}else{return fn}}var template=!options.template&&!options.templateUrl?"":options.template;var ddo={controller:controller,controllerAs:identifierForController(options.controller)||options.controllerAs||"$ctrl",template:makeInjectable(template),templateUrl:makeInjectable(options.templateUrl),transclude:options.transclude,scope:{},bindToController:options.bindings||{},restrict:"E",require:options.require};forEach(options,function(val,key){if(key.charAt(0)==="$")ddo[key]=val});return ddo}forEach(options,function(val,key){if(key.charAt(0)==="$"){factory[key]=val;if(isFunction(controller))controller[key]=val}});factory.$inject=["$injector"];return this.directive(name,factory)};this.aHrefSanitizationWhitelist=function(regexp){if(isDefined(regexp)){$$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp);return this}else{return $$sanitizeUriProvider.aHrefSanitizationWhitelist()}};this.imgSrcSanitizationWhitelist=function(regexp){if(isDefined(regexp)){$$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp);return this}else{return $$sanitizeUriProvider.imgSrcSanitizationWhitelist()}};var debugInfoEnabled=true;this.debugInfoEnabled=function(enabled){if(isDefined(enabled)){debugInfoEnabled=enabled;return this}return debugInfoEnabled};var preAssignBindingsEnabled=false;this.preAssignBindingsEnabled=function(enabled){if(isDefined(enabled)){preAssignBindingsEnabled=enabled;return this}return preAssignBindingsEnabled};var TTL=10;this.onChangesTtl=function(value){if(arguments.length){TTL=value;return this}return TTL};var commentDirectivesEnabledConfig=true;this.commentDirectivesEnabled=function(value){if(arguments.length){commentDirectivesEnabledConfig=value;return this}return commentDirectivesEnabledConfig};var cssClassDirectivesEnabledConfig=true;this.cssClassDirectivesEnabled=function(value){if(arguments.length){cssClassDirectivesEnabledConfig=value;return this}return cssClassDirectivesEnabledConfig};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$sce,$animate,$$sanitizeUri){var SIMPLE_ATTR_NAME=/^\w/;var specialAttrHolder=window.document.createElement("div");var commentDirectivesEnabled=commentDirectivesEnabledConfig;var cssClassDirectivesEnabled=cssClassDirectivesEnabledConfig;var onChangesTtl=TTL;var onChangesQueue;function flushOnChangesQueue(){try{if(!--onChangesTtl){onChangesQueue=undefined;throw $compileMinErr("infchng","{0} $onChanges() iterations reached. Aborting!\n",TTL)}$rootScope.$apply(function(){var errors=[];for(var i=0,ii=onChangesQueue.length;i<ii;++i){try{onChangesQueue[i]()}catch(e){errors.push(e)}}onChangesQueue=undefined;if(errors.length){throw errors}})}finally{onChangesTtl++}}function Attributes(element,attributesToCopy){if(attributesToCopy){var keys=Object.keys(attributesToCopy);var i,l,key;for(i=0,l=keys.length;i<l;i++){key=keys[i];this[key]=attributesToCopy[key]}}else{this.$attr={}}this.$$element=element}Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){if(classVal&&classVal.length>0){$animate.addClass(this.$$element,classVal)}},$removeClass:function(classVal){if(classVal&&classVal.length>0){$animate.removeClass(this.$$element,classVal)}},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);if(toAdd&&toAdd.length){$animate.addClass(this.$$element,toAdd)}var toRemove=tokenDifference(oldClasses,newClasses);if(toRemove&&toRemove.length){$animate.removeClass(this.$$element,toRemove)}},$set:function(key,value,writeAttr,attrName){var node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(key),observer=key,nodeName;if(booleanKey){this.$$element.prop(key,value);attrName=booleanKey}else if(aliasedKey){this[aliasedKey]=value;observer=aliasedKey}this[key]=value;if(attrName){this.$attr[key]=attrName}else{attrName=this.$attr[key];if(!attrName){this.$attr[key]=attrName=snake_case(key,"-")}}nodeName=nodeName_(this.$$element);if(nodeName==="a"&&(key==="href"||key==="xlinkHref")||nodeName==="img"&&key==="src"){this[key]=value=$$sanitizeUri(value,key==="src")}else if(nodeName==="img"&&key==="srcset"&&isDefined(value)){var result="";var trimmedSrcset=trim(value);var srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/;var pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/;var rawUris=trimmedSrcset.split(pattern);var nbrUrisWith2parts=Math.floor(rawUris.length/2);for(var i=0;i<nbrUrisWith2parts;i++){var innerIdx=i*2;result+=$$sanitizeUri(trim(rawUris[innerIdx]),true);result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[i*2]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),true);if(lastTuple.length===2){result+=" "+trim(lastTuple[1])}this[key]=value=result}if(writeAttr!==false){if(value===null||isUndefined(value)){this.$$element.removeAttr(attrName)}else{if(SIMPLE_ATTR_NAME.test(attrName)){this.$$element.attr(attrName,value)}else{setSpecialAttr(this.$$element[0],attrName,value)}}}var $$observers=this.$$observers;if($$observers){forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})}},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);listeners.push(fn);$rootScope.$evalAsync(function(){if(!listeners.$$inter&&attrs.hasOwnProperty(key)&&!isUndefined(attrs[key])){fn(attrs[key])}});return function(){arrayRemove(listeners,fn)}}};function setSpecialAttr(element,attrName,value){specialAttrHolder.innerHTML="<span "+attrName+">";var attributes=specialAttrHolder.firstChild.attributes;var attribute=attributes[0];attributes.removeNamedItem(attribute.name);attribute.value=value;element.attributes.setNamedItem(attribute)}function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate=startSymbol==="{{"&&endSymbol==="}}"?identity:function denormalizeTemplate(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;var MULTI_ELEMENT_DIR_RE=/^(.+)Start$/;compile.$$addBindingInfo=debugInfoEnabled?function $$addBindingInfo($element,binding){var bindings=$element.data("$binding")||[];if(isArray(binding)){bindings=bindings.concat(binding)}else{bindings.push(binding)}$element.data("$binding",bindings)}:noop;compile.$$addBindingClass=debugInfoEnabled?function $$addBindingClass($element){safeAddClass($element,"ng-binding")}:noop;compile.$$addScopeInfo=debugInfoEnabled?function $$addScopeInfo($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop;compile.$$addScopeClass=debugInfoEnabled?function $$addScopeClass($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop;compile.$$createComment=function(directiveName,comment){var content="";if(debugInfoEnabled){content=" "+(directiveName||"")+": ";if(comment)content+=comment+" "}return window.document.createComment(content)};return compile;function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){if(!($compileNodes instanceof jqLite)){$compileNodes=jqLite($compileNodes)}var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function publicLinkFn(scope,cloneConnectFn,options){if(!$compileNodes){throw $compileMinErr("multilink","This element has already been linked.")}assertArg(scope,"scope");if(previousCompileContext&&previousCompileContext.needsNewScope){scope=scope.$parent.$new()}options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;if(parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude){parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude}if(!namespace){namespace=detectNamespaceForChildElements(futureParentElement)}var $linkNode;if(namespace!=="html"){$linkNode=jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html()))}else if(cloneConnectFn){$linkNode=JQLitePrototype.clone.call($compileNodes)}else{$linkNode=$compileNodes}if(transcludeControllers){for(var controllerName in transcludeControllers){$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance)}}compile.$$addScopeInfo($linkNode,scope);if(cloneConnectFn)cloneConnectFn($linkNode,scope);if(compositeLinkFn)compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn);if(!cloneConnectFn){$compileNodes=compositeLinkFn=null}return $linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];if(!node){return"html"}else{return nodeName_(node)!=="foreignobject"&&toString.call(node).match(/SVG/)?"svg":"html"}}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){var linkFns=[],notLiveList=isArray(nodeList)||nodeList instanceof jqLite,attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound;for(var i=0;i<nodeList.length;i++){attrs=new Attributes;if(msie===11){mergeConsecutiveTextNodes(nodeList,i,notLiveList)}directives=collectDirectives(nodeList[i],[],attrs,i===0?maxPriority:undefined,ignoreDirective);nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null;if(nodeLinkFn&&nodeLinkFn.scope){compile.$$addScopeClass(attrs.$$element)}childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn);if(nodeLinkFn||childLinkFn){linkFns.push(i,nodeLinkFn,childLinkFn);linkFnFound=true;nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn}previousCompileContext=null}return linkFnFound?compositeLinkFn:null;function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn;var stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;stableNodeList=new Array(nodeListLength);for(i=0;i<linkFns.length;i+=3){idx=linkFns[i];stableNodeList[idx]=nodeList[idx]}}else{stableNodeList=nodeList}for(i=0,ii=linkFns.length;i<ii;){node=stableNodeList[linkFns[i++]];nodeLinkFn=linkFns[i++];childLinkFn=linkFns[i++];if(nodeLinkFn){if(nodeLinkFn.scope){childScope=scope.$new();compile.$$addScopeInfo(jqLite(node),childScope)}else{childScope=scope}if(nodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn)}else if(!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn){childBoundTranscludeFn=parentBoundTranscludeFn}else if(!parentBoundTranscludeFn&&transcludeFn){childBoundTranscludeFn=createBoundTranscludeFn(scope,transcludeFn)}else{childBoundTranscludeFn=null}nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)}else if(childLinkFn){childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}}}}function mergeConsecutiveTextNodes(nodeList,idx,notLiveList){var node=nodeList[idx];var parent=node.parentNode;var sibling;if(node.nodeType!==NODE_TYPE_TEXT){return}while(true){sibling=parent?node.nextSibling:nodeList[idx+1];if(!sibling||sibling.nodeType!==NODE_TYPE_TEXT){break}node.nodeValue=node.nodeValue+sibling.nodeValue;if(sibling.parentNode){sibling.parentNode.removeChild(sibling)}if(notLiveList&&sibling===nodeList[idx+1]){nodeList.splice(idx+1,1)}}}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn){function boundTranscludeFn(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){if(!transcludedScope){transcludedScope=scope.$new(false,containingScope);transcludedScope.$$transcluded=true}return transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})}var boundSlots=boundTranscludeFn.$$slots=createMap();for(var slotName in transcludeFn.$$slots){if(transcludeFn.$$slots[slotName]){boundSlots[slotName]=createBoundTranscludeFn(scope,transcludeFn.$$slots[slotName],previousBoundTranscludeFn)}else{boundSlots[slotName]=null}}return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var nodeType=node.nodeType,attrsMap=attrs.$attr,match,nodeName,className;switch(nodeType){case NODE_TYPE_ELEMENT:nodeName=nodeName_(node);addDirective(directives,directiveNormalize(nodeName),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;j<jj;j++){var attrStartName=false;var attrEndName=false;attr=nAttrs[j];name=attr.name;value=attr.value;ngAttrName=directiveNormalize(name);isNgAttr=NG_ATTR_BINDING.test(ngAttrName);if(isNgAttr){name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()})}var multiElementMatch=ngAttrName.match(MULTI_ELEMENT_DIR_RE);if(multiElementMatch&&directiveIsMultiElement(multiElementMatch[1])){attrStartName=name;attrEndName=name.substr(0,name.length-5)+"end";name=name.substr(0,name.length-6)}nName=directiveNormalize(name.toLowerCase());attrsMap[nName]=name;if(isNgAttr||!attrs.hasOwnProperty(nName)){attrs[nName]=value;if(getBooleanAttrName(node,nName)){attrs[nName]=true}}addAttrInterpolateDirective(node,directives,value,nName,isNgAttr);addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(nodeName==="input"&&node.getAttribute("type")==="hidden"){node.setAttribute("autocomplete","off")}if(!cssClassDirectivesEnabled)break;className=node.className;if(isObject(className)){className=className.animVal}if(isString(className)&&className!==""){while(match=CLASS_DIRECTIVE_REGEXP.exec(className)){nName=directiveNormalize(match[2]);if(addDirective(directives,nName,"C",maxPriority,ignoreDirective)){attrs[nName]=trim(match[3])}className=className.substr(match.index+match[0].length)}}break;case NODE_TYPE_TEXT:addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:if(!commentDirectivesEnabled)break;collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective);break}directives.sort(byPriority);return directives}function collectCommentDirectives(node,directives,attrs,maxPriority,ignoreDirective){try{var match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue);if(match){var nName=directiveNormalize(match[1]);if(addDirective(directives,nName,"M",maxPriority,ignoreDirective)){attrs[nName]=trim(match[2])}}}catch(e){}}function groupScan(node,attrStart,attrEnd){var nodes=[];var depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node){throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd)}if(node.nodeType===NODE_TYPE_ELEMENT){if(node.hasAttribute(attrStart))depth++;if(node.hasAttribute(attrEnd))depth--}nodes.push(node);node=node.nextSibling}while(depth>0)}else{nodes.push(node)}return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function groupedElementsLink(scope,element,attrs,controllers,transcludeFn){element=groupScan(element[0],attrStart,attrEnd);return linkFn(scope,element,attrs,controllers,transcludeFn)}}function compilationGenerator(eager,$compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){var compiled;if(eager){return compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext)}return function lazyCompilation(){if(!compiled){compiled=compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext);$compileNodes=transcludeFn=previousCompileContext=null}return compiled.apply(this,arguments)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){previousCompileContext=previousCompileContext||{};var terminalPriority=-Number.MAX_VALUE,newScopeDirective=previousCompileContext.newScopeDirective,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=false,hasTemplate=false,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),directive,directiveName,$template,replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,linkFn,didScanForMultipleTransclusion=false,mightHaveMultipleTransclusionError=false,directiveValue;for(var i=0,ii=directives.length;i<ii;i++){directive=directives[i];var attrStart=directive.$$start;var attrEnd=directive.$$end;if(attrStart){$compileNode=groupScan(compileNode,attrStart,attrEnd)}$template=undefined;if(terminalPriority>directive.priority){break}directiveValue=directive.scope;if(directiveValue){if(!directive.templateUrl){if(isObject(directiveValue)){assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode);newIsolateScopeDirective=directive}else{assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)}}newScopeDirective=newScopeDirective||directive}directiveName=directive.name;if(!didScanForMultipleTransclusion&&(directive.replace&&(directive.templateUrl||directive.template)||directive.transclude&&!directive.$$tlb)){var candidateDirective;for(var scanningIndex=i+1;candidateDirective=directives[scanningIndex++];){if(candidateDirective.transclude&&!candidateDirective.$$tlb||candidateDirective.replace&&(candidateDirective.templateUrl||candidateDirective.template)){mightHaveMultipleTransclusionError=true;break}}didScanForMultipleTransclusion=true}if(!directive.templateUrl&&directive.controller){controllerDirectives=controllerDirectives||createMap();assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode);controllerDirectives[directiveName]=directive}directiveValue=directive.transclude;if(directiveValue){hasTranscludeDirective=true;if(!directive.$$tlb){assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode);nonTlbTranscludeDirective=directive}if(directiveValue==="element"){hasElementTranscludeDirective=true;terminalPriority=directive.priority;$template=$compileNode;$compileNode=templateAttrs.$$element=jqLite(compile.$$createComment(directiveName,templateAttrs[directiveName]));compileNode=$compileNode[0];replaceWith(jqCollection,sliceArgs($template),compileNode);$template[0].$$parentNode=$template[0].parentNode;childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})}else{var slots=createMap();if(!isObject(directiveValue)){$template=jqLite(jqLiteClone(compileNode)).contents()}else{$template=[];var slotMap=createMap();var filledSlots=createMap();forEach(directiveValue,function(elementSelector,slotName){var optional=elementSelector.charAt(0)==="?";elementSelector=optional?elementSelector.substring(1):elementSelector;slotMap[elementSelector]=slotName;slots[slotName]=null;filledSlots[slotName]=optional});forEach($compileNode.contents(),function(node){var slotName=slotMap[directiveNormalize(nodeName_(node))];if(slotName){filledSlots[slotName]=true;slots[slotName]=slots[slotName]||[];slots[slotName].push(node)}else{$template.push(node)}});forEach(filledSlots,function(filled,slotName){if(!filled){throw $compileMinErr("reqslot","Required transclusion slot `{0}` was not filled.",slotName)}});for(var slotName in slots){if(slots[slotName]){slots[slotName]=compilationGenerator(mightHaveMultipleTransclusionError,slots[slotName],transcludeFn)}}}$compileNode.empty();childTranscludeFn=compilationGenerator(mightHaveMultipleTransclusionError,$template,transcludeFn,undefined,undefined,{needsNewScope:directive.$$isolateScope||directive.$$newScope});childTranscludeFn.$$slots=slots}}if(directive.template){hasTemplate=true;assertNoDuplicate("template",templateDirective,directive,$compileNode);templateDirective=directive;directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template;directiveValue=denormalizeTemplate(directiveValue);if(directive.replace){replaceDirective=directive;if(jqLiteIsTextNode(directiveValue)){$template=[]}else{$template=removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue)))}compileNode=$template[0];if($template.length!==1||compileNode.nodeType!==NODE_TYPE_ELEMENT){throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"")}replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}};var templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs);var unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));if(newIsolateScopeDirective||newScopeDirective){markDirectiveScope(templateDirectives,newIsolateScopeDirective,newScopeDirective)}directives=directives.concat(templateDirectives).concat(unprocessedDirectives);mergeTemplateAttributes(templateAttrs,newTemplateAttrs);ii=directives.length}else{$compileNode.html(directiveValue)}}if(directive.templateUrl){hasTemplate=true;assertNoDuplicate("template",templateDirective,directive,$compileNode);templateDirective=directive;if(directive.replace){replaceDirective=directive}nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newScopeDirective:newScopeDirective!==directive&&newScopeDirective,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective});ii=directives.length}else if(directive.compile){try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn);var context=directive.$$originalDirective||directive;if(isFunction(linkFn)){addLinkFns(null,bind(context,linkFn),attrStart,attrEnd)}else if(linkFn){addLinkFns(bind(context,linkFn.pre),bind(context,linkFn.post),attrStart,attrEnd)}}catch(e){$exceptionHandler(e,startingTag($compileNode))}}if(directive.terminal){nodeLinkFn.terminal=true;terminalPriority=Math.max(terminalPriority,directive.priority)}}nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===true;nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective;nodeLinkFn.templateOnThisElement=hasTemplate;nodeLinkFn.transclude=childTranscludeFn;previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective;return nodeLinkFn;function addLinkFns(pre,post,attrStart,attrEnd){if(pre){if(attrStart)pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd);pre.require=directive.require;pre.directiveName=directiveName;if(newIsolateScopeDirective===directive||directive.$$isolateScope){pre=cloneAndAnnotateFn(pre,{isolateScope:true})}preLinkFns.push(pre)}if(post){if(attrStart)post=groupElementsLinkFnWrapper(post,attrStart,attrEnd);post.require=directive.require;post.directiveName=directiveName;if(newIsolateScopeDirective===directive||directive.$$isolateScope){post=cloneAndAnnotateFn(post,{isolateScope:true})}postLinkFns.push(post)}}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){var i,ii,linkFn,isolateScope,controllerScope,elementControllers,transcludeFn,$element,attrs,scopeBindingInfo;if(compileNode===linkNode){attrs=templateAttrs;$element=templateAttrs.$$element}else{$element=jqLite(linkNode);attrs=new Attributes($element,templateAttrs)}controllerScope=scope;if(newIsolateScopeDirective){isolateScope=scope.$new(true)}else if(newScopeDirective){controllerScope=scope.$parent}if(boundTranscludeFn){transcludeFn=controllersBoundTransclude;transcludeFn.$$boundTransclude=boundTranscludeFn;transcludeFn.isSlotFilled=function(slotName){return!!boundTranscludeFn.$$slots[slotName]}}if(controllerDirectives){elementControllers=setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective)}if(newIsolateScopeDirective){compile.$$addScopeInfo($element,isolateScope,true,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective)));compile.$$addScopeClass($element,true);isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings;scopeBindingInfo=initializeDirectiveBindings(scope,attrs,isolateScope,isolateScope.$$isolateBindings,newIsolateScopeDirective);if(scopeBindingInfo.removeWatches){isolateScope.$on("$destroy",scopeBindingInfo.removeWatches)}}for(var name in elementControllers){var controllerDirective=controllerDirectives[name];var controller=elementControllers[name];var bindings=controllerDirective.$$bindings.bindToController;if(preAssignBindingsEnabled){if(bindings){controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective)}else{controller.bindingInfo={}}var controllerResult=controller();if(controllerResult!==controller.instance){controller.instance=controllerResult;$element.data("$"+controllerDirective.name+"Controller",controllerResult);if(controller.bindingInfo.removeWatches){controller.bindingInfo.removeWatches()}controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective)}}else{controller.instance=controller();$element.data("$"+controllerDirective.name+"Controller",controller.instance);controller.bindingInfo=initializeDirectiveBindings(controllerScope,attrs,controller.instance,bindings,controllerDirective)}}forEach(controllerDirectives,function(controllerDirective,name){var require=controllerDirective.require;if(controllerDirective.bindToController&&!isArray(require)&&isObject(require)){extend(elementControllers[name].instance,getControllers(name,require,$element,elementControllers))}});forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$onChanges)){try{controllerInstance.$onChanges(controller.bindingInfo.initialChanges)}catch(e){$exceptionHandler(e)}}if(isFunction(controllerInstance.$onInit)){try{controllerInstance.$onInit()}catch(e){$exceptionHandler(e)}}if(isFunction(controllerInstance.$doCheck)){controllerScope.$watch(function(){controllerInstance.$doCheck()});controllerInstance.$doCheck()}if(isFunction(controllerInstance.$onDestroy)){controllerScope.$on("$destroy",function callOnDestroyHook(){controllerInstance.$onDestroy()})}});for(i=0,ii=preLinkFns.length;i<ii;i++){linkFn=preLinkFns[i];invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}var scopeToChild=scope;if(newIsolateScopeDirective&&(newIsolateScopeDirective.template||newIsolateScopeDirective.templateUrl===null)){scopeToChild=isolateScope}if(childLinkFn){childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn)}for(i=postLinkFns.length-1;i>=0;i--){linkFn=postLinkFns[i];invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}forEach(elementControllers,function(controller){var controllerInstance=controller.instance;if(isFunction(controllerInstance.$postLink)){controllerInstance.$postLink()}});function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement,slotName){var transcludeControllers;if(!isScope(scope)){slotName=futureParentElement;futureParentElement=cloneAttachFn;cloneAttachFn=scope;scope=undefined}if(hasElementTranscludeDirective){transcludeControllers=elementControllers}if(!futureParentElement){futureParentElement=hasElementTranscludeDirective?$element.parent():$element}if(slotName){var slotTranscludeFn=boundTranscludeFn.$$slots[slotName];if(slotTranscludeFn){return slotTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}else if(isUndefined(slotTranscludeFn)){throw $compileMinErr("noslot",'No parent directive that requires a transclusion with slot name "{0}". '+"Element: {1}",slotName,startingTag($element))}}else{return boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}}}}function getControllers(directiveName,require,$element,elementControllers){var value;if(isString(require)){var match=require.match(REQUIRE_PREFIX_REGEXP);var name=require.substring(match[0].length);var inheritType=match[1]||match[3];var optional=match[2]==="?";if(inheritType==="^^"){$element=$element.parent()}else{value=elementControllers&&elementControllers[name];value=value&&value.instance}if(!value){var dataName="$"+name+"Controller";value=inheritType?$element.inheritedData(dataName):$element.data(dataName)}if(!value&&!optional){throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",name,directiveName)}}else if(isArray(require)){value=[];for(var i=0,ii=require.length;i<ii;i++){value[i]=getControllers(directiveName,require[i],$element,elementControllers)}}else if(isObject(require)){value={};forEach(require,function(controller,property){value[property]=getControllers(directiveName,controller,$element,elementControllers)})}return value||null}function setupControllers($element,attrs,transcludeFn,controllerDirectives,isolateScope,scope,newIsolateScopeDirective){var elementControllers=createMap();for(var controllerKey in controllerDirectives){var directive=controllerDirectives[controllerKey];var locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};var controller=directive.controller;if(controller==="@"){controller=attrs[directive.name]}var controllerInstance=$controller(controller,locals,true,directive.controllerAs);elementControllers[directive.name]=controllerInstance;$element.data("$"+directive.name+"Controller",controllerInstance.instance)}return elementControllers}function markDirectiveScope(directives,isolateScope,newScope){for(var j=0,jj=directives.length;j<jj;j++){directives[j]=inherit(directives[j],{$$isolateScope:isolateScope,$$newScope:newScope})}}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name)){for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++){directive=directives[i];if((isUndefined(maxPriority)||maxPriority>directive.priority)&&directive.restrict.indexOf(location)!==-1){if(startAttrName){directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})}if(!directive.$$bindings){var bindings=directive.$$bindings=parseDirectiveBindings(directive,directive.name);if(isObject(bindings.isolateScope)){directive.$$isolateBindings=bindings.isolateScope}}tDirectives.push(directive);match=directive}}}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name)){for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;i<ii;i++){directive=directives[i];if(directive.multiElement){return true}}}return false}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr;forEach(dst,function(value,key){if(key.charAt(0)!=="$"){if(src[key]&&src[key]!==value){if(value.length){value+=(key==="style"?";":" ")+src[key]}else{value=src[key]}}dst.$set(key,value,true,srcAttr[key])}});forEach(src,function(value,key){if(!dst.hasOwnProperty(key)&&key.charAt(0)!=="$"){dst[key]=value;if(key!=="class"&&key!=="style"){dstAttr[key]=srcAttr[key]}}})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var linkQueue=[],afterTemplateNodeLinkFn,afterTemplateChildLinkFn,beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;$compileNode.empty();$templateRequest(templateUrl).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;content=denormalizeTemplate(content);if(origAsyncDirective.replace){if(jqLiteIsTextNode(content)){$template=[]}else{$template=removeComments(wrapTemplate(templateNamespace,trim(content)))}compileNode=$template[0];if($template.length!==1||compileNode.nodeType!==NODE_TYPE_ELEMENT){throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl)}tempTemplateAttrs={$attr:{}};replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);if(isObject(origAsyncDirective.scope)){markDirectiveScope(templateDirectives,true)}directives=templateDirectives.concat(directives);mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else{compileNode=beforeTemplateCompileNode;$compileNode.html(content)}directives.unshift(derivedSyncDirective);afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext);forEach($rootElement,function(node,i){if(node===compileNode){$rootElement[i]=$compileNode[0]}});afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);while(linkQueue.length){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(scope.$$destroyed)continue;if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;if(!(previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace)){linkNode=jqLiteClone(compileNode)}replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode);safeAddClass(jqLite(linkNode),oldClasses)}if(afterTemplateNodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)}else{childBoundTranscludeFn=boundTranscludeFn}afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}linkQueue=null}).catch(function(error){if(error instanceof Error){$exceptionHandler(error)}});return function delayedNodeLinkFn(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;if(scope.$$destroyed)return;if(linkQueue){linkQueue.push(scope,node,rootElement,childBoundTranscludeFn)}else{if(afterTemplateNodeLinkFn.transcludeOnThisElement){childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)}afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)}}}function byPriority(a,b){var diff=b.priority-a.priority;if(diff!==0)return diff;if(a.name!==b.name)return a.name<b.name?-1:1;return a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){function wrapModuleNameIfDefined(moduleName){return moduleName?" (module: "+moduleName+")":""}if(previousDirective){throw $compileMinErr("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",previousDirective.name,wrapModuleNameIfDefined(previousDirective.$$moduleName),directive.name,wrapModuleNameIfDefined(directive.$$moduleName),what,startingTag(element))}}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,true);if(interpolateFn){directives.push({priority:0,compile:function textInterpolateCompileFn(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;if(hasCompileParent)compile.$$addBindingClass(templateNodeParent);return function textInterpolateLinkFn(scope,node){var parent=node.parent();if(!hasCompileParent)compile.$$addBindingClass(parent);compile.$$addBindingInfo(parent,interpolateFn.expressions);scope.$watch(interpolateFn,function interpolateFnWatchAction(value){node[0].nodeValue=value})}}})}}function wrapTemplate(type,template){type=lowercase(type||"html");switch(type){case"svg":case"math":var wrapper=window.document.createElement("div");wrapper.innerHTML="<"+type+">"+template+"</"+type+">";return wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if(attrNormalizedName==="srcdoc"){return $sce.HTML}var tag=nodeName_(node);if(attrNormalizedName==="src"||attrNormalizedName==="ngSrc"){if(["img","video","audio","source","track"].indexOf(tag)===-1){return $sce.RESOURCE_URL}}else if(attrNormalizedName==="xlinkHref"||tag==="form"&&attrNormalizedName==="action"||tag==="link"&&attrNormalizedName==="href"){return $sce.RESOURCE_URL}}function addAttrInterpolateDirective(node,directives,value,name,isNgAttr){var trustedContext=getTrustedContext(node,name);var mustHaveExpression=!isNgAttr;var allOrNothing=ALL_OR_NOTHING_ATTRS[name]||isNgAttr;var interpolateFn=$interpolate(value,mustHaveExpression,trustedContext,allOrNothing);if(!interpolateFn)return;if(name==="multiple"&&nodeName_(node)==="select"){throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node))}if(EVENT_HANDLER_ATTR_REGEXP.test(name)){throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the "+"ng- versions (such as ng-click instead of onclick) instead.")}directives.push({priority:100,compile:function(){return{pre:function attrInterpolatePreLinkFn(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers=createMap());var newValue=attr[name];if(newValue!==value){interpolateFn=newValue&&$interpolate(newValue,true,trustedContext,allOrNothing);value=newValue}if(!interpolateFn)return;attr[name]=interpolateFn(scope);($$observers[name]||($$observers[name]=[])).$$inter=true;(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function interpolateFnWatchAction(newValue,oldValue){if(name==="class"&&newValue!==oldValue){attr.$updateClass(newValue,oldValue)}else{attr.$set(name,newValue)}})}}}})}function replaceWith($rootElement,elementsToRemove,newNode){var firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode,i,ii;if($rootElement){for(i=0,ii=$rootElement.length;i<ii;i++){if($rootElement[i]===firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;j<jj;j++,j2++){if(j2<jj){$rootElement[j]=$rootElement[j2]}else{delete $rootElement[j]}}$rootElement.length-=removeCount-1;if($rootElement.context===firstElementToRemove){$rootElement.context=newNode}break}}}if(parent){parent.replaceChild(newNode,firstElementToRemove)}var fragment=window.document.createDocumentFragment();for(i=0;i<removeCount;i++){fragment.appendChild(elementsToRemove[i])}if(jqLite.hasData(firstElementToRemove)){jqLite.data(newNode,jqLite.data(firstElementToRemove));jqLite(firstElementToRemove).off("$destroy")}jqLite.cleanData(fragment.querySelectorAll("*"));for(i=1;i<removeCount;i++){delete elementsToRemove[i]}elementsToRemove[0]=newNode;elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}function initializeDirectiveBindings(scope,attrs,destination,bindings,directive){var removeWatchCollection=[];var initialChanges={};var changes;forEach(bindings,function initializeBinding(definition,scopeName){var attrName=definition.attrName,optional=definition.optional,mode=definition.mode,lastValue,parentGet,parentSet,compare,removeWatch;switch(mode){case"@":if(!optional&&!hasOwnProperty.call(attrs,attrName)){destination[scopeName]=attrs[attrName]=undefined}removeWatch=attrs.$observe(attrName,function(value){if(isString(value)||isBoolean(value)){var oldValue=destination[scopeName];recordChanges(scopeName,value,oldValue);destination[scopeName]=value}});attrs.$$observers[attrName].$$scope=scope;lastValue=attrs[attrName];if(isString(lastValue)){destination[scopeName]=$interpolate(lastValue)(scope)}else if(isBoolean(lastValue)){destination[scopeName]=lastValue}initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]);removeWatchCollection.push(removeWatch);break;case"=":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=undefined}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]);if(parentGet.literal){compare=equals}else{compare=simpleCompare}parentSet=parentGet.assign||function(){lastValue=destination[scopeName]=parentGet(scope);throw $compileMinErr("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",attrs[attrName],attrName,directive.name)};lastValue=destination[scopeName]=parentGet(scope);var parentValueWatch=function parentValueWatch(parentValue){if(!compare(parentValue,destination[scopeName])){if(!compare(parentValue,lastValue)){destination[scopeName]=parentValue}else{parentSet(scope,parentValue=destination[scopeName])}}lastValue=parentValue;return lastValue};parentValueWatch.$stateful=true;if(definition.collection){removeWatch=scope.$watchCollection(attrs[attrName],parentValueWatch)}else{removeWatch=scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal)}removeWatchCollection.push(removeWatch);break;case"<":if(!hasOwnProperty.call(attrs,attrName)){if(optional)break;attrs[attrName]=undefined}if(optional&&!attrs[attrName])break;parentGet=$parse(attrs[attrName]);var deepWatch=parentGet.literal;var initialValue=destination[scopeName]=parentGet(scope);initialChanges[scopeName]=new SimpleChange(_UNINITIALIZED_VALUE,destination[scopeName]);removeWatch=scope.$watch(parentGet,function parentValueWatchAction(newValue,oldValue){if(oldValue===newValue){if(oldValue===initialValue||deepWatch&&equals(oldValue,initialValue)){return}oldValue=initialValue}recordChanges(scopeName,newValue,oldValue);destination[scopeName]=newValue},deepWatch);removeWatchCollection.push(removeWatch);break;case"&":parentGet=attrs.hasOwnProperty(attrName)?$parse(attrs[attrName]):noop;if(parentGet===noop&&optional)break;destination[scopeName]=function(locals){return parentGet(scope,locals)};break}});function recordChanges(key,currentValue,previousValue){if(isFunction(destination.$onChanges)&&!simpleCompare(currentValue,previousValue)){if(!onChangesQueue){scope.$$postDigest(flushOnChangesQueue);onChangesQueue=[]}if(!changes){changes={};onChangesQueue.push(triggerOnChangesHook)}if(changes[key]){previousValue=changes[key].previousValue}changes[key]=new SimpleChange(previousValue,currentValue)}}function triggerOnChangesHook(){destination.$onChanges(changes);changes=undefined}return{initialChanges:initialChanges,removeWatches:removeWatchCollection.length&&function removeWatches(){for(var i=0,ii=removeWatchCollection.length;i<ii;++i){removeWatchCollection[i]()}}}}}]}function SimpleChange(previous,current){this.previousValue=previous;this.currentValue=current}SimpleChange.prototype.isFirstChange=function(){return this.previousValue===_UNINITIALIZED_VALUE};var PREFIX_REGEXP=/^((?:x|data)[:\-_])/i;var SPECIAL_CHARS_REGEXP=/[:\-_]+(.)/g;function directiveNormalize(name){return name.replace(PREFIX_REGEXP,"").replace(SPECIAL_CHARS_REGEXP,fnCamelCaseReplace)}function nodesetLinkingFn(scope,nodeList,rootElement,boundTranscludeFn){}function directiveLinkingFn(nodesetLinkingFn,scope,node,rootElement,boundTranscludeFn){}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){var token=tokens1[i];for(var j=0;j<tokens2.length;j++){if(token===tokens2[j])continue outer}values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(i<=1){return jqNodes}while(i--){var node=jqNodes[i];if(node.nodeType===NODE_TYPE_COMMENT||node.nodeType===NODE_TYPE_TEXT&&node.nodeValue.trim()===""){splice.call(jqNodes,i,1)}}return jqNodes}var $controllerMinErr=minErr("$controller");var CNTRL_REG=/^(\S+)(\s+as\s+([\w$]+))?$/;function identifierForController(controller,ident){if(ident&&isString(ident))return ident;if(isString(controller)){var match=CNTRL_REG.exec(controller);if(match)return match[3]}}function $ControllerProvider(){var controllers={},globals=false;this.has=function(name){return controllers.hasOwnProperty(name)};this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller");if(isObject(name)){extend(controllers,name)}else{controllers[name]=constructor}};this.allowGlobals=function(){globals=true};this.$get=["$injector","$window",function($injector,$window){return function $controller(expression,locals,later,ident){var instance,match,constructor,identifier;later=later===true;if(ident&&isString(ident)){identifier=ident}if(isString(expression)){match=expression.match(CNTRL_REG);if(!match){throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. "+"Must match `__name__ as __id__` or `__name__`.",expression)}constructor=match[1];identifier=identifier||match[3];expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,true)||(globals?getter($window,constructor,true):undefined);if(!expression){throw $controllerMinErr("ctrlreg","The controller with the name '{0}' is not registered.",constructor)}assertArgFn(expression,constructor,true)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;instance=Object.create(controllerPrototype||null);if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name)}return extend(function $controllerInit(){var result=$injector.invoke(expression,instance,locals,constructor);if(result!==instance&&(isObject(result)||isFunction(result))){instance=result;if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name)}}return instance},{instance:instance,identifier:identifier})}instance=$injector.instantiate(expression,locals,constructor);if(identifier){addIdentifier(locals,identifier,instance,constructor||expression.name)}return instance};function addIdentifier(locals,identifier,instance,name){if(!(locals&&isObject(locals.$scope))){throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier)}locals.$scope[identifier]=instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $$IsDocumentHiddenProvider(){this.$get=["$document","$rootScope",function($document,$rootScope){var doc=$document[0];var hidden=doc&&doc.hidden;$document.on("visibilitychange",changeListener);$rootScope.$on("$destroy",function(){$document.off("visibilitychange",changeListener)});function changeListener(){hidden=doc.hidden}return function(){return hidden}}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}var $$ForceReflowProvider=function(){this.$get=["$document",function($document){return function(domNode){if(domNode){if(!domNode.nodeType&&domNode instanceof jqLite){domNode=domNode[0]}}else{domNode=$document[0].body}return domNode.offsetWidth+1}}]};var APPLICATION_JSON="application/json";var CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"};var JSON_START=/^\[|^\{(?!\{)/;var JSON_ENDS={"[":/]$/,"{":/}$/};var JSON_PROTECTION_PREFIX=/^\)]\}',?\n/;var $httpMinErr=minErr("$http");function serializeValue(v){if(isObject(v)){return isDate(v)?v.toISOString():toJson(v)}return v}function $HttpParamSerializerProvider(){this.$get=function(){return function ngParamSerializer(params){if(!params)return"";var parts=[];forEachSorted(params,function(value,key){if(value===null||isUndefined(value))return;if(isArray(value)){forEach(value,function(v){parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(v)))})}else{parts.push(encodeUriQuery(key)+"="+encodeUriQuery(serializeValue(value)))}});return parts.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function jQueryLikeParamSerializer(params){if(!params)return"";var parts=[];serialize(params,"",true);return parts.join("&");function serialize(toSerialize,prefix,topLevel){if(toSerialize===null||isUndefined(toSerialize))return;if(isArray(toSerialize)){forEach(toSerialize,function(value,index){serialize(value,prefix+"["+(isObject(value)?index:"")+"]")})}else if(isObject(toSerialize)&&!isDate(toSerialize)){forEachSorted(toSerialize,function(value,key){serialize(value,prefix+(topLevel?"":"[")+key+(topLevel?"":"]"))})}else{parts.push(encodeUriQuery(prefix)+"="+encodeUriQuery(serializeValue(toSerialize)))}}}}}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");if(contentType&&contentType.indexOf(APPLICATION_JSON)===0||isJsonLike(tempData)){try{data=fromJson(tempData)}catch(e){throw $httpMinErr("baddata",'Data must be a valid JSON object. Received: "{0}". '+'Parse error: "{1}"',data,e)}}}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){var parsed=createMap(),i;function fillInParsed(key,val){if(key){parsed[key]=parsed[key]?parsed[key]+", "+val:val}}if(isString(headers)){forEach(headers.split("\n"),function(line){i=line.indexOf(":");fillInParsed(lowercase(trim(line.substr(0,i))),trim(line.substr(i+1)))})}else if(isObject(headers)){forEach(headers,function(headerVal,headerKey){fillInParsed(lowercase(headerKey),trim(headerVal))})}return parsed}function headersGetter(headers){var headersObj;return function(name){if(!headersObj)headersObj=parseHeaders(headers);if(name){var value=headersObj[lowercase(name)];if(value===undefined){value=null}return value}return headersObj}}function transformData(data,headers,status,fns){if(isFunction(fns)){return fns(data,headers,status)}forEach(fns,function(fn){data=fn(data,headers,status)});return data}function isSuccess(status){return 200<=status&&status<300}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return isObject(d)&&!isFile(d)&&!isBlob(d)&&!isFormData(d)?toJson(d):d}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"};var useApplyAsync=false;this.useApplyAsync=function(value){if(isDefined(value)){useApplyAsync=!!value;return this}return useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function($browser,$httpBackend,$$cookieReader,$cacheFactory,$rootScope,$q,$injector,$sce){var defaultCache=$cacheFactory("$http");defaults.paramSerializer=isString(defaults.paramSerializer)?$injector.get(defaults.paramSerializer):defaults.paramSerializer;var reversedInterceptors=[];forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))});function $http(requestConfig){if(!isObject(requestConfig)){throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig)}if(!isString($sce.valueOf(requestConfig.url))){throw minErr("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",requestConfig.url)}var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse,paramSerializer:defaults.paramSerializer,jsonpCallbackParam:defaults.jsonpCallbackParam},requestConfig);config.headers=mergeHeaders(requestConfig);config.method=uppercase(config.method);config.paramSerializer=isString(config.paramSerializer)?$injector.get(config.paramSerializer):config.paramSerializer;$browser.$$incOutstandingRequestCount();var requestInterceptors=[];var responseInterceptors=[];var promise=$q.resolve(config);forEach(reversedInterceptors,function(interceptor){if(interceptor.request||interceptor.requestError){requestInterceptors.unshift(interceptor.request,interceptor.requestError)}if(interceptor.response||interceptor.responseError){responseInterceptors.push(interceptor.response,interceptor.responseError)}});promise=chainInterceptors(promise,requestInterceptors);promise=promise.then(serverRequest);promise=chainInterceptors(promise,responseInterceptors);promise=promise.finally(completeOutstandingRequest);return promise;function chainInterceptors(promise,interceptors){for(var i=0,ii=interceptors.length;i<ii;){var thenFn=interceptors[i++];var rejectFn=interceptors[i++];promise=promise.then(thenFn,rejectFn)}interceptors.length=0;return promise}function completeOutstandingRequest(){$browser.$$completeOutstandingRequest(noop)}function executeHeaderFns(headers,config){var headerContent,processedHeaders={};forEach(headers,function(headerFn,header){if(isFunction(headerFn)){headerContent=headerFn(config);if(headerContent!=null){processedHeaders[header]=headerContent}}else{processedHeaders[header]=headerFn}});return processedHeaders}function mergeHeaders(config){var defHeaders=defaults.headers,reqHeaders=extend({},config.headers),defHeaderName,lowercaseDefHeaderName,reqHeaderName;defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders){if(lowercase(reqHeaderName)===lowercaseDefHeaderName){continue defaultHeadersIteration}}reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders,shallowCopy(config))}function serverRequest(config){var headers=config.headers;var reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);if(isUndefined(reqData)){forEach(headers,function(value,header){if(lowercase(header)==="content-type"){delete headers[header]}})}if(isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)){config.withCredentials=defaults.withCredentials}return sendReq(config,reqData).then(transformResponse,transformResponse)}function transformResponse(response){var resp=extend({},response);resp.data=transformData(response.data,response.headers,response.status,config.transformResponse);return isSuccess(response.status)?resp:$q.reject(resp)}}$http.pendingRequests=[];createShortMethods("get","delete","head","jsonp");createShortMethodsWithData("post","put","patch");$http.defaults=defaults;return $http;function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend({},config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend({},config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData){var deferred=$q.defer(),promise=deferred.promise,cache,cachedResp,reqHeaders=config.headers,isJsonp=lowercase(config.method)==="jsonp",url=config.url;if(isJsonp){url=$sce.getTrustedResourceUrl(url)}else if(!isString(url)){url=$sce.valueOf(url)}url=buildUrl(url,config.paramSerializer(config.params));if(isJsonp){url=sanitizeJsonpCallbackParam(url,config.jsonpCallbackParam)}$http.pendingRequests.push(config);promise.then(removePendingReq,removePendingReq);if((config.cache||defaults.cache)&&config.cache!==false&&(config.method==="GET"||config.method==="JSONP")){cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache}if(cache){cachedResp=cache.get(url);if(isDefined(cachedResp)){if(isPromiseLike(cachedResp)){cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult)}else{if(isArray(cachedResp)){resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3])}else{resolvePromise(cachedResp,200,{},"OK")}}}else{cache.put(url,promise)}}if(isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$$cookieReader()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;if(xsrfValue){reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue}$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType,createApplyHandlers(config.eventHandlers),createApplyHandlers(config.uploadEventHandlers))}return promise;function createApplyHandlers(eventHandlers){if(eventHandlers){var applyHandlers={};forEach(eventHandlers,function(eventHandler,key){applyHandlers[key]=function(event){if(useApplyAsync){$rootScope.$applyAsync(callEventHandler)}else if($rootScope.$$phase){callEventHandler()}else{$rootScope.$apply(callEventHandler)}function callEventHandler(){eventHandler(event)}}});return applyHandlers}}function done(status,response,headersString,statusText){if(cache){if(isSuccess(status)){cache.put(url,[status,response,parseHeaders(headersString),statusText])}else{cache.remove(url)}}function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}if(useApplyAsync){$rootScope.$applyAsync(resolveHttpPromise)}else{resolveHttpPromise();if(!$rootScope.$$phase)$rootScope.$apply()}}function resolvePromise(response,status,headers,statusText){status=status>=-1?status:0;(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);if(idx!==-1)$http.pendingRequests.splice(idx,1)}}function buildUrl(url,serializedParams){if(serializedParams.length>0){url+=(url.indexOf("?")===-1?"?":"&")+serializedParams}return url}function sanitizeJsonpCallbackParam(url,key){if(/[&?][^=]+=JSON_CALLBACK/.test(url)){throw $httpMinErr("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',url)}var callbackParamRegex=new RegExp("[&?]"+key+"=");if(callbackParamRegex.test(url)){throw $httpMinErr("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',key,url)}url+=(url.indexOf("?")===-1?"?":"&")+key+"=JSON_CALLBACK";return url}}]}function $xhrFactoryProvider(){this.$get=function(){return function createXhr(){return new window.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function($browser,$jsonpCallbacks,$document,$xhrFactory){return createHttpBackend($browser,$xhrFactory,$browser.defer,$jsonpCallbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){return function(method,url,post,callback,headers,timeout,withCredentials,responseType,eventHandlers,uploadEventHandlers){url=url||$browser.url();if(lowercase(method)==="jsonp"){var callbackPath=callbacks.createCallback(url);var jsonpDone=jsonpReq(url,callbackPath,function(status,text){var response=status===200&&callbacks.getResponse(callbackPath);completeRequest(callback,status,response,"",text);callbacks.removeCallback(callbackPath)})}else{var xhr=createXhr(method,url);xhr.open(method,url,true);forEach(headers,function(value,key){if(isDefined(value)){xhr.setRequestHeader(key,value)}});xhr.onload=function requestLoaded(){var statusText=xhr.statusText||"";var response="response"in xhr?xhr.response:xhr.responseText;var status=xhr.status===1223?204:xhr.status;if(status===0){status=response?200:urlResolve(url).protocol==="file"?404:0}completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};xhr.onerror=requestError;xhr.onabort=requestError;xhr.ontimeout=requestError;forEach(eventHandlers,function(value,key){xhr.addEventListener(key,value)});forEach(uploadEventHandlers,function(value,key){xhr.upload.addEventListener(key,value)});if(withCredentials){xhr.withCredentials=true}if(responseType){try{xhr.responseType=responseType}catch(e){if(responseType!=="json"){throw e}}}xhr.send(isUndefined(post)?null:post)}if(timeout>0){var timeoutId=$browserDefer(timeoutRequest,timeout)}else if(isPromiseLike(timeout)){timeout.then(timeoutRequest)}function timeoutRequest(){if(jsonpDone){jsonpDone()}if(xhr){xhr.abort()}}function completeRequest(callback,status,response,headersString,statusText){if(isDefined(timeoutId)){$browserDefer.cancel(timeoutId)}jsonpDone=xhr=null;callback(status,response,headersString,statusText)}};function jsonpReq(url,callbackPath,done){url=url.replace("JSON_CALLBACK",callbackPath);var script=rawDocument.createElement("script"),callback=null;script.type="text/javascript";script.src=url;script.async=true;callback=function(event){script.removeEventListener("load",callback);script.removeEventListener("error",callback);rawDocument.body.removeChild(script);script=null;var status=-1;var text="unknown";if(event){if(event.type==="load"&&!callbacks.wasCalled(callbackPath)){event={type:"error"}}text=event.type;status=event.type==="error"?404:200}if(done){done(status,text)}};script.addEventListener("load",callback);script.addEventListener("error",callback);rawDocument.body.appendChild(script);return callback}}var $interpolateMinErr=angular.$interpolateMinErr=minErr("$interpolate");$interpolateMinErr.throwNoconcat=function(text){throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows "+"interpolations that concatenate multiple expressions when a trusted value is "+"required.  See http://docs.angularjs.org/api/ng.$sce",text)};$interpolateMinErr.interr=function(text,err){return $interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString())};function $InterpolateProvider(){var startSymbol="{{";var endSymbol="}}";this.startSymbol=function(value){if(value){startSymbol=value;return this}else{return startSymbol}};this.endSymbol=function(value){if(value){endSymbol=value;return this}else{return endSymbol}};this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");function escape(ch){return"\\\\\\"+ch}function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function constantWatchDelegate(scope,listener,objectEquality,constantInterp){var unwatch=scope.$watch(function constantInterpolateWatch(scope){unwatch();return constantInterp(scope)},listener,objectEquality);return unwatch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){if(!text.length||text.indexOf(startSymbol)===-1){var constantInterp;if(!mustHaveExpression){var unescapedText=unescapeText(text);constantInterp=valueFn(unescapedText);constantInterp.exp=text;constantInterp.expressions=[];constantInterp.$$watchDelegate=constantWatchDelegate}return constantInterp}allOrNothing=!!allOrNothing;var startIndex,endIndex,index=0,expressions=[],parseFns=[],textLength=text.length,exp,concat=[],expressionPositions=[];while(index<textLength){if((startIndex=text.indexOf(startSymbol,index))!==-1&&(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))!==-1){if(index!==startIndex){concat.push(unescapeText(text.substring(index,startIndex)))}exp=text.substring(startIndex+startSymbolLength,endIndex);expressions.push(exp);parseFns.push($parse(exp,parseStringifyInterceptor));index=endIndex+endSymbolLength;expressionPositions.push(concat.length);concat.push("")}else{if(index!==textLength){concat.push(unescapeText(text.substring(index)))}break}}if(trustedContext&&concat.length>1){$interpolateMinErr.throwNoconcat(text)}if(!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;i<ii;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")};var getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)};return extend(function interpolationFn(context){var i=0;var ii=expressions.length;var values=new Array(ii);try{for(;i<ii;i++){values[i]=parseFns[i](context)}return compute(values)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener){var lastValue;return scope.$watchGroup(parseFns,function interpolateFnWatcher(values,oldValues){var currValue=compute(values);if(isFunction(listener)){listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope)}lastValue=currValue})}})}function parseStringifyInterceptor(value){try{value=getValue(value);return allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){$exceptionHandler($interpolateMinErr.interr(text,err))}}}$interpolate.startSymbol=function(){return startSymbol};$interpolate.endSymbol=function(){return endSymbol};return $interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q","$browser",function($rootScope,$window,$q,$$q,$browser){var intervals={};function interval(fn,delay,count,invokeApply){var hasParams=arguments.length>4,args=hasParams?sliceArgs(arguments,4):[],setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;count=isDefined(count)?count:0;promise.$$intervalId=setInterval(function tick(){if(skipApply){$browser.defer(callback)}else{$rootScope.$evalAsync(callback)}deferred.notify(iteration++);if(count>0&&iteration>=count){deferred.resolve(iteration);clearInterval(promise.$$intervalId);delete intervals[promise.$$intervalId]}if(!skipApply)$rootScope.$apply()},delay);intervals[promise.$$intervalId]=deferred;return promise;function callback(){if(!hasParams){fn(iteration)}else{fn.apply(null,args)}}}interval.cancel=function(promise){if(promise&&promise.$$intervalId in intervals){intervals[promise.$$intervalId].promise.catch(noop);intervals[promise.$$intervalId].reject("canceled");$window.clearInterval(promise.$$intervalId);delete intervals[promise.$$intervalId];return true}return false};return interval}]}var $jsonpCallbacksProvider=function(){this.$get=function(){var callbacks=angular.callbacks;var callbackMap={};function createCallback(callbackId){var callback=function(data){callback.data=data;callback.called=true};callback.id=callbackId;return callback}return{createCallback:function(url){var callbackId="_"+(callbacks.$$counter++).toString(36);var callbackPath="angular.callbacks."+callbackId;var callback=createCallback(callbackId);callbackMap[callbackPath]=callbacks[callbackId]=callback;return callbackPath},wasCalled:function(callbackPath){return callbackMap[callbackPath].called},getResponse:function(callbackPath){return callbackMap[callbackPath].data},removeCallback:function(callbackPath){var callback=callbackMap[callbackPath];delete callbacks[callback.id];delete callbackMap[callbackPath]}}}};var PATH_MATCH=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21};var $locationMinErr=minErr("$location");function encodePath(path){var segments=path.split("/"),i=segments.length;while(i--){segments[i]=encodeUriSegment(segments[i])}return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol;locationObj.$$host=parsedUrl.hostname;locationObj.$$port=toInt(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}var DOUBLE_SLASH_REGEX=/^\s*[\\/]{2,}/;function parseAppUrl(url,locationObj){if(DOUBLE_SLASH_REGEX.test(url)){throw $locationMinErr("badpath",'Invalid url "{0}".',url)}var prefixed=url.charAt(0)!=="/";if(prefixed){url="/"+url}var match=urlResolve(url);locationObj.$$path=decodeURIComponent(prefixed&&match.pathname.charAt(0)==="/"?match.pathname.substring(1):match.pathname);locationObj.$$search=parseKeyValue(match.search);locationObj.$$hash=decodeURIComponent(match.hash);if(locationObj.$$path&&locationObj.$$path.charAt(0)!=="/"){locationObj.$$path="/"+locationObj.$$path}}function startsWith(str,search){return str.slice(0,search.length)===search}function stripBaseUrl(base,url){if(startsWith(url,base)){return url.substr(base.length)}}function stripHash(url){var index=url.indexOf("#");return index===-1?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,appBaseNoFile,basePrefix){this.$$html5=true;basePrefix=basePrefix||"";parseAbsoluteUrl(appBase,this);this.$$parse=function(url){var pathUrl=stripBaseUrl(appBaseNoFile,url);if(!isString(pathUrl)){throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile)}parseAppUrl(pathUrl,this);if(!this.$$path){this.$$path="/"}this.$$compose()};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash;this.$$absUrl=appBaseNoFile+this.$$url.substr(1);this.$$urlUpdatedByLocation=true};this.$$parseLinkUrl=function(url,relHref){if(relHref&&relHref[0]==="#"){this.hash(relHref.slice(1));return true}var appUrl,prevAppUrl;var rewrittenUrl;if(isDefined(appUrl=stripBaseUrl(appBase,url))){prevAppUrl=appUrl;if(basePrefix&&isDefined(appUrl=stripBaseUrl(basePrefix,appUrl))){rewrittenUrl=appBaseNoFile+(stripBaseUrl("/",appUrl)||appUrl)}else{rewrittenUrl=appBase+prevAppUrl}}else if(isDefined(appUrl=stripBaseUrl(appBaseNoFile,url))){rewrittenUrl=appBaseNoFile+appUrl}else if(appBaseNoFile===url+"/"){rewrittenUrl=appBaseNoFile}if(rewrittenUrl){this.$$parse(rewrittenUrl)}return!!rewrittenUrl}}function LocationHashbangUrl(appBase,appBaseNoFile,hashPrefix){parseAbsoluteUrl(appBase,this);this.$$parse=function(url){var withoutBaseUrl=stripBaseUrl(appBase,url)||stripBaseUrl(appBaseNoFile,url);var withoutHashUrl;if(!isUndefined(withoutBaseUrl)&&withoutBaseUrl.charAt(0)==="#"){withoutHashUrl=stripBaseUrl(hashPrefix,withoutBaseUrl);if(isUndefined(withoutHashUrl)){withoutHashUrl=withoutBaseUrl}}else{if(this.$$html5){withoutHashUrl=withoutBaseUrl}else{withoutHashUrl="";if(isUndefined(withoutBaseUrl)){appBase=url;this.replace()}}}parseAppUrl(withoutHashUrl,this);this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase);this.$$compose();function removeWindowsDriveName(path,url,base){var windowsFilePathExp=/^\/[A-Z]:(\/.*)/;var firstPathSegmentMatch;if(startsWith(url,base)){url=url.replace(base,"")}if(windowsFilePathExp.exec(url)){return path}firstPathSegmentMatch=windowsFilePathExp.exec(path);return firstPathSegmentMatch?firstPathSegmentMatch[1]:path}};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash;this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"");this.$$urlUpdatedByLocation=true};this.$$parseLinkUrl=function(url,relHref){if(stripHash(appBase)===stripHash(url)){this.$$parse(url);return true}return false}}function LocationHashbangInHtml5Url(appBase,appBaseNoFile,hashPrefix){this.$$html5=true;LocationHashbangUrl.apply(this,arguments);this.$$parseLinkUrl=function(url,relHref){if(relHref&&relHref[0]==="#"){this.hash(relHref.slice(1));return true}var rewrittenUrl;var appUrl;if(appBase===stripHash(url)){rewrittenUrl=url}else if(appUrl=stripBaseUrl(appBaseNoFile,url)){rewrittenUrl=appBase+hashPrefix+appUrl}else if(appBaseNoFile===url+"/"){rewrittenUrl=appBaseNoFile}if(rewrittenUrl){this.$$parse(rewrittenUrl)}return!!rewrittenUrl};this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash;this.$$absUrl=appBase+hashPrefix+this.$$url;this.$$urlUpdatedByLocation=true}}var locationPrototype={$$absUrl:"",$$html5:false,$$replace:false,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url)){return this.$$url}var match=PATH_MATCH.exec(url);if(match[1]||url==="")this.path(decodeURIComponent(match[1]));if(match[2]||match[1]||url==="")this.search(match[3]||"");this.hash(match[5]||"");return this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){path=path!==null?path.toString():"";return path.charAt(0)==="/"?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search)){search=search.toString();this.$$search=parseKeyValue(search)}else if(isObject(search)){search=copy(search,{});forEach(search,function(value,key){if(value==null)delete search[key]});this.$$search=search}else{throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.")}break;default:if(isUndefined(paramValue)||paramValue===null){delete this.$$search[search]}else{this.$$search[search]=paramValue}}this.$$compose();return this},hash:locationGetterSetter("$$hash",function(hash){return hash!==null?hash.toString():""}),replace:function(){this.$$replace=true;return this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype);Location.prototype.state=function(state){if(!arguments.length){return this.$$state}if(Location!==LocationHtml5Url||!this.$$html5){throw $locationMinErr("nostate","History API state support is available only "+"in HTML5 mode and only in browsers supporting HTML5 History API")}this.$$state=isUndefined(state)?null:state;this.$$urlUpdatedByLocation=true;return this}});function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){if(isUndefined(value)){return this[property]}this[property]=preprocess(value);this.$$compose();return this}}function $LocationProvider(){var hashPrefix="!",html5Mode={enabled:false,requireBase:true,rewriteLinks:true};this.hashPrefix=function(prefix){if(isDefined(prefix)){hashPrefix=prefix;return this}else{return hashPrefix}};this.html5Mode=function(mode){if(isBoolean(mode)){html5Mode.enabled=mode;return this}else if(isObject(mode)){if(isBoolean(mode.enabled)){html5Mode.enabled=mode.enabled}if(isBoolean(mode.requireBase)){html5Mode.requireBase=mode.requireBase}if(isBoolean(mode.rewriteLinks)||isString(mode.rewriteLinks)){html5Mode.rewriteLinks=mode.rewriteLinks}return this}else{return html5Mode}};this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){var $location,LocationMode,baseHref=$browser.baseHref(),initialUrl=$browser.url(),appBase;if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase){throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!")}appBase=serverBase(initialUrl)+(baseHref||"/");LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else{appBase=stripHash(initialUrl);LocationMode=LocationHashbangUrl}var appBaseNoFile=stripFile(appBase);$location=new LocationMode(appBase,appBaseNoFile,"#"+hashPrefix);$location.$$parseLinkUrl(initialUrl,initialUrl);$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url();var oldState=$location.$$state;try{$browser.url(url,replace,state);$location.$$state=$browser.state()}catch(e){$location.url(oldUrl);$location.$$state=oldState;throw e}}$rootElement.on("click",function(event){var rewriteLinks=html5Mode.rewriteLinks;if(!rewriteLinks||event.ctrlKey||event.metaKey||event.shiftKey||event.which===2||event.button===2)return;var elm=jqLite(event.target);while(nodeName_(elm[0])!=="a"){if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return}if(isString(rewriteLinks)&&isUndefined(elm.attr(rewriteLinks)))return;var absHref=elm.prop("href");var relHref=elm.attr("href")||elm.attr("xlink:href");if(isObject(absHref)&&absHref.toString()==="[object SVGAnimatedString]"){absHref=urlResolve(absHref.animVal).href}if(IGNORE_URI_REGEXP.test(absHref))return;if(absHref&&!elm.attr("target")&&!event.isDefaultPrevented()){if($location.$$parseLinkUrl(absHref,relHref)){event.preventDefault();if($location.absUrl()!==$browser.url()){$rootScope.$apply();$window.angular["ff-684208-preventDefault"]=true}}}});if(trimEmptyHash($location.absUrl())!==trimEmptyHash(initialUrl)){$browser.url($location.absUrl(),true)}var initializing=true;$browser.onUrlChange(function(newUrl,newState){if(!startsWith(newUrl,appBaseNoFile)){$window.location.href=newUrl;return}$rootScope.$evalAsync(function(){var oldUrl=$location.absUrl();var oldState=$location.$$state;var defaultPrevented;newUrl=trimEmptyHash(newUrl);$location.$$parse(newUrl);$location.$$state=newState;defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented;if($location.absUrl()!==newUrl)return;if(defaultPrevented){$location.$$parse(oldUrl);$location.$$state=oldState;setBrowserUrlWithFallback(oldUrl,false,oldState)}else{initializing=false;afterLocationChange(oldUrl,oldState)}});if(!$rootScope.$$phase)$rootScope.$digest()});$rootScope.$watch(function $locationWatch(){if(initializing||$location.$$urlUpdatedByLocation){$location.$$urlUpdatedByLocation=false;var oldUrl=trimEmptyHash($browser.url());var newUrl=trimEmptyHash($location.absUrl());var oldState=$browser.state();var currentReplace=$location.$$replace;var urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;if(initializing||urlOrStateChanged){initializing=false;$rootScope.$evalAsync(function(){var newUrl=$location.absUrl();var defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;if($location.absUrl()!==newUrl)return;if(defaultPrevented){$location.$$parse(oldUrl);$location.$$state=oldState}else{if(urlOrStateChanged){setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state)}afterLocationChange(oldUrl,oldState)}})}}$location.$$replace=false});return $location;function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}}]}function $LogProvider(){var debug=true,self=this;this.debugEnabled=function(flag){if(isDefined(flag)){debug=flag;return this}else{return debug}};this.$get=["$window",function($window){var formatStackTrace=msie||/\bEdge\//.test($window.navigator&&$window.navigator.userAgent);return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){if(debug){fn.apply(self,arguments)}}}()};function formatError(arg){if(arg instanceof Error){if(arg.stack&&formatStackTrace){arg=arg.message&&arg.stack.indexOf(arg.message)===-1?"Error: "+arg.message+"\n"+arg.stack:arg.stack}else if(arg.sourceURL){arg=arg.message+"\n"+arg.sourceURL+":"+arg.line}}return arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=false;try{hasApply=!!logFn.apply}catch(e){}if(hasApply){return function(){var args=[];forEach(arguments,function(arg){args.push(formatError(arg))});return logFn.apply(console,args)}}return function(arg1,arg2){logFn(arg1,arg2==null?"":arg2)}}}]}var $parseMinErr=minErr("$parse");var objectValueOf={}.constructor.prototype.valueOf;function getStringValue(name){return name+""}var OPERATORS=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(operator){OPERATORS[operator]=true});var ESCAPE={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};var Lexer=function Lexer(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){this.text=text;this.index=0;this.tokens=[];while(this.index<this.text.length){var ch=this.text.charAt(this.index);if(ch==='"'||ch==="'"){this.readString(ch)}else if(this.isNumber(ch)||ch==="."&&this.isNumber(this.peek())){this.readNumber()}else if(this.isIdentifierStart(this.peekMultichar())){this.readIdent()}else if(this.is(ch,"(){}[].,;:?")){this.tokens.push({index:this.index,text:ch});this.index++}else if(this.isWhitespace(ch)){this.index++}else{var ch2=ch+this.peek();var ch3=ch2+this.peek(2);var op1=OPERATORS[ch];var op2=OPERATORS[ch2];var op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:true});this.index+=token.length}else{this.throwError("Unexpected next character ",this.index,this.index+1)}}}return this.tokens},is:function(ch,chars){return chars.indexOf(ch)!==-1},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):false},isNumber:function(ch){return"0"<=ch&&ch<="9"&&typeof ch==="string"},isWhitespace:function(ch){return ch===" "||ch==="\r"||ch==="\t"||ch==="\n"||ch==="\v"||ch==="ย"},isIdentifierStart:function(ch){return this.options.isIdentifierStart?this.options.isIdentifierStart(ch,this.codePointAt(ch)):this.isValidIdentifierStart(ch)},isValidIdentifierStart:function(ch){return"a"<=ch&&ch<="z"||"A"<=ch&&ch<="Z"||"_"===ch||ch==="$"},isIdentifierContinue:function(ch){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(ch,this.codePointAt(ch)):this.isValidIdentifierContinue(ch)},isValidIdentifierContinue:function(ch,cp){return this.isValidIdentifierStart(ch,cp)||this.isNumber(ch)},codePointAt:function(ch){if(ch.length===1)return ch.charCodeAt(0);return(ch.charCodeAt(0)<<10)+ch.charCodeAt(1)-56613888},peekMultichar:function(){var ch=this.text.charAt(this.index);var peek=this.peek();if(!peek){return ch}var cp1=ch.charCodeAt(0);var cp2=peek.charCodeAt(0);if(cp1>=55296&&cp1<=56319&&cp2>=56320&&cp2<=57343){return ch+peek}return ch},isExpOperator:function(ch){return ch==="-"||ch==="+"||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){var number="";var start=this.index;while(this.index<this.text.length){var ch=lowercase(this.text.charAt(this.index));if(ch==="."||this.isNumber(ch)){number+=ch}else{var peekCh=this.peek();if(ch==="e"&&this.isExpOperator(peekCh)){number+=ch}else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&number.charAt(number.length-1)==="e"){number+=ch}else if(this.isExpOperator(ch)&&(!peekCh||!this.isNumber(peekCh))&&number.charAt(number.length-1)==="e"){this.throwError("Invalid exponent")}else{break}}this.index++}this.tokens.push({index:start,text:number,constant:true,value:Number(number)})},readIdent:function(){var start=this.index;this.index+=this.peekMultichar().length;while(this.index<this.text.length){var ch=this.peekMultichar();if(!this.isIdentifierContinue(ch)){break}this.index+=ch.length}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:true})},readString:function(quote){var start=this.index;this.index++;var string="";var rawString=quote;var escape=false;while(this.index<this.text.length){var ch=this.text.charAt(this.index);rawString+=ch;if(escape){if(ch==="u"){var hex=this.text.substring(this.index+1,this.index+5);if(!hex.match(/[\da-f]{4}/i)){this.throwError("Invalid unicode escape [\\u"+hex+"]")}this.index+=4;string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string=string+(rep||ch)}escape=false}else if(ch==="\\"){escape=true}else if(ch===quote){this.index++;this.tokens.push({index:start,text:rawString,constant:true,value:string});return}else{string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var AST=function AST(lexer,options){this.lexer=lexer;this.options=options};AST.Program="Program";AST.ExpressionStatement="ExpressionStatement";AST.AssignmentExpression="AssignmentExpression";AST.ConditionalExpression="ConditionalExpression";AST.LogicalExpression="LogicalExpression";AST.BinaryExpression="BinaryExpression";AST.UnaryExpression="UnaryExpression";AST.CallExpression="CallExpression";AST.MemberExpression="MemberExpression";AST.Identifier="Identifier";AST.Literal="Literal";AST.ArrayExpression="ArrayExpression";AST.Property="Property";AST.ObjectExpression="ObjectExpression";AST.ThisExpression="ThisExpression";AST.LocalsExpression="LocalsExpression";AST.NGValueParameter="NGValueParameter";AST.prototype={ast:function(text){this.text=text;this.tokens=this.lexer.lex(text);var value=this.program();if(this.tokens.length!==0){this.throwError("is an unexpected token",this.tokens[0])}return value},program:function(){var body=[];while(true){if(this.tokens.length>0&&!this.peek("}",")",";","]"))body.push(this.expressionStatement());if(!this.expect(";")){return{type:AST.Program,body:body}}}},expressionStatement:function(){return{type:AST.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){var left=this.expression();while(this.expect("|")){left=this.filter(left)}return left},expression:function(){return this.assignment()},assignment:function(){var result=this.ternary();if(this.expect("=")){if(!isAssignable(result)){throw $parseMinErr("lval","Trying to assign a value to a non l-value")}result={type:AST.AssignmentExpression,left:result,right:this.assignment(),operator:"="}}return result},ternary:function(){var test=this.logicalOR();var alternate;var consequent;if(this.expect("?")){alternate=this.expression();if(this.consume(":")){consequent=this.expression();return{type:AST.ConditionalExpression,test:test,alternate:alternate,consequent:consequent}}}return test},logicalOR:function(){var left=this.logicalAND();while(this.expect("||")){left={type:AST.LogicalExpression,operator:"||",left:left,right:this.logicalAND()}}return left},logicalAND:function(){var left=this.equality();while(this.expect("&&")){left={type:AST.LogicalExpression,operator:"&&",left:left,right:this.equality()}}return left},equality:function(){var left=this.relational();var token;while(token=this.expect("==","!=","===","!==")){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.relational()}}return left},relational:function(){var left=this.additive();var token;while(token=this.expect("<",">","<=",">=")){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.additive()}}return left},additive:function(){var left=this.multiplicative();var token;while(token=this.expect("+","-")){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.multiplicative()}}return left},multiplicative:function(){var left=this.unary();var token;while(token=this.expect("*","/","%")){left={type:AST.BinaryExpression,operator:token.text,left:left,right:this.unary()}}return left},unary:function(){var token;if(token=this.expect("+","-","!")){return{type:AST.UnaryExpression,operator:token.text,prefix:true,argument:this.unary()}}else{return this.primary()}},primary:function(){var primary;if(this.expect("(")){primary=this.filterChain();this.consume(")")}else if(this.expect("[")){primary=this.arrayDeclaration()}else if(this.expect("{")){primary=this.object()}else if(this.selfReferential.hasOwnProperty(this.peek().text)){primary=copy(this.selfReferential[this.consume().text])}else if(this.options.literals.hasOwnProperty(this.peek().text)){primary={type:AST.Literal,value:this.options.literals[this.consume().text]}}else if(this.peek().identifier){primary=this.identifier()}else if(this.peek().constant){primary=this.constant()}else{this.throwError("not a primary expression",this.peek())}var next;while(next=this.expect("(","[",".")){if(next.text==="("){primary={type:AST.CallExpression,callee:primary,arguments:this.parseArguments()};this.consume(")")}else if(next.text==="["){primary={type:AST.MemberExpression,object:primary,property:this.expression(),computed:true};this.consume("]")}else if(next.text==="."){primary={type:AST.MemberExpression,object:primary,property:this.identifier(),computed:false}}else{this.throwError("IMPOSSIBLE")}}return primary},filter:function(baseExpression){var args=[baseExpression];var result={type:AST.CallExpression,callee:this.identifier(),arguments:args,filter:true};while(this.expect(":")){args.push(this.expression())}return result},parseArguments:function(){var args=[];if(this.peekToken().text!==")"){do{args.push(this.filterChain())}while(this.expect(","))}return args},identifier:function(){var token=this.consume();if(!token.identifier){this.throwError("is not a valid identifier",token)}return{type:AST.Identifier,name:token.text}},constant:function(){return{type:AST.Literal,value:this.consume().value}},arrayDeclaration:function(){var elements=[];if(this.peekToken().text!=="]"){do{if(this.peek("]")){break}elements.push(this.expression())}while(this.expect(","))}this.consume("]");return{type:AST.ArrayExpression,elements:elements}},object:function(){var properties=[],property;if(this.peekToken().text!=="}"){do{if(this.peek("}")){break}property={type:AST.Property,kind:"init"};if(this.peek().constant){property.key=this.constant();property.computed=false;this.consume(":");property.value=this.expression()}else if(this.peek().identifier){property.key=this.identifier();property.computed=false;if(this.peek(":")){this.consume(":");property.value=this.expression()}else{property.value=property.key}}else if(this.peek("[")){this.consume("[");property.key=this.expression();this.consume("]");property.computed=true;this.consume(":");property.value=this.expression()}else{this.throwError("invalid key",this.peek())}properties.push(property)}while(this.expect(","))}this.consume("}");return{type:AST.ObjectExpression,properties:properties}},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},consume:function(e1){if(this.tokens.length===0){throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text)}var token=this.expect(e1);if(!token){this.throwError("is unexpected, expecting ["+e1+"]",this.peek())}return token},peekToken:function(){if(this.tokens.length===0){throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text)}return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i];var t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4){return token}}return false},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);if(token){this.tokens.shift();return token}return false},selfReferential:{this:{type:AST.ThisExpression},$locals:{type:AST.LocalsExpression}}};function ifDefined(v,d){return typeof v!=="undefined"?v:d}function plusFn(l,r){if(typeof l==="undefined")return r;if(typeof r==="undefined")return l;return l+r}function isStateless($filter,filterName){var fn=$filter(filterName);return!fn.$stateful}function findConstantAndWatchExpressions(ast,$filter){var allConstants;var argsToWatch;var isStatelessFilter;switch(ast.type){case AST.Program:allConstants=true;forEach(ast.body,function(expr){findConstantAndWatchExpressions(expr.expression,$filter);allConstants=allConstants&&expr.expression.constant});ast.constant=allConstants;break;case AST.Literal:ast.constant=true;ast.toWatch=[];break;case AST.UnaryExpression:findConstantAndWatchExpressions(ast.argument,$filter);ast.constant=ast.argument.constant;ast.toWatch=ast.argument.toWatch;break;case AST.BinaryExpression:findConstantAndWatchExpressions(ast.left,$filter);findConstantAndWatchExpressions(ast.right,$filter);ast.constant=ast.left.constant&&ast.right.constant;ast.toWatch=ast.left.toWatch.concat(ast.right.toWatch);break;case AST.LogicalExpression:findConstantAndWatchExpressions(ast.left,$filter);findConstantAndWatchExpressions(ast.right,$filter);ast.constant=ast.left.constant&&ast.right.constant;ast.toWatch=ast.constant?[]:[ast];break;case AST.ConditionalExpression:findConstantAndWatchExpressions(ast.test,$filter);findConstantAndWatchExpressions(ast.alternate,$filter);findConstantAndWatchExpressions(ast.consequent,$filter);ast.constant=ast.test.constant&&ast.alternate.constant&&ast.consequent.constant;ast.toWatch=ast.constant?[]:[ast];break;case AST.Identifier:ast.constant=false;ast.toWatch=[ast];break;case AST.MemberExpression:findConstantAndWatchExpressions(ast.object,$filter);if(ast.computed){findConstantAndWatchExpressions(ast.property,$filter)}ast.constant=ast.object.constant&&(!ast.computed||ast.property.constant);ast.toWatch=[ast];break;case AST.CallExpression:isStatelessFilter=ast.filter?isStateless($filter,ast.callee.name):false;allConstants=isStatelessFilter;argsToWatch=[];forEach(ast.arguments,function(expr){findConstantAndWatchExpressions(expr,$filter);allConstants=allConstants&&expr.constant;if(!expr.constant){argsToWatch.push.apply(argsToWatch,expr.toWatch)}});ast.constant=allConstants;ast.toWatch=isStatelessFilter?argsToWatch:[ast];break;case AST.AssignmentExpression:findConstantAndWatchExpressions(ast.left,$filter);findConstantAndWatchExpressions(ast.right,$filter);ast.constant=ast.left.constant&&ast.right.constant;ast.toWatch=[ast];break;case AST.ArrayExpression:allConstants=true;argsToWatch=[];forEach(ast.elements,function(expr){findConstantAndWatchExpressions(expr,$filter);allConstants=allConstants&&expr.constant;if(!expr.constant){argsToWatch.push.apply(argsToWatch,expr.toWatch)}});ast.constant=allConstants;ast.toWatch=argsToWatch;break;case AST.ObjectExpression:allConstants=true;argsToWatch=[];forEach(ast.properties,function(property){findConstantAndWatchExpressions(property.value,$filter);allConstants=allConstants&&property.value.constant&&!property.computed;if(!property.value.constant){argsToWatch.push.apply(argsToWatch,property.value.toWatch)}if(property.computed){findConstantAndWatchExpressions(property.key,$filter);if(!property.key.constant){argsToWatch.push.apply(argsToWatch,property.key.toWatch)}}});ast.constant=allConstants;ast.toWatch=argsToWatch;break;case AST.ThisExpression:ast.constant=false;ast.toWatch=[];break;case AST.LocalsExpression:ast.constant=false;ast.toWatch=[];break}}function getInputs(body){if(body.length!==1)return;var lastExpression=body[0].expression;var candidate=lastExpression.toWatch;if(candidate.length!==1)return candidate;return candidate[0]!==lastExpression?candidate:undefined}function isAssignable(ast){return ast.type===AST.Identifier||ast.type===AST.MemberExpression}function assignableAST(ast){if(ast.body.length===1&&isAssignable(ast.body[0].expression)){return{type:AST.AssignmentExpression,left:ast.body[0].expression,right:{type:AST.NGValueParameter},operator:"="}}}function isLiteral(ast){return ast.body.length===0||ast.body.length===1&&(ast.body[0].expression.type===AST.Literal||ast.body[0].expression.type===AST.ArrayExpression||ast.body[0].expression.type===AST.ObjectExpression)}function isConstant(ast){return ast.constant}function ASTCompiler($filter){this.$filter=$filter}ASTCompiler.prototype={compile:function(ast){var self=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]};findConstantAndWatchExpressions(ast,self.$filter);var extra="";var assignable;this.stage="assign";if(assignable=assignableAST(ast)){this.state.computing="assign";var result=this.nextId();this.recurse(assignable,result);this.return_(result);extra="fn.assign="+this.generateFunction("assign","s,v,l")}var toWatch=getInputs(ast.body);self.stage="inputs";forEach(toWatch,function(watch,key){var fnKey="fn"+key;self.state[fnKey]={vars:[],body:[],own:{}};self.state.computing=fnKey;var intoId=self.nextId();self.recurse(watch,intoId);self.return_(intoId);self.state.inputs.push(fnKey);watch.watchId=key});this.state.computing="fn";this.stage="main";this.recurse(ast);var fnString='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+extra+this.watchFns()+"return fn;";var fn=new Function("$filter","getStringValue","ifDefined","plus",fnString)(this.$filter,getStringValue,ifDefined,plusFn);this.state=this.stage=undefined;return fn},USE:"use",STRICT:"strict",watchFns:function(){var result=[];var fns=this.state.inputs;var self=this;forEach(fns,function(name){result.push("var "+name+"="+self.generateFunction(name,"s"))});if(fns.length){result.push("fn.inputs=["+fns.join(",")+"];")}return result.join("")},generateFunction:function(name,params){return"function("+params+"){"+this.varsPrefix(name)+this.body(name)+"};"},filterPrefix:function(){var parts=[];var self=this;forEach(this.state.filters,function(id,filter){parts.push(id+"=$filter("+self.escape(filter)+")")});if(parts.length)return"var "+parts.join(",")+";";return""},varsPrefix:function(section){return this.state[section].vars.length?"var "+this.state[section].vars.join(",")+";":""},body:function(section){return this.state[section].body.join("")},recurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var left,right,self=this,args,expression,computed;recursionFn=recursionFn||noop;if(!skipWatchIdCheck&&isDefined(ast.watchId)){intoId=intoId||this.nextId();this.if_("i",this.lazyAssign(intoId,this.computedMember("i",ast.watchId)),this.lazyRecurse(ast,intoId,nameId,recursionFn,create,true));return}switch(ast.type){case AST.Program:forEach(ast.body,function(expression,pos){self.recurse(expression.expression,undefined,undefined,function(expr){right=expr});if(pos!==ast.body.length-1){self.current().body.push(right,";")}else{self.return_(right)}});break;case AST.Literal:expression=this.escape(ast.value);this.assign(intoId,expression);recursionFn(intoId||expression);break;case AST.UnaryExpression:this.recurse(ast.argument,undefined,undefined,function(expr){right=expr});expression=ast.operator+"("+this.ifDefined(right,0)+")";this.assign(intoId,expression);recursionFn(expression);break;case AST.BinaryExpression:this.recurse(ast.left,undefined,undefined,function(expr){left=expr});this.recurse(ast.right,undefined,undefined,function(expr){right=expr});if(ast.operator==="+"){expression=this.plus(left,right)}else if(ast.operator==="-"){expression=this.ifDefined(left,0)+ast.operator+this.ifDefined(right,0)}else{expression="("+left+")"+ast.operator+"("+right+")"}this.assign(intoId,expression);recursionFn(expression);break;case AST.LogicalExpression:intoId=intoId||this.nextId();self.recurse(ast.left,intoId);self.if_(ast.operator==="&&"?intoId:self.not(intoId),self.lazyRecurse(ast.right,intoId));recursionFn(intoId);break;case AST.ConditionalExpression:intoId=intoId||this.nextId();self.recurse(ast.test,intoId);self.if_(intoId,self.lazyRecurse(ast.alternate,intoId),self.lazyRecurse(ast.consequent,intoId));recursionFn(intoId);break;case AST.Identifier:intoId=intoId||this.nextId();if(nameId){nameId.context=self.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",ast.name)+"?l:s");nameId.computed=false;nameId.name=ast.name}self.if_(self.stage==="inputs"||self.not(self.getHasOwnProperty("l",ast.name)),function(){self.if_(self.stage==="inputs"||"s",function(){if(create&&create!==1){self.if_(self.isNull(self.nonComputedMember("s",ast.name)),self.lazyAssign(self.nonComputedMember("s",ast.name),"{}"))}self.assign(intoId,self.nonComputedMember("s",ast.name))})},intoId&&self.lazyAssign(intoId,self.nonComputedMember("l",ast.name)));recursionFn(intoId);break;case AST.MemberExpression:left=nameId&&(nameId.context=this.nextId())||this.nextId();intoId=intoId||this.nextId();self.recurse(ast.object,left,undefined,function(){self.if_(self.notNull(left),function(){if(ast.computed){right=self.nextId();self.recurse(ast.property,right);self.getStringValue(right);if(create&&create!==1){self.if_(self.not(self.computedMember(left,right)),self.lazyAssign(self.computedMember(left,right),"{}"))}expression=self.computedMember(left,right);self.assign(intoId,expression);if(nameId){nameId.computed=true;nameId.name=right}}else{if(create&&create!==1){self.if_(self.isNull(self.nonComputedMember(left,ast.property.name)),self.lazyAssign(self.nonComputedMember(left,ast.property.name),"{}"))}expression=self.nonComputedMember(left,ast.property.name);self.assign(intoId,expression);if(nameId){nameId.computed=false;nameId.name=ast.property.name}}},function(){self.assign(intoId,"undefined")});recursionFn(intoId)},!!create);break;case AST.CallExpression:intoId=intoId||this.nextId();if(ast.filter){right=self.filter(ast.callee.name);args=[];forEach(ast.arguments,function(expr){var argument=self.nextId();self.recurse(expr,argument);args.push(argument)});expression=right+"("+args.join(",")+")";self.assign(intoId,expression);recursionFn(intoId)}else{right=self.nextId();left={};args=[];self.recurse(ast.callee,right,left,function(){self.if_(self.notNull(right),function(){forEach(ast.arguments,function(expr){self.recurse(expr,ast.constant?undefined:self.nextId(),undefined,function(argument){args.push(argument)})});if(left.name){expression=self.member(left.context,left.name,left.computed)+"("+args.join(",")+")"}else{expression=right+"("+args.join(",")+")"}self.assign(intoId,expression)},function(){self.assign(intoId,"undefined")});recursionFn(intoId)})}break;case AST.AssignmentExpression:right=this.nextId();left={};this.recurse(ast.left,undefined,left,function(){self.if_(self.notNull(left.context),function(){self.recurse(ast.right,right);expression=self.member(left.context,left.name,left.computed)+ast.operator+right;self.assign(intoId,expression);recursionFn(intoId||expression)})},1);break;case AST.ArrayExpression:args=[];forEach(ast.elements,function(expr){self.recurse(expr,ast.constant?undefined:self.nextId(),undefined,function(argument){args.push(argument)})});expression="["+args.join(",")+"]";this.assign(intoId,expression);recursionFn(intoId||expression);break;case AST.ObjectExpression:args=[];computed=false;forEach(ast.properties,function(property){if(property.computed){computed=true}});if(computed){intoId=intoId||this.nextId();this.assign(intoId,"{}");forEach(ast.properties,function(property){if(property.computed){left=self.nextId();self.recurse(property.key,left)}else{left=property.key.type===AST.Identifier?property.key.name:""+property.key.value}right=self.nextId();self.recurse(property.value,right);self.assign(self.member(intoId,left,property.computed),right)})}else{forEach(ast.properties,function(property){self.recurse(property.value,ast.constant?undefined:self.nextId(),undefined,function(expr){args.push(self.escape(property.key.type===AST.Identifier?property.key.name:""+property.key.value)+":"+expr)})});expression="{"+args.join(",")+"}";this.assign(intoId,expression)}recursionFn(intoId||expression);break;case AST.ThisExpression:this.assign(intoId,"s");recursionFn(intoId||"s");break;case AST.LocalsExpression:this.assign(intoId,"l");recursionFn(intoId||"l");break;case AST.NGValueParameter:this.assign(intoId,"v");recursionFn(intoId||"v");break}},getHasOwnProperty:function(element,property){var key=element+"."+property;var own=this.current().own;if(!own.hasOwnProperty(key)){own[key]=this.nextId(false,element+"&&("+this.escape(property)+" in "+element+")")}return own[key]},assign:function(id,value){if(!id)return;this.current().body.push(id,"=",value,";");return id},filter:function(filterName){if(!this.state.filters.hasOwnProperty(filterName)){this.state.filters[filterName]=this.nextId(true)}return this.state.filters[filterName]},ifDefined:function(id,defaultValue){return"ifDefined("+id+","+this.escape(defaultValue)+")"},plus:function(left,right){return"plus("+left+","+right+")"},return_:function(id){this.current().body.push("return ",id,";")},if_:function(test,alternate,consequent){if(test===true){alternate()}else{var body=this.current().body;body.push("if(",test,"){");alternate();body.push("}");if(consequent){body.push("else{");consequent();body.push("}")}}},not:function(expression){return"!("+expression+")"},isNull:function(expression){return expression+"==null"},notNull:function(expression){return expression+"!=null"},nonComputedMember:function(left,right){var SAFE_IDENTIFIER=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/;var UNSAFE_CHARACTERS=/[^$_a-zA-Z0-9]/g;if(SAFE_IDENTIFIER.test(right)){return left+"."+right}else{return left+'["'+right.replace(UNSAFE_CHARACTERS,this.stringEscapeFn)+'"]'}},computedMember:function(left,right){return left+"["+right+"]"},member:function(left,right,computed){if(computed)return this.computedMember(left,right);return this.nonComputedMember(left,right)},getStringValue:function(item){this.assign(item,"getStringValue("+item+")")},lazyRecurse:function(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck){var self=this;return function(){self.recurse(ast,intoId,nameId,recursionFn,create,skipWatchIdCheck)}},lazyAssign:function(id,value){var self=this;return function(){self.assign(id,value)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(c){return"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)},escape:function(value){if(isString(value))return"'"+value.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(value))return value.toString();if(value===true)return"true";if(value===false)return"false";if(value===null)return"null";if(typeof value==="undefined")return"undefined";throw $parseMinErr("esc","IMPOSSIBLE")},nextId:function(skip,init){var id="v"+this.state.nextId++;if(!skip){this.current().vars.push(id+(init?"="+init:""))}return id},current:function(){return this.state[this.state.computing]}};function ASTInterpreter($filter){this.$filter=$filter}ASTInterpreter.prototype={compile:function(ast){var self=this;findConstantAndWatchExpressions(ast,self.$filter);var assignable;var assign;if(assignable=assignableAST(ast)){assign=this.recurse(assignable)}var toWatch=getInputs(ast.body);var inputs;if(toWatch){inputs=[];forEach(toWatch,function(watch,key){var input=self.recurse(watch);watch.input=input;inputs.push(input);watch.watchId=key})}var expressions=[];forEach(ast.body,function(expression){expressions.push(self.recurse(expression.expression))});var fn=ast.body.length===0?noop:ast.body.length===1?expressions[0]:function(scope,locals){var lastValue;forEach(expressions,function(exp){lastValue=exp(scope,locals)});return lastValue};if(assign){fn.assign=function(scope,value,locals){return assign(scope,locals,value)}}if(inputs){fn.inputs=inputs}return fn},recurse:function(ast,context,create){var left,right,self=this,args;if(ast.input){return this.inputs(ast.input,ast.watchId)}switch(ast.type){case AST.Literal:return this.value(ast.value,context);case AST.UnaryExpression:right=this.recurse(ast.argument);return this["unary"+ast.operator](right,context);case AST.BinaryExpression:left=this.recurse(ast.left);right=this.recurse(ast.right);return this["binary"+ast.operator](left,right,context);case AST.LogicalExpression:left=this.recurse(ast.left);right=this.recurse(ast.right);return this["binary"+ast.operator](left,right,context);case AST.ConditionalExpression:return this["ternary?:"](this.recurse(ast.test),this.recurse(ast.alternate),this.recurse(ast.consequent),context);case AST.Identifier:return self.identifier(ast.name,context,create);case AST.MemberExpression:left=this.recurse(ast.object,false,!!create);if(!ast.computed){right=ast.property.name}if(ast.computed)right=this.recurse(ast.property);return ast.computed?this.computedMember(left,right,context,create):this.nonComputedMember(left,right,context,create);case AST.CallExpression:args=[];forEach(ast.arguments,function(expr){args.push(self.recurse(expr))});if(ast.filter)right=this.$filter(ast.callee.name);if(!ast.filter)right=this.recurse(ast.callee,true);return ast.filter?function(scope,locals,assign,inputs){var values=[];for(var i=0;i<args.length;++i){values.push(args[i](scope,locals,assign,inputs))}var value=right.apply(undefined,values,inputs);return context?{context:undefined,name:undefined,value:value}:value}:function(scope,locals,assign,inputs){var rhs=right(scope,locals,assign,inputs);var value;if(rhs.value!=null){var values=[];for(var i=0;i<args.length;++i){values.push(args[i](scope,locals,assign,inputs))}value=rhs.value.apply(rhs.context,values)}return context?{value:value}:value};case AST.AssignmentExpression:left=this.recurse(ast.left,true,1);right=this.recurse(ast.right);return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs=right(scope,locals,assign,inputs);lhs.context[lhs.name]=rhs;return context?{value:rhs}:rhs};case AST.ArrayExpression:args=[];forEach(ast.elements,function(expr){args.push(self.recurse(expr))});return function(scope,locals,assign,inputs){var value=[];for(var i=0;i<args.length;++i){value.push(args[i](scope,locals,assign,inputs))}return context?{value:value}:value};case AST.ObjectExpression:args=[];forEach(ast.properties,function(property){if(property.computed){args.push({key:self.recurse(property.key),computed:true,value:self.recurse(property.value)})}else{args.push({key:property.key.type===AST.Identifier?property.key.name:""+property.key.value,computed:false,value:self.recurse(property.value)})}});return function(scope,locals,assign,inputs){var value={};for(var i=0;i<args.length;++i){if(args[i].computed){value[args[i].key(scope,locals,assign,inputs)]=args[i].value(scope,locals,assign,inputs)}else{value[args[i].key]=args[i].value(scope,locals,assign,inputs)}}return context?{value:value}:value};case AST.ThisExpression:return function(scope){return context?{value:scope}:scope};case AST.LocalsExpression:return function(scope,locals){return context?{value:locals}:locals};case AST.NGValueParameter:return function(scope,locals,assign){return context?{value:assign}:assign}}},"unary+":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);if(isDefined(arg)){arg=+arg}else{arg=0}return context?{value:arg}:arg}},"unary-":function(argument,context){return function(scope,locals,assign,inputs){var arg=argument(scope,locals,assign,inputs);if(isDefined(arg)){arg=-arg}else{arg=-0}return context?{value:arg}:arg}},"unary!":function(argument,context){return function(scope,locals,assign,inputs){var arg=!argument(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary+":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs=right(scope,locals,assign,inputs);var arg=plusFn(lhs,rhs);return context?{value:arg}:arg}},"binary-":function(left,right,context){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs=right(scope,locals,assign,inputs);var arg=(isDefined(lhs)?lhs:0)-(isDefined(rhs)?rhs:0);return context?{value:arg}:arg}},"binary*":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)*right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary/":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)/right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary%":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)%right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary===":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)===right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary==":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)==right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary!=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)!=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary<=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)<=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary>=":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)>=right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary&&":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)&&right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"binary||":function(left,right,context){return function(scope,locals,assign,inputs){var arg=left(scope,locals,assign,inputs)||right(scope,locals,assign,inputs);return context?{value:arg}:arg}},"ternary?:":function(test,alternate,consequent,context){return function(scope,locals,assign,inputs){var arg=test(scope,locals,assign,inputs)?alternate(scope,locals,assign,inputs):consequent(scope,locals,assign,inputs);return context?{value:arg}:arg}},value:function(value,context){return function(){return context?{context:undefined,name:undefined,value:value}:value}},identifier:function(name,context,create){return function(scope,locals,assign,inputs){var base=locals&&name in locals?locals:scope;if(create&&create!==1&&base&&base[name]==null){base[name]={}}var value=base?base[name]:undefined;if(context){return{context:base,name:name,value:value}}else{return value}}},computedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);var rhs;var value;if(lhs!=null){rhs=right(scope,locals,assign,inputs);rhs=getStringValue(rhs);if(create&&create!==1){if(lhs&&!lhs[rhs]){lhs[rhs]={}}}value=lhs[rhs]}if(context){return{context:lhs,name:rhs,value:value}}else{return value}}},nonComputedMember:function(left,right,context,create){return function(scope,locals,assign,inputs){var lhs=left(scope,locals,assign,inputs);if(create&&create!==1){if(lhs&&lhs[right]==null){lhs[right]={}}}var value=lhs!=null?lhs[right]:undefined;if(context){return{context:lhs,name:right,value:value}}else{return value}}},inputs:function(input,watchId){return function(scope,value,locals,inputs){if(inputs)return inputs[watchId];return input(scope,value,locals)}}};function Parser(lexer,$filter,options){this.ast=new AST(lexer,options);this.astCompiler=options.csp?new ASTInterpreter($filter):new ASTCompiler($filter)}Parser.prototype={constructor:Parser,parse:function(text){var ast=this.ast.ast(text);var fn=this.astCompiler.compile(ast);fn.literal=isLiteral(ast);fn.constant=isConstant(ast);return fn}};function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cache=createMap();var literals={true:true,false:false,null:null,undefined:undefined};var identStart,identContinue;this.addLiteral=function(literalName,literalValue){literals[literalName]=literalValue};this.setIdentifierFns=function(identifierStart,identifierContinue){identStart=identifierStart;identContinue=identifierContinue;return this};this.$get=["$filter",function($filter){var noUnsafeEval=csp().noUnsafeEval;var $parseOptions={csp:noUnsafeEval,literals:copy(literals),isIdentifierStart:isFunction(identStart)&&identStart,isIdentifierContinue:isFunction(identContinue)&&identContinue};return $parse;function $parse(exp,interceptorFn){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":exp=exp.trim();cacheKey=exp;parsedExpression=cache[cacheKey];if(!parsedExpression){if(exp.charAt(0)===":"&&exp.charAt(1)===":"){oneTime=true;exp=exp.substring(2)}var lexer=new Lexer($parseOptions);var parser=new Parser(lexer,$filter,$parseOptions);parsedExpression=parser.parse(exp);if(parsedExpression.constant){parsedExpression.$$watchDelegate=constantWatchDelegate}else if(oneTime){parsedExpression.oneTime=true;parsedExpression.$$watchDelegate=oneTimeWatchDelegate}else if(parsedExpression.inputs){parsedExpression.$$watchDelegate=inputsWatchDelegate}cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}function expressionInputDirtyCheck(newValue,oldValueOfValue,compareObjectIdentity){if(newValue==null||oldValueOfValue==null){return newValue===oldValueOfValue}if(typeof newValue==="object"){newValue=getValueOf(newValue);if(typeof newValue==="object"&&!compareObjectIdentity){return false}}return newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var inputExpressions=parsedExpression.inputs;var lastResult;if(inputExpressions.length===1){var oldInputValueOf=expressionInputDirtyCheck;inputExpressions=inputExpressions[0];return scope.$watch(function expressionInputWatch(scope){var newInputValue=inputExpressions(scope);if(!expressionInputDirtyCheck(newInputValue,oldInputValueOf,parsedExpression.literal)){lastResult=parsedExpression(scope,undefined,undefined,[newInputValue]);oldInputValueOf=newInputValue&&getValueOf(newInputValue)}return lastResult},listener,objectEquality,prettyPrintExpression)}var oldInputValueOfValues=[];var oldInputValues=[];for(var i=0,ii=inputExpressions.length;i<ii;i++){oldInputValueOfValues[i]=expressionInputDirtyCheck;oldInputValues[i]=null}return scope.$watch(function expressionInputsWatch(scope){var changed=false;for(var i=0,ii=inputExpressions.length;i<ii;i++){var newInputValue=inputExpressions[i](scope);if(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i],parsedExpression.literal))){oldInputValues[i]=newInputValue;oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue)}}if(changed){lastResult=parsedExpression(scope,undefined,undefined,oldInputValues)}return lastResult},listener,objectEquality,prettyPrintExpression)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression,prettyPrintExpression){var isDone=parsedExpression.literal?isAllDefined:isDefined;var unwatch,lastValue;if(parsedExpression.inputs){unwatch=inputsWatchDelegate(scope,oneTimeListener,objectEquality,parsedExpression,prettyPrintExpression)}else{unwatch=scope.$watch(oneTimeWatch,oneTimeListener,objectEquality)}return unwatch;function oneTimeWatch(scope){return parsedExpression(scope)}function oneTimeListener(value,old,scope){lastValue=value;if(isFunction(listener)){listener(value,old,scope)}if(isDone(value)){scope.$$postDigest(function(){if(isDone(lastValue)){unwatch()}})}}}function isAllDefined(value){var allDefined=true;forEach(value,function(val){if(!isDefined(val))allDefined=false});return allDefined}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch=scope.$watch(function constantWatch(scope){unwatch();return parsedExpression(scope)},listener,objectEquality);return unwatch}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate;var useInputs=false;var isDone=parsedExpression.literal?isAllDefined:isDefined;function regularInterceptedExpression(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);return interceptorFn(value,scope,locals)}function oneTimeInterceptedExpression(scope,locals,assign,inputs){var value=useInputs&&inputs?inputs[0]:parsedExpression(scope,locals,assign,inputs);var result=interceptorFn(value,scope,locals);return isDone(value)?result:value}var fn=parsedExpression.oneTime?oneTimeInterceptedExpression:regularInterceptedExpression;fn.literal=parsedExpression.literal;fn.oneTime=parsedExpression.oneTime;useInputs=!parsedExpression.inputs;if(watchDelegate&&watchDelegate!==inputsWatchDelegate){fn.$$watchDelegate=watchDelegate;fn.inputs=parsedExpression.inputs}else if(!interceptorFn.$stateful){fn.$$watchDelegate=inputsWatchDelegate;fn.inputs=parsedExpression.inputs?parsedExpression.inputs:[parsedExpression]}return fn}}]}function $QProvider(){var errorOnUnhandledRejections=true;this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler,errorOnUnhandledRejections)}];this.errorOnUnhandledRejections=function(value){if(isDefined(value)){errorOnUnhandledRejections=value;return this}else{return errorOnUnhandledRejections}}}function $$QProvider(){var errorOnUnhandledRejections=true;this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler,errorOnUnhandledRejections)}];this.errorOnUnhandledRejections=function(value){if(isDefined(value)){errorOnUnhandledRejections=value;return this}else{return errorOnUnhandledRejections}}}function qFactory(nextTick,exceptionHandler,errorOnUnhandledRejections){var $qMinErr=minErr("$q",TypeError);var queueSize=0;var checkQueue=[];function defer(){return new Deferred}function Deferred(){var promise=this.promise=new Promise;this.resolve=function(val){resolvePromise(promise,val)};this.reject=function(reason){rejectPromise(promise,reason)};this.notify=function(progress){notifyPromise(promise,progress)}}function Promise(){this.$$state={status:0}}extend(Promise.prototype,{then:function(onFulfilled,onRejected,progressBack){if(isUndefined(onFulfilled)&&isUndefined(onRejected)&&isUndefined(progressBack)){return this}var result=new Promise;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]);if(this.$$state.status>0)scheduleProcessQueue(this.$$state);return result},catch:function(callback){return this.then(null,callback)},finally:function(callback,progressBack){return this.then(function(value){return handleCallback(value,resolve,callback)},function(error){return handleCallback(error,reject,callback)},progressBack)}});function processQueue(state){var fn,promise,pending;pending=state.pending;state.processScheduled=false;state.pending=undefined;try{for(var i=0,ii=pending.length;i<ii;++i){state.pur=true;promise=pending[i][0];fn=pending[i][state.status];try{if(isFunction(fn)){resolvePromise(promise,fn(state.value))}else if(state.status===1){resolvePromise(promise,state.value)}else{rejectPromise(promise,state.value)}}catch(e){rejectPromise(promise,e)}}}finally{--queueSize;if(errorOnUnhandledRejections&&queueSize===0){nextTick(processChecks)}}}function processChecks(){while(!queueSize&&checkQueue.length){var toCheck=checkQueue.shift();if(!toCheck.pur){toCheck.pur=true;var errorMessage="Possibly unhandled rejection: "+toDebugString(toCheck.value);if(toCheck.value instanceof Error){exceptionHandler(toCheck.value,errorMessage)}else{exceptionHandler(errorMessage)}}}}function scheduleProcessQueue(state){if(errorOnUnhandledRejections&&!state.pending&&state.status===2&&!state.pur){if(queueSize===0&&checkQueue.length===0){nextTick(processChecks)}checkQueue.push(state)}if(state.processScheduled||!state.pending)return;state.processScheduled=true;++queueSize;nextTick(function(){processQueue(state)})}function resolvePromise(promise,val){if(promise.$$state.status)return;if(val===promise){$$reject(promise,$qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val))}else{$$resolve(promise,val)}}function $$resolve(promise,val){var then;var done=false;try{if(isObject(val)||isFunction(val))then=val.then;if(isFunction(then)){promise.$$state.status=-1;then.call(val,doResolve,doReject,doNotify)}else{promise.$$state.value=val;promise.$$state.status=1;scheduleProcessQueue(promise.$$state)}}catch(e){doReject(e)}function doResolve(val){if(done)return;done=true;$$resolve(promise,val)}function doReject(val){if(done)return;done=true;$$reject(promise,val)}function doNotify(progress){notifyPromise(promise,progress)}}function rejectPromise(promise,reason){if(promise.$$state.status)return;$$reject(promise,reason)}function $$reject(promise,reason){promise.$$state.value=reason;promise.$$state.status=2;scheduleProcessQueue(promise.$$state)}function notifyPromise(promise,progress){var callbacks=promise.$$state.pending;if(promise.$$state.status<=0&&callbacks&&callbacks.length){nextTick(function(){var callback,result;for(var i=0,ii=callbacks.length;i<ii;i++){result=callbacks[i][0];callback=callbacks[i][3];try{notifyPromise(result,isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}}function reject(reason){var result=new Promise;rejectPromise(result,reason);return result}function handleCallback(value,resolver,callback){var callbackOutput=null;try{if(isFunction(callback))callbackOutput=callback()}catch(e){return reject(e)}if(isPromiseLike(callbackOutput)){return callbackOutput.then(function(){return resolver(value)},reject)}else{return resolver(value)}}function when(value,callback,errback,progressBack){var result=new Promise;resolvePromise(result,value);return result.then(callback,errback,progressBack)}var resolve=when;function all(promises){var result=new Promise,counter=0,results=isArray(promises)?[]:{};forEach(promises,function(promise,key){counter++;when(promise).then(function(value){results[key]=value;if(!--counter)resolvePromise(result,results)},function(reason){rejectPromise(result,reason)})});if(counter===0){resolvePromise(result,results)}return result}function race(promises){var deferred=defer();forEach(promises,function(promise){when(promise).then(deferred.resolve,deferred.reject)});return deferred.promise}function $Q(resolver){if(!isFunction(resolver)){throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver)}var promise=new Promise;function resolveFn(value){resolvePromise(promise,value)}function rejectFn(reason){rejectPromise(promise,reason)}resolver(resolveFn,rejectFn);return promise}$Q.prototype=Promise.prototype;$Q.defer=defer;$Q.reject=reject;$Q.when=when;$Q.resolve=resolve;$Q.all=all;$Q.race=race;return $Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame;var cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame;var rafSupported=!!requestAnimationFrame;var raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,false);return function(){$timeout.cancel(timer)}};raf.supported=rafSupported;return raf}]}function $RootScopeProvider(){var TTL=10;var $rootScopeMinErr=minErr("$rootScope");var lastDirtyWatch=null;var applyAsyncId=null;this.digestTtl=function(value){if(arguments.length){TTL=value}return TTL};function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$id=nextUid();this.$$ChildScope=null}ChildScope.prototype=parent;return ChildScope}this.$get=["$exceptionHandler","$parse","$browser",function($exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=true}function cleanUpScope($scope){if(msie===9){if($scope.$$childHead){cleanUpScope($scope.$$childHead)}if($scope.$$nextSibling){cleanUpScope($scope.$$nextSibling)}}$scope.$parent=$scope.$$nextSibling=$scope.$$prevSibling=$scope.$$childHead=$scope.$$childTail=$scope.$root=$scope.$$watchers=null}function Scope(){this.$id=nextUid();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=false;this.$$listeners={};this.$$listenerCount={};this.$$watchersCount=0;this.$$isolateBindings=null}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;parent=parent||this;if(isolate){child=new Scope;child.$root=this.$root}else{if(!this.$$ChildScope){this.$$ChildScope=createChildScopeClass(this)}child=new this.$$ChildScope}child.$parent=parent;child.$$prevSibling=parent.$$childTail;if(parent.$$childHead){parent.$$childTail.$$nextSibling=child;parent.$$childTail=child}else{parent.$$childHead=parent.$$childTail=child}if(isolate||parent!==this)child.$on("$destroy",destroyChildScope);return child},$watch:function(watchExp,listener,objectEquality,prettyPrintExpression){var get=$parse(watchExp);if(get.$$watchDelegate){return get.$$watchDelegate(this,listener,objectEquality,get,watchExp)}var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:prettyPrintExpression||watchExp,eq:!!objectEquality};lastDirtyWatch=null;if(!isFunction(listener)){watcher.fn=noop}if(!array){array=scope.$$watchers=[];array.$$digestWatchIndex=-1}array.unshift(watcher);array.$$digestWatchIndex++;incrementWatchersCount(this,1);return function deregisterWatch(){var index=arrayRemove(array,watcher);if(index>=0){incrementWatchersCount(scope,-1);if(index<array.$$digestWatchIndex){array.$$digestWatchIndex--}}lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){var oldValues=new Array(watchExpressions.length);var newValues=new Array(watchExpressions.length);var deregisterFns=[];var self=this;var changeReactionScheduled=false;var firstRun=true;if(!watchExpressions.length){var shouldCall=true;self.$evalAsync(function(){if(shouldCall)listener(newValues,newValues,self)});return function deregisterWatchGroup(){shouldCall=false}}if(watchExpressions.length===1){return this.$watch(watchExpressions[0],function watchGroupAction(value,oldValue,scope){newValues[0]=value;oldValues[0]=oldValue;listener(newValues,value===oldValue?newValues:oldValues,scope)})}forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function watchGroupSubAction(value,oldValue){newValues[i]=value;oldValues[i]=oldValue;if(!changeReactionScheduled){changeReactionScheduled=true;self.$evalAsync(watchGroupAction)}});deregisterFns.push(unwatchFn)});function watchGroupAction(){changeReactionScheduled=false;if(firstRun){firstRun=false;listener(newValues,newValues,self)}else{listener(newValues,oldValues,self)}}return function deregisterWatchGroup(){while(deregisterFns.length){deregisterFns.shift()()}}},$watchCollection:function(obj,listener){$watchCollectionInterceptor.$stateful=true;var self=this;var newValue;var oldValue;var veryOldValue;var trackVeryOldValue=listener.length>1;var changeDetected=0;var changeDetector=$parse(obj,$watchCollectionInterceptor);var internalArray=[];var internalObject={};var initRun=true;var oldLength=0;function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(isUndefined(newValue))return;if(!isObject(newValue)){if(oldValue!==newValue){oldValue=newValue;changeDetected++}}else if(isArrayLike(newValue)){if(oldValue!==internalArray){oldValue=internalArray;oldLength=oldValue.length=0;changeDetected++}newLength=newValue.length;if(oldLength!==newLength){changeDetected++;oldValue.length=oldLength=newLength}for(var i=0;i<newLength;i++){oldItem=oldValue[i];newItem=newValue[i];bothNaN=oldItem!==oldItem&&newItem!==newItem;if(!bothNaN&&oldItem!==newItem){changeDetected++;oldValue[i]=newItem}}}else{if(oldValue!==internalObject){oldValue=internalObject={};oldLength=0;changeDetected++}newLength=0;for(key in newValue){if(hasOwnProperty.call(newValue,key)){newLength++;newItem=newValue[key];oldItem=oldValue[key];if(key in oldValue){bothNaN=oldItem!==oldItem&&newItem!==newItem;if(!bothNaN&&oldItem!==newItem){changeDetected++;oldValue[key]=newItem}}else{oldLength++;oldValue[key]=newItem;changeDetected++}}}if(oldLength>newLength){changeDetected++;for(key in oldValue){if(!hasOwnProperty.call(newValue,key)){oldLength--;delete oldValue[key]}}}}return changeDetected}function $watchCollectionAction(){if(initRun){initRun=false;listener(newValue,newValue,self)}else{listener(newValue,veryOldValue,self)}if(trackVeryOldValue){if(!isObject(newValue)){veryOldValue=newValue}else if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++){veryOldValue[i]=newValue[i]}}else{veryOldValue={};for(var key in newValue){if(hasOwnProperty.call(newValue,key)){veryOldValue[key]=newValue[key]}}}}}return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,fn,get,watchers,dirty,ttl=TTL,next,current,target=this,watchLog=[],logIdx,asyncTask;beginPhase("$digest");$browser.$$checkUrlChange();if(this===$rootScope&&applyAsyncId!==null){$browser.defer.cancel(applyAsyncId);flushApplyAsync()}lastDirtyWatch=null;do{dirty=false;current=target;for(var asyncQueuePosition=0;asyncQueuePosition<asyncQueue.length;asyncQueuePosition++){try{asyncTask=asyncQueue[asyncQueuePosition];fn=asyncTask.fn;fn(asyncTask.scope,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}asyncQueue.length=0;traverseScopesLoop:do{if(watchers=current.$$watchers){watchers.$$digestWatchIndex=watchers.length;while(watchers.$$digestWatchIndex--){try{watch=watchers[watchers.$$digestWatchIndex];if(watch){get=watch.get;if((value=get(current))!==(last=watch.last)&&!(watch.eq?equals(value,last):isNumberNaN(value)&&isNumberNaN(last))){dirty=true;lastDirtyWatch=watch;watch.last=watch.eq?copy(value,null):value;fn=watch.fn;fn(value,last===initWatchVal?value:last,current);if(ttl<5){logIdx=4-ttl;if(!watchLog[logIdx])watchLog[logIdx]=[];watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last})}}else if(watch===lastDirtyWatch){dirty=false;break traverseScopesLoop}}}catch(e){$exceptionHandler(e)}}}if(!(next=current.$$watchersCount&&current.$$childHead||current!==target&&current.$$nextSibling)){while(current!==target&&!(next=current.$$nextSibling)){current=current.$parent}}}while(current=next);if((dirty||asyncQueue.length)&&!ttl--){clearPhase();throw $rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\n"+"Watchers fired in the last 5 iterations: {1}",TTL,watchLog)}}while(dirty||asyncQueue.length);clearPhase();while(postDigestQueuePosition<postDigestQueue.length){try{postDigestQueue[postDigestQueuePosition++]()}catch(e){$exceptionHandler(e)}}postDigestQueue.length=postDigestQueuePosition=0;$browser.$$checkUrlChange()},$destroy:function(){if(this.$$destroyed)return;var parent=this.$parent;this.$broadcast("$destroy");this.$$destroyed=true;if(this===$rootScope){$browser.$$applicationDestroyed()}incrementWatchersCount(this,-this.$$watchersCount);for(var eventName in this.$$listenerCount){decrementListenerCount(this,this.$$listenerCount[eventName],eventName)}if(parent&&parent.$$childHead===this)parent.$$childHead=this.$$nextSibling;if(parent&&parent.$$childTail===this)parent.$$childTail=this.$$prevSibling;if(this.$$prevSibling)this.$$prevSibling.$$nextSibling=this.$$nextSibling;if(this.$$nextSibling)this.$$nextSibling.$$prevSibling=this.$$prevSibling;this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop;this.$on=this.$watch=this.$watchGroup=function(){return noop};this.$$listeners={};this.$$nextSibling=null;cleanUpScope(this)},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){if(!$rootScope.$$phase&&!asyncQueue.length){$browser.defer(function(){if(asyncQueue.length){$rootScope.$digest()}})}asyncQueue.push({scope:this,fn:$parse(expr),locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{beginPhase("$apply");try{return this.$eval(expr)}finally{clearPhase()}}catch(e){$exceptionHandler(e)}finally{try{$rootScope.$digest()}catch(e){$exceptionHandler(e);throw e}}},$applyAsync:function(expr){var scope=this;if(expr){applyAsyncQueue.push($applyAsyncExpression)}expr=$parse(expr);scheduleApplyAsync();function $applyAsyncExpression(){scope.$eval(expr)}},$on:function(name,listener){var namedListeners=this.$$listeners[name];if(!namedListeners){this.$$listeners[name]=namedListeners=[]}namedListeners.push(listener);var current=this;do{if(!current.$$listenerCount[name]){current.$$listenerCount[name]=0}current.$$listenerCount[name]++}while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);if(indexOfListener!==-1){namedListeners[indexOfListener]=null;decrementListenerCount(self,1,name)}}},$emit:function(name,args){var empty=[],namedListeners,scope=this,stopPropagation=false,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=true},preventDefault:function(){event.defaultPrevented=true},defaultPrevented:false},listenerArgs=concat([event],arguments,1),i,length;do{namedListeners=scope.$$listeners[name]||empty;event.currentScope=scope;for(i=0,length=namedListeners.length;i<length;i++){if(!namedListeners[i]){namedListeners.splice(i,1);i--;length--;continue}try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}}if(stopPropagation){event.currentScope=null;return event}scope=scope.$parent}while(scope);event.currentScope=null;return event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=true},defaultPrevented:false};if(!target.$$listenerCount[name])return event;var listenerArgs=concat([event],arguments,1),listeners,i,length;while(current=next){event.currentScope=current;listeners=current.$$listeners[name]||[];for(i=0,length=listeners.length;i<length;i++){if(!listeners[i]){listeners.splice(i,1);i--;length--;continue}try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}}if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling)){while(current!==target&&!(next=current.$$nextSibling)){current=current.$parent}}}event.currentScope=null;return event}};var $rootScope=new Scope;var asyncQueue=$rootScope.$$asyncQueue=[];var postDigestQueue=$rootScope.$$postDigestQueue=[];var applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];var postDigestQueuePosition=0;return $rootScope;function beginPhase(phase){if($rootScope.$$phase){throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase)}$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function incrementWatchersCount(current,count){do{current.$$watchersCount+=count}while(current=current.$parent)}function decrementListenerCount(current,count,name){do{current.$$listenerCount[name]-=count;if(current.$$listenerCount[name]===0){delete current.$$listenerCount[name]}}while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){while(applyAsyncQueue.length){try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}}applyAsyncId=null}function scheduleApplyAsync(){if(applyAsyncId===null){applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)})}}}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){if(isDefined(regexp)){aHrefSanitizationWhitelist=regexp;return this}return aHrefSanitizationWhitelist};this.imgSrcSanitizationWhitelist=function(regexp){if(isDefined(regexp)){imgSrcSanitizationWhitelist=regexp;return this}return imgSrcSanitizationWhitelist};this.$get=function(){return function sanitizeUri(uri,isImage){var regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;var normalizedVal;normalizedVal=urlResolve(uri).href;if(normalizedVal!==""&&!normalizedVal.match(regex)){return"unsafe:"+normalizedVal}return uri}}}var $sceMinErr=minErr("$sce");var SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"};var UNDERSCORE_LOWERCASE_REGEXP=/_([a-z])/g;function snakeToCamel(name){return name.replace(UNDERSCORE_LOWERCASE_REGEXP,fnCamelCaseReplace)}function adjustMatcher(matcher){if(matcher==="self"){return matcher}else if(isString(matcher)){if(matcher.indexOf("***")>-1){throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher)}matcher=escapeForRegexp(matcher).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*");return new RegExp("^"+matcher+"$")}else if(isRegExp(matcher)){return new RegExp("^"+matcher.source+"$")}else{throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}}function adjustMatchers(matchers){var adjustedMatchers=[];if(isDefined(matchers)){forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))})}return adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){if(arguments.length){resourceUrlWhitelist=adjustMatchers(value)}return resourceUrlWhitelist};this.resourceUrlBlacklist=function(value){if(arguments.length){resourceUrlBlacklist=adjustMatchers(value)}return resourceUrlBlacklist};this.$get=["$injector",function($injector){var htmlSanitizer=function htmlSanitizer(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};if($injector.has("$sanitize")){htmlSanitizer=$injector.get("$sanitize")}function matchUrl(matcher,parsedUrl){if(matcher==="self"){return urlIsSameOrigin(parsedUrl)}else{return!!matcher.exec(parsedUrl.href)}}function isResourceUrlAllowedByPolicy(url){var parsedUrl=urlResolve(url.toString());var i,n,allowed=false;for(i=0,n=resourceUrlWhitelist.length;i<n;i++){if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=true;break}}if(allowed){for(i=0,n=resourceUrlBlacklist.length;i<n;i++){if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=false;break}}}return allowed}function generateHolderType(Base){var holderType=function TrustedValueHolderType(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};if(Base){holderType.prototype=new Base}holderType.prototype.valueOf=function sceValueOf(){return this.$$unwrapTrustedValue()};holderType.prototype.toString=function sceToString(){return this.$$unwrapTrustedValue().toString()};return holderType}var trustedValueHolderBase=generateHolderType(),byType={};byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase);byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]);function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor){throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue)}if(trustedValue===null||isUndefined(trustedValue)||trustedValue===""){return trustedValue}if(typeof trustedValue!=="string"){throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type)}return new Constructor(trustedValue)}function valueOf(maybeTrusted){if(maybeTrusted instanceof trustedValueHolderBase){return maybeTrusted.$$unwrapTrustedValue()}else{return maybeTrusted}}function getTrusted(type,maybeTrusted){if(maybeTrusted===null||isUndefined(maybeTrusted)||maybeTrusted===""){return maybeTrusted}var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor){return maybeTrusted.$$unwrapTrustedValue()}if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted)){return maybeTrusted}else{throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}}else if(type===SCE_CONTEXTS.HTML){return htmlSanitizer(maybeTrusted)}throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}return{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=true;this.enabled=function(value){if(arguments.length){enabled=!!value}return enabled};this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&msie<8){throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks "+"mode.  You can fix this by adding the text <!doctype html> to the top of your HTML "+"document.  See http://docs.angularjs.org/api/ng.$sce for more information.")}var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled};sce.trustAs=$sceDelegate.trustAs;sce.getTrusted=$sceDelegate.getTrusted;sce.valueOf=$sceDelegate.valueOf;if(!enabled){sce.trustAs=sce.getTrusted=function(type,value){return value};sce.valueOf=identity}sce.parseAs=function sceParseAs(type,expr){var parsed=$parse(expr);if(parsed.literal&&parsed.constant){return parsed}else{return $parse(expr,function(value){return sce.getTrusted(type,value)})}};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[snakeToCamel("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)};sce[snakeToCamel("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)};sce[snakeToCamel("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}});return sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var eventSupport={},isNw=$window.nw&&$window.nw.process,isChromePackagedApp=!isNw&&$window.chrome&&($window.chrome.app&&$window.chrome.app.runtime||!$window.chrome.app&&$window.chrome.runtime&&$window.chrome.runtime.id),hasHistoryPushState=!isChromePackagedApp&&$window.history&&$window.history.pushState,android=toInt((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},bodyStyle=document.body&&document.body.style,transitions=false,animations=false;if(bodyStyle){transitions=!!("transition"in bodyStyle||"webkitTransition"in bodyStyle);animations=!!("animation"in bodyStyle||"webkitAnimation"in bodyStyle)}return{history:!!(hasHistoryPushState&&!(android<4)&&!boxee),hasEvent:function(event){if(event==="input"&&msie)return false;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),transitions:transitions,animations:animations,android:android}}]}var $templateRequestMinErr=minErr("$compile");function $TemplateRequestProvider(){var httpOptions;this.httpOptions=function(val){if(val){httpOptions=val;return this}return httpOptions};this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function($exceptionHandler,$templateCache,$http,$q,$sce){function handleRequestFn(tpl,ignoreRequestError){handleRequestFn.totalPendingRequests++;if(!isString(tpl)||isUndefined($templateCache.get(tpl))){tpl=$sce.getTrustedResourceUrl(tpl)}var transformResponse=$http.defaults&&$http.defaults.transformResponse;if(isArray(transformResponse)){transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform})}else if(transformResponse===defaultHttpResponseTransform){transformResponse=null}return $http.get(tpl,extend({cache:$templateCache,transformResponse:transformResponse},httpOptions)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(response){$templateCache.put(tpl,response.data);return response.data},handleError);function handleError(resp){if(!ignoreRequestError){resp=$templateRequestMinErr("tpload","Failed to load template: {0} (HTTP status: {1} {2})",tpl,resp.status,resp.statusText);$exceptionHandler(resp)}return $q.reject(resp)}}handleRequestFn.totalPendingRequests=0;return handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding");var matches=[];forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");if(dataBinding){forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)");if(matcher.test(bindingName)){matches.push(binding)}}else{if(bindingName.indexOf(expression)!==-1){matches.push(binding)}}})}});return matches};testability.findModels=function(element,expression,opt_exactMatch){var prefixes=["ng-","data-ng-","ng\\:"];for(var p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=";var selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]';var elements=element.querySelectorAll(selector);if(elements.length){return elements}}};testability.getLocation=function(){return $location.url()};testability.setLocation=function(url){if(url!==$location.url()){$location.url(url);$rootScope.$digest()}};testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)};return testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){var deferreds={};function timeout(fn,delay,invokeApply){if(!isFunction(fn)){invokeApply=delay;delay=fn;fn=noop}var args=sliceArgs(arguments,3),skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise,timeoutId;timeoutId=$browser.defer(function(){try{deferred.resolve(fn.apply(null,args))}catch(e){deferred.reject(e);$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}if(!skipApply)$rootScope.$apply()},delay);promise.$$timeoutId=timeoutId;deferreds[timeoutId]=deferred;return promise}timeout.cancel=function(promise){if(promise&&promise.$$timeoutId in deferreds){deferreds[promise.$$timeoutId].promise.catch(noop);deferreds[promise.$$timeoutId].reject("canceled");delete deferreds[promise.$$timeoutId];return $browser.defer.cancel(promise.$$timeoutId)}return false};return timeout}]}var urlParsingNode=window.document.createElement("a");var originUrl=urlResolve(window.location.href);function urlResolve(url){var href=url;if(msie){urlParsingNode.setAttribute("href",href);href=urlParsingNode.href}urlParsingNode.setAttribute("href",href);return{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:urlParsingNode.pathname.charAt(0)==="/"?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $$CookieReader($document){var rawDocument=$document[0]||{};var lastCookies={};var lastCookieString="";function safeGetCookie(rawDocument){try{return rawDocument.cookie||""}catch(e){return""}}function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}return function(){var cookieArray,cookie,i,index,name;var currentCookieString=safeGetCookie(rawDocument);if(currentCookieString!==lastCookieString){lastCookieString=currentCookieString;cookieArray=lastCookieString.split("; ");lastCookies={};for(i=0;i<cookieArray.length;i++){cookie=cookieArray[i];index=cookie.indexOf("=");if(index>0){name=safeDecodeURIComponent(cookie.substring(0,index));if(isUndefined(lastCookies[name])){lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))}}}}return lastCookies}}$$CookieReader.$inject=["$document"];function $$CookieReaderProvider(){this.$get=$$CookieReader}$FilterProvider.$inject=["$provide"];function $FilterProvider($provide){var suffix="Filter";function register(name,factory){if(isObject(name)){var filters={};forEach(name,function(filter,key){filters[key]=register(key,filter)});return filters}else{return $provide.factory(name+suffix,factory)}}this.register=register;this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}];register("currency",currencyFilter);register("date",dateFilter);register("filter",filterFilter);register("json",jsonFilter);register("limitTo",limitToFilter);register("lowercase",lowercaseFilter);register("number",numberFilter);register("orderBy",orderByFilter);register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator,anyPropertyKey){if(!isArrayLike(array)){if(array==null){return array}else{throw minErr("filter")("notarray","Expected array but received: {0}",array)}}anyPropertyKey=anyPropertyKey||"$";var expressionType=getTypeForFilter(expression);var predicateFn;var matchAgainstAnyProp;switch(expressionType){case"function":predicateFn=expression;break;case"boolean":case"null":case"number":case"string":matchAgainstAnyProp=true;case"object":predicateFn=createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp);break;default:return array}return Array.prototype.filter.call(array,predicateFn)}}function createPredicateFn(expression,comparator,anyPropertyKey,matchAgainstAnyProp){var shouldMatchPrimitives=isObject(expression)&&anyPropertyKey in expression;var predicateFn;if(comparator===true){comparator=equals}else if(!isFunction(comparator)){comparator=function(actual,expected){if(isUndefined(actual)){return false}if(actual===null||expected===null){return actual===expected}if(isObject(expected)||isObject(actual)&&!hasCustomToString(actual)){return false}actual=lowercase(""+actual);expected=lowercase(""+expected);return actual.indexOf(expected)!==-1}}predicateFn=function(item){if(shouldMatchPrimitives&&!isObject(item)){return deepCompare(item,expression[anyPropertyKey],comparator,anyPropertyKey,false)}return deepCompare(item,expression,comparator,anyPropertyKey,matchAgainstAnyProp)};return predicateFn}function deepCompare(actual,expected,comparator,anyPropertyKey,matchAgainstAnyProp,dontMatchWholeObject){var actualType=getTypeForFilter(actual);var expectedType=getTypeForFilter(expected);if(expectedType==="string"&&expected.charAt(0)==="!"){return!deepCompare(actual,expected.substring(1),comparator,anyPropertyKey,matchAgainstAnyProp)}else if(isArray(actual)){return actual.some(function(item){return deepCompare(item,expected,comparator,anyPropertyKey,matchAgainstAnyProp)})}switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual){if(key.charAt&&key.charAt(0)!=="$"&&deepCompare(actual[key],expected,comparator,anyPropertyKey,true)){return true}}return dontMatchWholeObject?false:deepCompare(actual,expected,comparator,anyPropertyKey,false)}else if(expectedType==="object"){for(key in expected){var expectedVal=expected[key];if(isFunction(expectedVal)||isUndefined(expectedVal)){continue}var matchAnyProperty=key===anyPropertyKey;var actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,anyPropertyKey,matchAnyProperty,matchAnyProperty)){return false}}return true}else{return comparator(actual,expected)}case"function":return false;default:return comparator(actual,expected)}}function getTypeForFilter(val){return val===null?"null":typeof val}var MAX_DIGITS=22;var DECIMAL_SEP=".";var ZERO_CHAR="0";currencyFilter.$inject=["$locale"];function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){if(isUndefined(currencySymbol)){currencySymbol=formats.CURRENCY_SYM}if(isUndefined(fractionSize)){fractionSize=formats.PATTERNS[1].maxFrac}return amount==null?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}numberFilter.$inject=["$locale"];function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return number==null?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function parse(numStr){var exponent=0,digits,numberOfIntegerDigits;var i,j,zeros;if((numberOfIntegerDigits=numStr.indexOf(DECIMAL_SEP))>-1){numStr=numStr.replace(DECIMAL_SEP,"")}if((i=numStr.search(/e/i))>0){if(numberOfIntegerDigits<0)numberOfIntegerDigits=i;numberOfIntegerDigits+=+numStr.slice(i+1);numStr=numStr.substring(0,i)}else if(numberOfIntegerDigits<0){numberOfIntegerDigits=numStr.length}for(i=0;numStr.charAt(i)===ZERO_CHAR;i++){}if(i===(zeros=numStr.length)){digits=[0];numberOfIntegerDigits=1}else{zeros--;while(numStr.charAt(zeros)===ZERO_CHAR)zeros--;numberOfIntegerDigits-=i;digits=[];for(j=0;i<=zeros;i++,j++){digits[j]=+numStr.charAt(i)}}if(numberOfIntegerDigits>MAX_DIGITS){digits=digits.splice(0,MAX_DIGITS-1);exponent=numberOfIntegerDigits-1;numberOfIntegerDigits=1}return{d:digits,e:exponent,i:numberOfIntegerDigits}}function roundNumber(parsedNumber,fractionSize,minFrac,maxFrac){var digits=parsedNumber.d;var fractionLen=digits.length-parsedNumber.i;fractionSize=isUndefined(fractionSize)?Math.min(Math.max(minFrac,fractionLen),maxFrac):+fractionSize;var roundAt=fractionSize+parsedNumber.i;var digit=digits[roundAt];if(roundAt>0){digits.splice(Math.max(parsedNumber.i,roundAt));for(var j=roundAt;j<digits.length;j++){digits[j]=0}}else{fractionLen=Math.max(0,fractionLen);parsedNumber.i=1;digits.length=Math.max(1,roundAt=fractionSize+1);digits[0]=0;for(var i=1;i<roundAt;i++)digits[i]=0}if(digit>=5){if(roundAt-1<0){for(var k=0;k>roundAt;k--){digits.unshift(0);parsedNumber.i++}digits.unshift(1);parsedNumber.i++}else{digits[roundAt-1]++}}for(;fractionLen<Math.max(0,fractionSize);fractionLen++)digits.push(0);var carry=digits.reduceRight(function(carry,d,i,digits){d=d+carry;digits[i]=d%10;return Math.floor(d/10)},0);if(carry){digits.unshift(carry);parsedNumber.i++}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!(isString(number)||isNumber(number))||isNaN(number))return"";var isInfinity=!isFinite(number);var isZero=false;var numStr=Math.abs(number)+"",formattedText="",parsedNumber;if(isInfinity){formattedText="โ"}else{parsedNumber=parse(numStr);roundNumber(parsedNumber,fractionSize,pattern.minFrac,pattern.maxFrac);var digits=parsedNumber.d;var integerLen=parsedNumber.i;var exponent=parsedNumber.e;var decimals=[];isZero=digits.reduce(function(isZero,d){return isZero&&!d},true);while(integerLen<0){digits.unshift(0);integerLen++}if(integerLen>0){decimals=digits.splice(integerLen,digits.length)}else{decimals=digits;digits=[0]}var groups=[];if(digits.length>=pattern.lgSize){groups.unshift(digits.splice(-pattern.lgSize,digits.length).join(""))}while(digits.length>pattern.gSize){groups.unshift(digits.splice(-pattern.gSize,digits.length).join(""))}if(digits.length){groups.unshift(digits.join(""))}formattedText=groups.join(groupSep);if(decimals.length){formattedText+=decimalSep+decimals.join("")}if(exponent){formattedText+="e+"+exponent}}if(number<0&&!isZero){return pattern.negPre+formattedText+pattern.negSuf}else{return pattern.posPre+formattedText+pattern.posSuf}}function padNumber(num,digits,trim,negWrap){var neg="";if(num<0||negWrap&&num<=0){if(negWrap){num=-num+1}else{num=-num;neg="-"}}num=""+num;while(num.length<digits)num=ZERO_CHAR+num;if(trim){num=num.substr(num.length-digits)}return neg+num}function dateGetter(name,size,offset,trim,negWrap){offset=offset||0;return function(date){var value=date["get"+name]();if(offset>0||value>-offset){value+=offset}if(value===0&&offset===-12)value=12;return padNumber(value,size,trim,negWrap)}}function dateStrGetter(name,shortForm,standAlone){return function(date,formats){var value=date["get"+name]();var propPrefix=(standAlone?"STANDALONE":"")+(shortForm?"SHORT":"");var get=uppercase(propPrefix+name);return formats[get][value]}}function timeZoneGetter(date,formats,offset){var zone=-1*offset;var paddedZone=zone>=0?"+":"";paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2);return paddedZone}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(dayOfWeekOnFirst<=4?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date);var diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}var DATE_FORMATS={yyyy:dateGetter("FullYear",4,0,false,true),yy:dateGetter("FullYear",2,0,true,true),y:dateGetter("FullYear",1,0,false,true),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",true),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",false,true),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",true),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter};var DATE_FORMATS_SPLIT=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,NUMBER_STRING=/^-?\d+$/;dateFilter.$inject=["$locale"];function dateFilter($locale){var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;if(match[9]){tzHour=toInt(match[9]+match[10]);tzMin=toInt(match[9]+match[11])}dateSetter.call(date,toInt(match[1]),toInt(match[2])-1,toInt(match[3]));var h=toInt(match[4]||0)-tzHour;var m=toInt(match[5]||0)-tzMin;var s=toInt(match[6]||0);var ms=Math.round(parseFloat("0."+(match[7]||0))*1e3);timeSetter.call(date,h,m,s,ms);return date}return string}return function(date,format,timezone){var text="",parts=[],fn,match;format=format||"mediumDate";format=$locale.DATETIME_FORMATS[format]||format;if(isString(date)){date=NUMBER_STRING.test(date)?toInt(date):jsonStringToDate(date)}if(isNumber(date)){date=new Date(date)}if(!isDate(date)||!isFinite(date.getTime())){return date}while(format){match=DATE_FORMATS_SPLIT.exec(format);if(match){parts=concat(parts,match,1);format=parts.pop()}else{parts.push(format);format=null}}var dateTimezoneOffset=date.getTimezoneOffset();if(timezone){dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset);date=convertTimezoneToLocal(date,timezone,true)}forEach(parts,function(value){fn=DATE_FORMATS[value];text+=fn?fn(date,$locale.DATETIME_FORMATS,dateTimezoneOffset):value==="''"?"'":value.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return text}}function jsonFilter(){return function(object,spacing){if(isUndefined(spacing)){spacing=2}return toJson(object,spacing)}}var lowercaseFilter=valueFn(lowercase);var uppercaseFilter=valueFn(uppercase);function limitToFilter(){return function(input,limit,begin){if(Math.abs(Number(limit))===Infinity){limit=Number(limit)}else{limit=toInt(limit)}if(isNumberNaN(limit))return input;if(isNumber(input))input=input.toString();if(!isArrayLike(input))return input;begin=!begin||isNaN(begin)?0:toInt(begin);begin=begin<0?Math.max(0,input.length+begin):begin;if(limit>=0){return sliceFn(input,begin,begin+limit)}else{if(begin===0){return sliceFn(input,limit,input.length)}else{return sliceFn(input,Math.max(0,begin+limit),begin)}}}}function sliceFn(input,begin,end){if(isString(input))return input.slice(begin,end);return slice.call(input,begin,end)}orderByFilter.$inject=["$parse"];function orderByFilter($parse){return function(array,sortPredicate,reverseOrder,compareFn){if(array==null)return array;if(!isArrayLike(array)){throw minErr("orderBy")("notarray","Expected array but received: {0}",array)}if(!isArray(sortPredicate)){sortPredicate=[sortPredicate]}if(sortPredicate.length===0){sortPredicate=["+"]}var predicates=processPredicates(sortPredicate);var descending=reverseOrder?-1:1;var compare=isFunction(compareFn)?compareFn:defaultCompare;var compareValues=Array.prototype.map.call(array,getComparisonObject);compareValues.sort(doComparison);array=compareValues.map(function(item){return item.value});return array;function getComparisonObject(value,index){return{value:value,tieBreaker:{value:index,type:"number",index:index},predicateValues:predicates.map(function(predicate){return getPredicateValue(predicate.get(value),index)})}}function doComparison(v1,v2){for(var i=0,ii=predicates.length;i<ii;i++){var result=compare(v1.predicateValues[i],v2.predicateValues[i]);if(result){return result*predicates[i].descending*descending}}return compare(v1.tieBreaker,v2.tieBreaker)*descending}};function processPredicates(sortPredicates){return sortPredicates.map(function(predicate){var descending=1,get=identity;if(isFunction(predicate)){get=predicate}else if(isString(predicate)){if(predicate.charAt(0)==="+"||predicate.charAt(0)==="-"){descending=predicate.charAt(0)==="-"?-1:1;predicate=predicate.substring(1)}if(predicate!==""){get=$parse(predicate);if(get.constant){var key=get();get=function(value){return value[key]}}}}return{get:get,descending:descending}})}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return true;default:return false}}function objectValue(value){if(isFunction(value.valueOf)){value=value.valueOf();if(isPrimitive(value))return value}if(hasCustomToString(value)){value=value.toString();if(isPrimitive(value))return value}return value}function getPredicateValue(value,index){var type=typeof value;if(value===null){type="string";value="null"}else if(type==="object"){value=objectValue(value)}return{value:value,type:type,index:index}}function defaultCompare(v1,v2){var result=0;var type1=v1.type;var type2=v2.type;if(type1===type2){var value1=v1.value;var value2=v2.value;if(type1==="string"){value1=value1.toLowerCase();value2=value2.toLowerCase()}else if(type1==="object"){if(isObject(value1))value1=v1.index;if(isObject(value2))value2=v2.index}if(value1!==value2){result=value1<value2?-1:1}}else{result=type1<type2?-1:1}return result}}function ngDirective(directive){if(isFunction(directive)){directive={link:directive}}directive.restrict=directive.restrict||"AC";return valueFn(directive)}var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){if(!attr.href&&!attr.xlinkHref){return function(scope,element){if(element[0].nodeName.toLowerCase()!=="a")return;var href=toString.call(element.prop("href"))==="[object SVGAnimatedString]"?"xlink:href":"href";element.on("click",function(event){if(!element.attr(href)){event.preventDefault()}})}}}});var ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if(propName==="multiple")return;function defaultLinkFn(scope,element,attr){scope.$watch(attr[normalized],function ngBooleanAttrWatchAction(value){attr.$set(attrName,!!value)})}var normalized=directiveNormalize("ng-"+attrName);var linkFn=defaultLinkFn;if(propName==="checked"){linkFn=function(scope,element,attr){if(attr.ngModel!==attr[normalized]){defaultLinkFn(scope,element,attr)}}}ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:linkFn}}});forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if(ngAttr==="ngPattern"&&attr.ngPattern.charAt(0)==="/"){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match){attr.$set("ngPattern",new RegExp(match[1],match[2]));return}}scope.$watch(attr[ngAttr],function ngAttrAliasWatchAction(value){attr.$set(ngAttr,value)})}}}});forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;if(attrName==="href"&&toString.call(element.prop("href"))==="[object SVGAnimatedString]"){name="xlinkHref";attr.$attr[name]="xlink:href";propName=null}attr.$observe(normalized,function(value){if(!value){if(attrName==="href"){attr.$set(name,null)}return}attr.$set(name,value);if(msie&&propName)element.prop(propName,attr[name])})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},PENDING_CLASS="ng-pending",SUBMITTED_CLASS="ng-submitted";function nullFormRenameControl(control,name){control.$name=name}FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];function FormController($element,$attrs,$scope,$animate,$interpolate){this.$$controls=[];this.$error={};this.$$success={};this.$pending=undefined;this.$name=$interpolate($attrs.name||$attrs.ngForm||"")($scope);this.$dirty=false;this.$pristine=true;this.$valid=true;this.$invalid=false;this.$submitted=false;this.$$parentForm=nullFormCtrl;this.$$element=$element;this.$$animate=$animate;setupValidity(this)}FormController.prototype={$rollbackViewValue:function(){forEach(this.$$controls,function(control){control.$rollbackViewValue()})},$commitViewValue:function(){forEach(this.$$controls,function(control){control.$commitViewValue()})},$addControl:function(control){assertNotHasOwnProperty(control.$name,"input");this.$$controls.push(control);if(control.$name){this[control.$name]=control}control.$$parentForm=this},$$renameControl:function(control,newName){var oldName=control.$name;if(this[oldName]===control){delete this[oldName]}this[newName]=control;control.$name=newName},$removeControl:function(control){if(control.$name&&this[control.$name]===control){delete this[control.$name]}forEach(this.$pending,function(value,name){this.$setValidity(name,null,control)},this);forEach(this.$error,function(value,name){this.$setValidity(name,null,control)},this);forEach(this.$$success,function(value,name){this.$setValidity(name,null,control)},this);arrayRemove(this.$$controls,control);control.$$parentForm=nullFormCtrl},$setDirty:function(){this.$$animate.removeClass(this.$$element,PRISTINE_CLASS);this.$$animate.addClass(this.$$element,DIRTY_CLASS);this.$dirty=true;this.$pristine=false;this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS);this.$dirty=false;this.$pristine=true;this.$submitted=false;forEach(this.$$controls,function(control){control.$setPristine()})},$setUntouched:function(){forEach(this.$$controls,function(control){control.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,SUBMITTED_CLASS);this.$submitted=true;this.$$parentForm.$setSubmitted()}};addSetValidityMethod({clazz:FormController,set:function(object,property,controller){var list=object[property];if(!list){object[property]=[controller]}else{var index=list.indexOf(controller);if(index===-1){list.push(controller)}}},unset:function(object,property,controller){var list=object[property];if(!list){return}arrayRemove(list,controller);if(list.length===0){delete object[property]}}});var formDirectiveFactory=function(isNgForm){return["$timeout","$parse",function($timeout,$parse){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function ngFormCompile(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":isNgForm&&attr.ngForm?"ngForm":false;return{pre:function ngFormPreLink(scope,formElement,attr,ctrls){var controller=ctrls[0];if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue();controller.$setSubmitted()});event.preventDefault()};formElement[0].addEventListener("submit",handleFormSubmission);formElement.on("$destroy",function(){$timeout(function(){formElement[0].removeEventListener("submit",handleFormSubmission)},0,false)})}var parentFormCtrl=ctrls[1]||controller.$$parentForm;parentFormCtrl.$addControl(controller);var setter=nameAttr?getSetter(controller.$name):noop;if(nameAttr){setter(scope,controller);attr.$observe(nameAttr,function(newValue){if(controller.$name===newValue)return;setter(scope,undefined);controller.$$parentForm.$$renameControl(controller,newValue);setter=getSetter(controller.$name);setter(scope,controller)})}formElement.on("$destroy",function(){controller.$$parentForm.$removeControl(controller);setter(scope,undefined);extend(controller,nullFormCtrl)})}}}};return formDirective;function getSetter(expression){if(expression===""){return $parse('this[""]').assign}return $parse(expression).assign||noop}}]};var formDirective=formDirectiveFactory();var ngFormDirective=formDirectiveFactory(true);function setupValidity(instance){instance.$$classCache={};instance.$$classCache[INVALID_CLASS]=!(instance.$$classCache[VALID_CLASS]=instance.$$element.hasClass(VALID_CLASS))}function addSetValidityMethod(context){var clazz=context.clazz,set=context.set,unset=context.unset;clazz.prototype.$setValidity=function(validationErrorKey,state,controller){if(isUndefined(state)){createAndSet(this,"$pending",validationErrorKey,controller)}else{unsetAndCleanup(this,"$pending",validationErrorKey,controller)}if(!isBoolean(state)){unset(this.$error,validationErrorKey,controller);unset(this.$$success,validationErrorKey,controller)}else{if(state){unset(this.$error,validationErrorKey,controller);set(this.$$success,validationErrorKey,controller)}else{set(this.$error,validationErrorKey,controller);unset(this.$$success,validationErrorKey,controller)}}if(this.$pending){cachedToggleClass(this,PENDING_CLASS,true);this.$valid=this.$invalid=undefined;toggleValidationCss(this,"",null)}else{cachedToggleClass(this,PENDING_CLASS,false);this.$valid=isObjectEmpty(this.$error);this.$invalid=!this.$valid;toggleValidationCss(this,"",this.$valid)}var combinedState;if(this.$pending&&this.$pending[validationErrorKey]){combinedState=undefined}else if(this.$error[validationErrorKey]){combinedState=false}else if(this.$$success[validationErrorKey]){combinedState=true}else{combinedState=null}toggleValidationCss(this,validationErrorKey,combinedState);this.$$parentForm.$setValidity(validationErrorKey,combinedState,this)};function createAndSet(ctrl,name,value,controller){if(!ctrl[name]){ctrl[name]={}}set(ctrl[name],value,controller)}function unsetAndCleanup(ctrl,name,value,controller){if(ctrl[name]){unset(ctrl[name],value,controller)}if(isObjectEmpty(ctrl[name])){ctrl[name]=undefined}}function cachedToggleClass(ctrl,className,switchValue){if(switchValue&&!ctrl.$$classCache[className]){ctrl.$$animate.addClass(ctrl.$$element,className);ctrl.$$classCache[className]=true}else if(!switchValue&&ctrl.$$classCache[className]){ctrl.$$animate.removeClass(ctrl.$$element,className);ctrl.$$classCache[className]=false}}function toggleValidationCss(ctrl,validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"";cachedToggleClass(ctrl,VALID_CLASS+validationErrorKey,isValid===true);cachedToggleClass(ctrl,INVALID_CLASS+validationErrorKey,isValid===false)}}function isObjectEmpty(obj){if(obj){for(var prop in obj){if(obj.hasOwnProperty(prop)){return false}}}return true}var ISO_DATE_REGEXP=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/;var URL_REGEXP=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i;var EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;var NUMBER_REGEXP=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/;var DATE_REGEXP=/^(\d{4,})-(\d{2})-(\d{2})$/;var DATETIMELOCAL_REGEXP=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var WEEK_REGEXP=/^(\d{4,})-W(\d\d)$/;var MONTH_REGEXP=/^(\d{4,})-(\d\d)$/;var TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/;var PARTIAL_VALIDATION_EVENTS="keydown wheel mousedown";var PARTIAL_VALIDATION_TYPES=createMap();forEach("date,datetime-local,month,time,week".split(","),function(type){PARTIAL_VALIDATION_TYPES[type]=true});var inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,range:rangeInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop};function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=false;element.on("compositionstart",function(){composing=true});element.on("compositionend",function(){composing=false;listener()})}var timeout;var listener=function(ev){if(timeout){$browser.defer.cancel(timeout);timeout=null}if(composing)return;var value=element.val(),event=ev&&ev.type;if(type!=="password"&&(!attr.ngTrim||attr.ngTrim!=="false")){value=trim(value)}if(ctrl.$viewValue!==value||value===""&&ctrl.$$hasNativeValidators){ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input")){element.on("input",listener)}else{var deferListener=function(ev,input,origValue){if(!timeout){timeout=$browser.defer(function(){timeout=null;if(!input||input.value!==origValue){listener(ev)}})}};element.on("keydown",function(event){var key=event.keyCode;if(key===91||15<key&&key<19||37<=key&&key<=40)return;deferListener(event,this,this.value)});if($sniffer.hasEvent("paste")){element.on("paste cut",deferListener)}}element.on("change",listener);if(PARTIAL_VALIDATION_TYPES[type]&&ctrl.$$hasNativeValidators&&type===attr.type){element.on(PARTIAL_VALIDATION_EVENTS,function(ev){if(!timeout){var validity=this[VALIDITY_STATE_PROPERTY];var origBadInput=validity.badInput;var origTypeMismatch=validity.typeMismatch;timeout=$browser.defer(function(){timeout=null;if(validity.badInput!==origBadInput||validity.typeMismatch!==origTypeMismatch){listener(ev)}})}})}ctrl.$render=function(){var value=ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue;if(element.val()!==value){element.val(value)}}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek)){return isoWeek}if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=(week-1)*7;if(existingDate){hours=existingDate.getHours();minutes=existingDate.getMinutes();seconds=existingDate.getSeconds();milliseconds=existingDate.getMilliseconds()}return new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso)){return iso}if(isString(iso)){if(iso.charAt(0)==='"'&&iso.charAt(iso.length-1)==='"'){iso=iso.substring(1,iso.length-1)}if(ISO_DATE_REGEXP.test(iso)){return new Date(iso)}regexp.lastIndex=0;parts=regexp.exec(iso);if(parts){parts.shift();if(date){map={yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}}else{map={yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0}}forEach(parts,function(part,index){if(index<mapping.length){map[mapping[index]]=+part}});return new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,map.sss*1e3||0)}}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function dynamicDateInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter){badInputChecker(scope,element,attr,ctrl);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var timezone=ctrl&&ctrl.$options.getOption("timezone");var previousDate;ctrl.$$parserName=type;ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);if(timezone){parsedDate=convertTimezoneToLocal(parsedDate,timezone)}return parsedDate}return undefined});ctrl.$formatters.push(function(value){if(value&&!isDate(value)){throw ngModelMinErr("datefmt","Expected `{0}` to be a date",value)}if(isValidDate(value)){previousDate=value;if(previousDate&&timezone){previousDate=convertTimezoneToLocal(previousDate,timezone,true)}return $filter("date")(value,format,timezone)}else{previousDate=null;return""}});if(isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal};attr.$observe("min",function(val){minVal=parseObservedDateValue(val);ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal};attr.$observe("max",function(val){maxVal=parseObservedDateValue(val);ctrl.$validate()})}function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)&&!isDate(val)?parseDate(val)||undefined:val}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0];var nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);if(nativeValidation){ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput||validity.typeMismatch?undefined:value})}}function numberFormatterParser(ctrl){ctrl.$$parserName="number";ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(NUMBER_REGEXP.test(value))return parseFloat(value);return undefined});ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value)){throw ngModelMinErr("numfmt","Expected `{0}` to be a number",value)}value=value.toString()}return value})}function parseNumberAttrVal(val){if(isDefined(val)&&!isNumber(val)){val=parseFloat(val)}return!isNumberNaN(val)?val:undefined}function isNumberInteger(num){return(num|0)===num}function countDecimals(num){var numString=num.toString();var decimalSymbolIndex=numString.indexOf(".");if(decimalSymbolIndex===-1){if(-1<num&&num<1){var match=/e-(\d+)$/.exec(numString);if(match){return Number(match[1])}}return 0}return numString.length-decimalSymbolIndex-1}function isValidForStep(viewValue,stepBase,step){var value=Number(viewValue);var isNonIntegerValue=!isNumberInteger(value);var isNonIntegerStepBase=!isNumberInteger(stepBase);var isNonIntegerStep=!isNumberInteger(step);if(isNonIntegerValue||isNonIntegerStepBase||isNonIntegerStep){var valueDecimals=isNonIntegerValue?countDecimals(value):0;var stepBaseDecimals=isNonIntegerStepBase?countDecimals(stepBase):0;var stepDecimals=isNonIntegerStep?countDecimals(step):0;var decimalCount=Math.max(valueDecimals,stepBaseDecimals,stepDecimals);var multiplier=Math.pow(10,decimalCount);value=value*multiplier;stepBase=stepBase*multiplier;step=step*multiplier;if(isNonIntegerValue)value=Math.round(value);if(isNonIntegerStepBase)stepBase=Math.round(stepBase);if(isNonIntegerStep)step=Math.round(step)}return(value-stepBase)%step===0}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl);numberFormatterParser(ctrl);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var minVal;var maxVal;if(isDefined(attr.min)||attr.ngMin){ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal};attr.$observe("min",function(val){minVal=parseNumberAttrVal(val);ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||value<=maxVal};attr.$observe("max",function(val){maxVal=parseNumberAttrVal(val);ctrl.$validate()})}if(isDefined(attr.step)||attr.ngStep){var stepVal;ctrl.$validators.step=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)};attr.$observe("step",function(val){stepVal=parseNumberAttrVal(val);ctrl.$validate()})}}function rangeInputType(scope,element,attr,ctrl,$sniffer,$browser){badInputChecker(scope,element,attr,ctrl);numberFormatterParser(ctrl);baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var supportsRange=ctrl.$$hasNativeValidators&&element[0].type==="range",minVal=supportsRange?0:undefined,maxVal=supportsRange?100:undefined,stepVal=supportsRange?1:undefined,validity=element[0].validity,hasMinAttr=isDefined(attr.min),hasMaxAttr=isDefined(attr.max),hasStepAttr=isDefined(attr.step);var originalRender=ctrl.$render;ctrl.$render=supportsRange&&isDefined(validity.rangeUnderflow)&&isDefined(validity.rangeOverflow)?function rangeRender(){originalRender();ctrl.$setViewValue(element.val())}:originalRender;if(hasMinAttr){ctrl.$validators.min=supportsRange?function noopMinValidator(){return true}:function minValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(minVal)||viewValue>=minVal};setInitialValueAndObserver("min",minChange)}if(hasMaxAttr){ctrl.$validators.max=supportsRange?function noopMaxValidator(){return true}:function maxValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(maxVal)||viewValue<=maxVal};setInitialValueAndObserver("max",maxChange)}if(hasStepAttr){ctrl.$validators.step=supportsRange?function nativeStepValidator(){return!validity.stepMismatch}:function stepValidator(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(stepVal)||isValidForStep(viewValue,minVal||0,stepVal)};setInitialValueAndObserver("step",stepChange)}function setInitialValueAndObserver(htmlAttrName,changeFn){element.attr(htmlAttrName,attr[htmlAttrName]);attr.$observe(htmlAttrName,changeFn)}function minChange(val){minVal=parseNumberAttrVal(val);if(isNumberNaN(ctrl.$modelValue)){return}if(supportsRange){var elVal=element.val();if(minVal>elVal){elVal=minVal;element.val(elVal)}ctrl.$setViewValue(elVal)}else{ctrl.$validate()}}function maxChange(val){maxVal=parseNumberAttrVal(val);if(isNumberNaN(ctrl.$modelValue)){return}if(supportsRange){var elVal=element.val();if(maxVal<elVal){element.val(maxVal);elVal=maxVal<minVal?minVal:maxVal}ctrl.$setViewValue(elVal)}else{ctrl.$validate()}}function stepChange(val){stepVal=parseNumberAttrVal(val);if(isNumberNaN(ctrl.$modelValue)){return}if(supportsRange&&ctrl.$viewValue!==element.val()){ctrl.$setViewValue(element.val())}else{ctrl.$validate()}}}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl);ctrl.$$parserName="url";ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser);stringBasedInputType(ctrl);ctrl.$$parserName="email";ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){var doTrim=!attr.ngTrim||trim(attr.ngTrim)!=="false";if(isUndefined(attr.name)){element.attr("name",nextUid())}var listener=function(ev){var value;if(element[0].checked){value=attr.value;if(doTrim){value=trim(value)}ctrl.$setViewValue(value,ev&&ev.type)}};element.on("click",listener);ctrl.$render=function(){var value=attr.value;if(doTrim){value=trim(value)}element[0].checked=value===ctrl.$viewValue};attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){parseFn=$parse(expression);if(!parseFn.constant){throw ngModelMinErr("constexpr","Expected constant expression for `{0}`, but saw "+"`{1}`.",name,expression)}return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,true);var falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,false);var listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener);ctrl.$render=function(){element[0].checked=ctrl.$viewValue};ctrl.$isEmpty=function(value){return value===false};ctrl.$formatters.push(function(value){return equals(value,trueValue)});ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}var inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){if(ctrls[0]){(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}}];var CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/;var ngValueDirective=function(){function updateElementValue(element,attr,value){var propValue=isDefined(value)?value:msie===9?"":null;element.prop("value",propValue);attr.$set("value",value)}return{restrict:"A",priority:100,compile:function(tpl,tplAttr){if(CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)){return function ngValueConstantLink(scope,elm,attr){var value=scope.$eval(attr.ngValue);updateElementValue(elm,attr,value)}}else{return function ngValueLink(scope,elm,attr){scope.$watch(attr.ngValue,function valueWatchAction(value){updateElementValue(elm,attr,value)})}}}}};var ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function ngBindCompile(templateElement){$compile.$$addBindingClass(templateElement);return function ngBindLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind);element=element[0];scope.$watch(attr.ngBind,function ngBindWatchAction(value){element.textContent=stringify(value)})}}}}];var ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function ngBindTemplateCompile(templateElement){$compile.$$addBindingClass(templateElement);return function ngBindTemplateLink(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions);element=element[0];attr.$observe("ngBindTemplate",function(value){element.textContent=isUndefined(value)?"":value})}}}}];var ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function ngBindHtmlCompile(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml);var ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function sceValueOf(val){return $sce.valueOf(val)});$compile.$$addBindingClass(tElement);return function ngBindHtmlLink(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml);scope.$watch(ngBindHtmlWatch,function ngBindHtmlWatchAction(){var value=ngBindHtmlGetter(scope);element.html($sce.getTrustedHtml(value)||"")})}}}}];var ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}});function classDirective(name,selector){name="ngClass"+name;var indexWatchExpression;return["$parse",function($parse){return{restrict:"AC",link:function(scope,element,attr){var classCounts=element.data("$classCounts");var oldModulo=true;var oldClassString;if(!classCounts){classCounts=createMap();element.data("$classCounts",classCounts)}if(name!=="ngClass"){if(!indexWatchExpression){indexWatchExpression=$parse("$index",function moduloTwo($index){return $index&1})}scope.$watch(indexWatchExpression,ngClassIndexWatchAction)}scope.$watch($parse(attr[name],toClassString),ngClassWatchAction);function addClasses(classString){classString=digestClassCounts(split(classString),1);attr.$addClass(classString)}function removeClasses(classString){classString=digestClassCounts(split(classString),-1);attr.$removeClass(classString)}function updateClasses(oldClassString,newClassString){var oldClassArray=split(oldClassString);var newClassArray=split(newClassString);var toRemoveArray=arrayDifference(oldClassArray,newClassArray);var toAddArray=arrayDifference(newClassArray,oldClassArray);var toRemoveString=digestClassCounts(toRemoveArray,-1);var toAddString=digestClassCounts(toAddArray,1);attr.$addClass(toAddString);attr.$removeClass(toRemoveString)}function digestClassCounts(classArray,count){var classesToUpdate=[];forEach(classArray,function(className){if(count>0||classCounts[className]){classCounts[className]=(classCounts[className]||0)+count;if(classCounts[className]===+(count>0)){classesToUpdate.push(className)}}});return classesToUpdate.join(" ")}function ngClassIndexWatchAction(newModulo){if(newModulo===selector){addClasses(oldClassString)}else{removeClasses(oldClassString)}oldModulo=newModulo}function ngClassWatchAction(newClassString){if(!isString(newClassString)){newClassString=toClassString(newClassString)}if(oldModulo===selector){updateClasses(oldClassString,newClassString)}oldClassString=newClassString}}}}];function arrayDifference(tokens1,tokens2){if(!tokens1||!tokens1.length)return[];if(!tokens2||!tokens2.length)return tokens1;var values=[];outer:for(var i=0;i<tokens1.length;i++){var token=tokens1[i];for(var j=0;j<tokens2.length;j++){if(token===tokens2[j])continue outer}values.push(token)}return values}function split(classString){return classString&&classString.split(" ")}function toClassString(classValue){var classString=classValue;if(isArray(classValue)){classString=classValue.map(toClassString).join(" ")}else if(isObject(classValue)){classString=Object.keys(classValue).filter(function(key){return classValue[key]}).join(" ")}return classString}}var ngClassDirective=classDirective("",true);var ngClassOddDirective=classDirective("Odd",0);var ngClassEvenDirective=classDirective("Even",1);var ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined);element.removeClass("ng-cloak")}});var ngControllerDirective=[function(){return{restrict:"A",scope:true,controller:"@",priority:500}}];var ngEventDirectives={};var forceAsyncEvents={blur:true,focus:true};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName]);return function ngEventHandler(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};if(forceAsyncEvents[eventName]&&$rootScope.$$phase){scope.$evalAsync(callback)}else{scope.$apply(callback)}})}}}}]});var ngIfDirective=["$animate","$compile",function($animate,$compile){return{multiElement:true,transclude:"element",priority:600,terminal:true,restrict:"A",$$tlb:true,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function ngIfWatchAction(value){if(value){if(!childScope){$transclude(function(clone,newScope){childScope=newScope;clone[clone.length++]=$compile.$$createComment("end ngIf",$attr.ngIf);block={clone:clone};$animate.enter(clone,$element.parent(),$element)})}}else{if(previousElements){previousElements.remove();previousElements=null}if(childScope){childScope.$destroy();childScope=null}if(block){previousElements=getBlockNodes(block.clone);$animate.leave(previousElements).done(function(response){if(response!==false)previousElements=null});block=null}}})}}}];var ngIncludeDirective=["$templateRequest","$anchorScroll","$animate",function($templateRequest,$anchorScroll,$animate){return{restrict:"ECA",priority:400,terminal:true,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var changeCounter=0,currentScope,previousElement,currentElement;var cleanupLastIncludeContent=function(){if(previousElement){previousElement.remove();previousElement=null}if(currentScope){currentScope.$destroy();currentScope=null}if(currentElement){$animate.leave(currentElement).done(function(response){if(response!==false)previousElement=null});previousElement=currentElement;currentElement=null}};scope.$watch(srcExp,function ngIncludeWatchAction(src){var afterAnimation=function(response){if(response!==false&&isDefined(autoScrollExp)&&(!autoScrollExp||scope.$eval(autoScrollExp))){$anchorScroll()}};var thisChangeId=++changeCounter;if(src){$templateRequest(src,true).then(function(response){if(scope.$$destroyed)return;if(thisChangeId!==changeCounter)return;var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent();$animate.enter(clone,null,$element).done(afterAnimation)});currentScope=newScope;currentElement=clone;currentScope.$emit("$includeContentLoaded",src);scope.$eval(onloadExp)},function(){if(scope.$$destroyed)return;if(thisChangeId===changeCounter){cleanupLastIncludeContent();scope.$emit("$includeContentError",src)}});scope.$emit("$includeContentRequested",src)}else{cleanupLastIncludeContent();ctrl.template=null}})}}}}];var ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){if(toString.call($element[0]).match(/SVG/)){$element.empty();$compile(jqLiteBuildFragment(ctrl.template,window.document).childNodes)(scope,function namespaceAdaptedClone(clone){$element.append(clone)},{futureParentElement:$element});return}$element.html(ctrl.template);$compile($element.contents())(scope)}}}];var ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}});var ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=attr.ngList||", ";var trimValues=attr.ngTrim!=="false";var separator=trimValues?trim(ngList):ngList;var parse=function(viewValue){if(isUndefined(viewValue))return;var list=[];if(viewValue){forEach(viewValue.split(separator),function(value){if(value)list.push(trimValues?trim(value):value)})}return list};ctrl.$parsers.push(parse);ctrl.$formatters.push(function(value){if(isArray(value)){return value.join(ngList)}return undefined});ctrl.$isEmpty=function(value){return!value||!value.length}}}};var VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",EMPTY_CLASS="ng-empty",NOT_EMPTY_CLASS="ng-not-empty";var ngModelMinErr=minErr("ngModel");NgModelController.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"];function NgModelController($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$q,$interpolate){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$$rawModelValue=undefined;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=true;this.$touched=false;this.$pristine=true;this.$dirty=false;this.$valid=true;this.$invalid=false;this.$error={};this.$$success={};this.$pending=undefined;this.$name=$interpolate($attr.name||"",false)($scope);this.$$parentForm=nullFormCtrl;this.$options=defaultModelOptions;this.$$parsedNgModel=$parse($attr.ngModel);this.$$parsedNgModelAssign=this.$$parsedNgModel.assign;this.$$ngModelGet=this.$$parsedNgModel;this.$$ngModelSet=this.$$parsedNgModelAssign;this.$$pendingDebounce=null;this.$$parserValid=undefined;this.$$currentValidationRunId=0;Object.defineProperty(this,"$$scope",{value:$scope});this.$$attr=$attr;this.$$element=$element;this.$$animate=$animate;this.$$timeout=$timeout;this.$$parse=$parse;this.$$q=$q;this.$$exceptionHandler=$exceptionHandler;setupValidity(this);setupModelWatcher(this)}NgModelController.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var invokeModelGetter=this.$$parse(this.$$attr.ngModel+"()"),invokeModelSetter=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function($scope){var modelValue=this.$$parsedNgModel($scope);if(isFunction(modelValue)){modelValue=invokeModelGetter($scope)}return modelValue};this.$$ngModelSet=function($scope,newValue){if(isFunction(this.$$parsedNgModel($scope))){invokeModelSetter($scope,{$$$p:newValue})}else{this.$$parsedNgModelAssign($scope,newValue)}}}else if(!this.$$parsedNgModel.assign){throw ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,startingTag(this.$$element))}},$render:noop,$isEmpty:function(value){return isUndefined(value)||value===""||value===null||value!==value},$$updateEmptyClasses:function(value){if(this.$isEmpty(value)){this.$$animate.removeClass(this.$$element,NOT_EMPTY_CLASS);this.$$animate.addClass(this.$$element,EMPTY_CLASS)}else{this.$$animate.removeClass(this.$$element,EMPTY_CLASS);this.$$animate.addClass(this.$$element,NOT_EMPTY_CLASS)}},$setPristine:function(){this.$dirty=false;this.$pristine=true;this.$$animate.removeClass(this.$$element,DIRTY_CLASS);this.$$animate.addClass(this.$$element,PRISTINE_CLASS)},$setDirty:function(){this.$dirty=true;this.$pristine=false;this.$$animate.removeClass(this.$$element,PRISTINE_CLASS);this.$$animate.addClass(this.$$element,DIRTY_CLASS);this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=false;this.$untouched=true;this.$$animate.setClass(this.$$element,UNTOUCHED_CLASS,TOUCHED_CLASS)},$setTouched:function(){this.$touched=true;this.$untouched=false;this.$$animate.setClass(this.$$element,TOUCHED_CLASS,UNTOUCHED_CLASS)},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce);this.$viewValue=this.$$lastCommittedViewValue;this.$render()},$validate:function(){if(isNumberNaN(this.$modelValue)){return}var viewValue=this.$$lastCommittedViewValue;var modelValue=this.$$rawModelValue;var prevValid=this.$valid;var prevModelValue=this.$modelValue;var allowInvalid=this.$options.getOption("allowInvalid");var that=this;this.$$runValidators(modelValue,viewValue,function(allValid){if(!allowInvalid&&prevValid!==allValid){that.$modelValue=allValid?modelValue:undefined;if(that.$modelValue!==prevModelValue){that.$$writeModelToScope()}}})},$$runValidators:function(modelValue,viewValue,doneCallback){this.$$currentValidationRunId++;var localValidationRunId=this.$$currentValidationRunId;var that=this;if(!processParseErrors()){validationDone(false);return}if(!processSyncValidators()){validationDone(false);return}processAsyncValidators();function processParseErrors(){var errorKey=that.$$parserName||"parse";if(isUndefined(that.$$parserValid)){setValidity(errorKey,null)}else{if(!that.$$parserValid){forEach(that.$validators,function(v,name){setValidity(name,null)});forEach(that.$asyncValidators,function(v,name){setValidity(name,null)})}setValidity(errorKey,that.$$parserValid);return that.$$parserValid}return true}function processSyncValidators(){var syncValidatorsValid=true;forEach(that.$validators,function(validator,name){var result=Boolean(validator(modelValue,viewValue));syncValidatorsValid=syncValidatorsValid&&result;setValidity(name,result)});if(!syncValidatorsValid){forEach(that.$asyncValidators,function(v,name){setValidity(name,null)});return false}return true}function processAsyncValidators(){var validatorPromises=[];var allValid=true;forEach(that.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise)){throw ngModelMinErr("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",promise)}setValidity(name,undefined);validatorPromises.push(promise.then(function(){setValidity(name,true)},function(){allValid=false;setValidity(name,false)}))});if(!validatorPromises.length){validationDone(true)}else{that.$$q.all(validatorPromises).then(function(){validationDone(allValid)},noop)}}function setValidity(name,isValid){if(localValidationRunId===that.$$currentValidationRunId){that.$setValidity(name,isValid)}}function validationDone(allValid){if(localValidationRunId===that.$$currentValidationRunId){doneCallback(allValid)}}},$commitViewValue:function(){var viewValue=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce);if(this.$$lastCommittedViewValue===viewValue&&(viewValue!==""||!this.$$hasNativeValidators)){return}this.$$updateEmptyClasses(viewValue);this.$$lastCommittedViewValue=viewValue;if(this.$pristine){this.$setDirty()}this.$$parseAndValidate()},$$parseAndValidate:function(){var viewValue=this.$$lastCommittedViewValue;var modelValue=viewValue;var that=this;this.$$parserValid=isUndefined(modelValue)?undefined:true;if(this.$$parserValid){for(var i=0;i<this.$parsers.length;i++){modelValue=this.$parsers[i](modelValue);if(isUndefined(modelValue)){this.$$parserValid=false;break}}}if(isNumberNaN(this.$modelValue)){this.$modelValue=this.$$ngModelGet(this.$$scope)}var prevModelValue=this.$modelValue;var allowInvalid=this.$options.getOption("allowInvalid");this.$$rawModelValue=modelValue;if(allowInvalid){this.$modelValue=modelValue;writeToModelIfNeeded()}this.$$runValidators(modelValue,this.$$lastCommittedViewValue,function(allValid){if(!allowInvalid){that.$modelValue=allValid?modelValue:undefined;writeToModelIfNeeded()}});function writeToModelIfNeeded(){if(that.$modelValue!==prevModelValue){that.$$writeModelToScope()}}},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue);forEach(this.$viewChangeListeners,function(listener){try{listener()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(value,trigger){this.$viewValue=value;if(this.$options.getOption("updateOnDefault")){this.$$debounceViewValueCommit(trigger)}},$$debounceViewValueCommit:function(trigger){var debounceDelay=this.$options.getOption("debounce");if(isNumber(debounceDelay[trigger])){debounceDelay=debounceDelay[trigger]}else if(isNumber(debounceDelay["default"])){debounceDelay=debounceDelay["default"]}this.$$timeout.cancel(this.$$pendingDebounce);var that=this;if(debounceDelay>0){this.$$pendingDebounce=this.$$timeout(function(){that.$commitViewValue()},debounceDelay)}else if(this.$$scope.$root.$$phase){this.$commitViewValue()}else{this.$$scope.$apply(function(){that.$commitViewValue()})}},$overrideModelOptions:function(options){this.$options=this.$options.createChild(options)}};function setupModelWatcher(ctrl){ctrl.$$scope.$watch(function ngModelWatch(scope){var modelValue=ctrl.$$ngModelGet(scope);if(modelValue!==ctrl.$modelValue&&(ctrl.$modelValue===ctrl.$modelValue||modelValue===modelValue)){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue;ctrl.$$parserValid=undefined;var formatters=ctrl.$formatters,idx=formatters.length;var viewValue=modelValue;while(idx--){viewValue=formatters[idx](viewValue)}if(ctrl.$viewValue!==viewValue){ctrl.$$updateEmptyClasses(viewValue);ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue;ctrl.$render();ctrl.$$runValidators(ctrl.$modelValue,ctrl.$viewValue,noop)}}return modelValue})}addSetValidityMethod({clazz:NgModelController,set:function(object,property){object[property]=true},unset:function(object,property){delete object[property]}});var ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function ngModelCompile(element){element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS);return{pre:function ngModelPreLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||modelCtrl.$$parentForm,optionsCtrl=ctrls[2];if(optionsCtrl){modelCtrl.$options=optionsCtrl.$options}modelCtrl.$$initGetterSetters();formCtrl.$addControl(modelCtrl);attr.$observe("name",function(newValue){if(modelCtrl.$name!==newValue){modelCtrl.$$parentForm.$$renameControl(modelCtrl,newValue)}});scope.$on("$destroy",function(){modelCtrl.$$parentForm.$removeControl(modelCtrl)})},post:function ngModelPostLink(scope,element,attr,ctrls){var modelCtrl=ctrls[0];if(modelCtrl.$options.getOption("updateOn")){element.on(modelCtrl.$options.getOption("updateOn"),function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)})}function setTouched(){modelCtrl.$setTouched()}element.on("blur",function(){if(modelCtrl.$touched)return;if($rootScope.$$phase){scope.$evalAsync(setTouched)}else{scope.$apply(setTouched)}})}}}}}];var defaultModelOptions;var DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/;function ModelOptions(options){this.$$options=options}ModelOptions.prototype={getOption:function(name){return this.$$options[name]},createChild:function(options){var inheritAll=false;options=extend({},options);forEach(options,function(option,key){if(option==="$inherit"){if(key==="*"){inheritAll=true}else{options[key]=this.$$options[key];if(key==="updateOn"){options.updateOnDefault=this.$$options.updateOnDefault}}}else{if(key==="updateOn"){options.updateOnDefault=false;options[key]=trim(option.replace(DEFAULT_REGEXP,function(){options.updateOnDefault=true;return" "}))}}},this);if(inheritAll){delete options["*"];defaults(options,this.$$options)}defaults(options,defaultModelOptions.$$options);return new ModelOptions(options)}};defaultModelOptions=new ModelOptions({updateOn:"",updateOnDefault:true,debounce:0,getterSetter:false,allowInvalid:false,timezone:null});var ngModelOptionsDirective=function(){NgModelOptionsController.$inject=["$attrs","$scope"];function NgModelOptionsController($attrs,$scope){this.$$attrs=$attrs;this.$$scope=$scope}NgModelOptionsController.prototype={$onInit:function(){var parentOptions=this.parentCtrl?this.parentCtrl.$options:defaultModelOptions;var modelOptionsDefinition=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=parentOptions.createChild(modelOptionsDefinition)}};return{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:true,controller:NgModelOptionsController}};function defaults(dst,src){forEach(src,function(value,key){if(!isDefined(dst[key])){dst[key]=value}})}var ngNonBindableDirective=ngDirective({terminal:true,priority:1e3});var ngOptionsMinErr=minErr("ngOptions");var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;var ngOptionsDirective=["$compile","$document","$parse",function($compile,$document,$parse){function parseOptionsExpression(optionsExp,selectElement,scope){var match=optionsExp.match(NG_OPTIONS_REGEXP);if(!match){throw ngOptionsMinErr("iexp","Expected expression in form of "+"'_select_ (as _label_)? for (_key_,)?_value_ in _collection_'"+" but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement))}var valueName=match[5]||match[7];var keyName=match[6];var selectAs=/ as /.test(match[0])&&match[1];var trackBy=match[9];var valueFn=$parse(match[2]?match[1]:valueName);var selectAsFn=selectAs&&$parse(selectAs);var viewValueFn=selectAsFn||valueFn;var trackByFn=trackBy&&$parse(trackBy);var getTrackByValueFn=trackBy?function(value,locals){return trackByFn(scope,locals)}:function getHashOfValue(value){return hashKey(value)};var getTrackByValue=function(value,key){return getTrackByValueFn(value,getLocals(value,key))};var displayFn=$parse(match[2]||match[1]);var groupByFn=$parse(match[3]||"");var disableWhenFn=$parse(match[4]||"");var valuesFn=$parse(match[8]);var locals={};var getLocals=keyName?function(value,key){locals[keyName]=key;locals[valueName]=value;return locals}:function(value){locals[valueName]=value;return locals};function Option(selectValue,viewValue,label,group,disabled){this.selectValue=selectValue;this.viewValue=viewValue;this.label=label;this.group=group;this.disabled=disabled}function getOptionValuesKeys(optionValues){var optionValuesKeys;if(!keyName&&isArrayLike(optionValues)){optionValuesKeys=optionValues}else{optionValuesKeys=[];for(var itemKey in optionValues){if(optionValues.hasOwnProperty(itemKey)&&itemKey.charAt(0)!=="$"){optionValuesKeys.push(itemKey)}}}return optionValuesKeys}return{trackBy:trackBy,getTrackByValue:getTrackByValue,getWatchables:$parse(valuesFn,function(optionValues){var watchedArray=[];optionValues=optionValues||[];var optionValuesKeys=getOptionValuesKeys(optionValues);var optionValuesLength=optionValuesKeys.length;for(var index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index];var value=optionValues[key];var locals=getLocals(value,key);var selectValue=getTrackByValueFn(value,locals);watchedArray.push(selectValue);if(match[2]||match[1]){var label=displayFn(scope,locals);watchedArray.push(label)}if(match[4]){var disableWhen=disableWhenFn(scope,locals);watchedArray.push(disableWhen)}}return watchedArray}),getOptions:function(){var optionItems=[];var selectValueMap={};var optionValues=valuesFn(scope)||[];var optionValuesKeys=getOptionValuesKeys(optionValues);var optionValuesLength=optionValuesKeys.length;for(var index=0;index<optionValuesLength;index++){var key=optionValues===optionValuesKeys?index:optionValuesKeys[index];var value=optionValues[key];var locals=getLocals(value,key);var viewValue=viewValueFn(scope,locals);var selectValue=getTrackByValueFn(viewValue,locals);var label=displayFn(scope,locals);var group=groupByFn(scope,locals);var disabled=disableWhenFn(scope,locals);var optionItem=new Option(selectValue,viewValue,label,group,disabled);optionItems.push(optionItem);selectValueMap[selectValue]=optionItem}return{items:optionItems,selectValueMap:selectValueMap,getOptionFromViewValue:function(value){return selectValueMap[getTrackByValue(value)]},getViewValueFromOption:function(option){return trackBy?copy(option.viewValue):option.viewValue}}}}}var optionTemplate=window.document.createElement("option"),optGroupTemplate=window.document.createElement("optgroup");function ngOptionsPostLink(scope,selectElement,attr,ctrls){var selectCtrl=ctrls[0];var ngModelCtrl=ctrls[1];var multiple=attr.multiple;for(var i=0,children=selectElement.children(),ii=children.length;i<ii;i++){if(children[i].value===""){selectCtrl.hasEmptyOption=true;selectCtrl.emptyOption=children.eq(i);break}}var providedEmptyOption=!!selectCtrl.emptyOption;var unknownOption=jqLite(optionTemplate.cloneNode(false));unknownOption.val("?");var options;var ngOptions=parseOptionsExpression(attr.ngOptions,selectElement,scope);var listFragment=$document[0].createDocumentFragment();selectCtrl.generateUnknownOptionValue=function(val){return"?"};if(!multiple){selectCtrl.writeValue=function writeNgOptionsValue(value){var selectedOption=options.selectValueMap[selectElement.val()];var option=options.getOptionFromViewValue(value);if(selectedOption)selectedOption.element.removeAttribute("selected");if(option){if(selectElement[0].value!==option.selectValue){selectCtrl.removeUnknownOption();selectCtrl.unselectEmptyOption();selectElement[0].value=option.selectValue;option.element.selected=true}option.element.setAttribute("selected","selected")}else{if(providedEmptyOption){selectCtrl.selectEmptyOption()}else if(selectCtrl.unknownOption.parent().length){selectCtrl.updateUnknownOption(value)}else{selectCtrl.renderUnknownOption(value)}}};selectCtrl.readValue=function readNgOptionsValue(){var selectedOption=options.selectValueMap[selectElement.val()];if(selectedOption&&!selectedOption.disabled){selectCtrl.unselectEmptyOption();selectCtrl.removeUnknownOption();return options.getViewValueFromOption(selectedOption)}return null};if(ngOptions.trackBy){scope.$watch(function(){return ngOptions.getTrackByValue(ngModelCtrl.$viewValue)},function(){ngModelCtrl.$render()})}}else{selectCtrl.writeValue=function writeNgOptionsMultiple(values){var selectedOptions=values&&values.map(getAndUpdateSelectedOption)||[];options.items.forEach(function(option){if(option.element.selected&&!includes(selectedOptions,option)){option.element.selected=false}})};selectCtrl.readValue=function readNgOptionsMultiple(){var selectedValues=selectElement.val()||[],selections=[];forEach(selectedValues,function(value){var option=options.selectValueMap[value];if(option&&!option.disabled)selections.push(options.getViewValueFromOption(option))});return selections};if(ngOptions.trackBy){scope.$watchCollection(function(){if(isArray(ngModelCtrl.$viewValue)){return ngModelCtrl.$viewValue.map(function(value){return ngOptions.getTrackByValue(value)})}},function(){ngModelCtrl.$render()})}}if(providedEmptyOption){selectCtrl.emptyOption.remove();$compile(selectCtrl.emptyOption)(scope);if(selectCtrl.emptyOption[0].nodeType===NODE_TYPE_COMMENT){selectCtrl.hasEmptyOption=false;selectCtrl.registerOption=function(optionScope,optionEl){if(optionEl.val()===""){selectCtrl.hasEmptyOption=true;selectCtrl.emptyOption=optionEl;selectCtrl.emptyOption.removeClass("ng-scope");ngModelCtrl.$render();optionEl.on("$destroy",function(){selectCtrl.hasEmptyOption=false;selectCtrl.emptyOption=undefined})}}}else{selectCtrl.emptyOption.removeClass("ng-scope")}}selectElement.empty();updateOptions();scope.$watchCollection(ngOptions.getWatchables,updateOptions);function addOptionElement(option,parent){var optionElement=optionTemplate.cloneNode(false);parent.appendChild(optionElement);updateOptionElement(option,optionElement)}function getAndUpdateSelectedOption(viewValue){var option=options.getOptionFromViewValue(viewValue);var element=option&&option.element;if(element&&!element.selected)element.selected=true;return option}function updateOptionElement(option,element){option.element=element;element.disabled=option.disabled;if(option.label!==element.label){element.label=option.label;element.textContent=option.label}element.value=option.selectValue}function updateOptions(){var previousValue=options&&selectCtrl.readValue();if(options){for(var i=options.items.length-1;i>=0;i--){var option=options.items[i];if(isDefined(option.group)){jqLiteRemove(option.element.parentNode)}else{jqLiteRemove(option.element)}}}options=ngOptions.getOptions();var groupElementMap={};if(providedEmptyOption){selectElement.prepend(selectCtrl.emptyOption)}options.items.forEach(function addOption(option){var groupElement;if(isDefined(option.group)){groupElement=groupElementMap[option.group];if(!groupElement){groupElement=optGroupTemplate.cloneNode(false);listFragment.appendChild(groupElement);groupElement.label=option.group===null?"null":option.group;groupElementMap[option.group]=groupElement}addOptionElement(option,groupElement)}else{addOptionElement(option,listFragment)}});selectElement[0].appendChild(listFragment);ngModelCtrl.$render();if(!ngModelCtrl.$isEmpty(previousValue)){var nextValue=selectCtrl.readValue();var isNotPrimitive=ngOptions.trackBy||multiple;if(isNotPrimitive?!equals(previousValue,nextValue):previousValue!==nextValue){ngModelCtrl.$setViewValue(nextValue);ngModelCtrl.$render()}}}}return{restrict:"A",terminal:true,require:["select","ngModel"],link:{pre:function ngOptionsPreLink(scope,selectElement,attr,ctrls){ctrls[0].registerOption=noop},post:ngOptionsPostLink}}}];var ngPluralizeDirective=["$locale","$interpolate","$log",function($locale,$interpolate,$log){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{link:function(scope,element,attr){var numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop,lastCount;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}});forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))});scope.$watch(numberExp,function ngPluralizeWatchAction(newVal){var count=parseFloat(newVal);var countIsNaN=isNumberNaN(count);if(!countIsNaN&&!(count in whens)){count=$locale.pluralCat(count-offset)}if(count!==lastCount&&!(countIsNaN&&isNumberNaN(lastCount))){watchRemover();var whenExpFn=whensExpFns[count];if(isUndefined(whenExpFn)){if(newVal!=null){$log.debug("ngPluralize: no rule defined for '"+count+"' in "+whenExp)}watchRemover=noop;updateElementText()}else{watchRemover=scope.$watch(whenExpFn,updateElementText)}lastCount=count}});function updateElementText(newText){element.text(newText||"")}}}}];var ngRepeatDirective=["$parse","$animate","$compile",function($parse,$animate,$compile){var NG_REMOVED="$$NG_REMOVED";var ngRepeatMinErr=minErr("ngRepeat");var updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value;if(keyIdentifier)scope[keyIdentifier]=key;scope.$index=index;scope.$first=index===0;scope.$last=index===arrayLength-1;scope.$middle=!(scope.$first||scope.$last);scope.$odd=!(scope.$even=(index&1)===0)};var getBlockStart=function(block){return block.clone[0]};var getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:true,transclude:"element",priority:1e3,terminal:true,$$tlb:true,compile:function ngRepeatCompile($element,$attr){var expression=$attr.ngRepeat;var ngRepeatEndComment=$compile.$$createComment("end ngRepeat",expression);var match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match){throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression)}var lhs=match[1];var rhs=match[2];var aliasAs=match[3];var trackByExp=match[4];match=lhs.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!match){throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs)}var valueIdentifier=match[3]||match[1];var keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs))){throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs)}var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn;var hashFnLocals={$id:hashKey};if(trackByExp){trackByExpGetter=$parse(trackByExp)}else{trackByIdArrayFn=function(key,value){return hashKey(value)};trackByIdObjFn=function(key){return key}}return function ngRepeatLink($scope,$element,$attr,ctrl,$transclude){if(trackByExpGetter){trackByIdExpFn=function(key,value,index){if(keyIdentifier)hashFnLocals[keyIdentifier]=key;hashFnLocals[valueIdentifier]=value;hashFnLocals.$index=index;return trackByExpGetter($scope,hashFnLocals)}}var lastBlockMap=createMap();$scope.$watchCollection(rhs,function ngRepeatAction(collection){var index,length,previousNode=$element[0],nextNode,nextBlockMap=createMap(),collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove;if(aliasAs){$scope[aliasAs]=collection}if(isArrayLike(collection)){collectionKeys=collection;trackByIdFn=trackByIdExpFn||trackByIdArrayFn}else{trackByIdFn=trackByIdExpFn||trackByIdObjFn;collectionKeys=[];for(var itemKey in collection){if(hasOwnProperty.call(collection,itemKey)&&itemKey.charAt(0)!=="$"){collectionKeys.push(itemKey)}}}collectionLength=collectionKeys.length;nextBlockOrder=new Array(collectionLength);for(index=0;index<collectionLength;index++){key=collection===collectionKeys?index:collectionKeys[index];value=collection[key];trackById=trackByIdFn(key,value,index);if(lastBlockMap[trackById]){block=lastBlockMap[trackById];delete lastBlockMap[trackById];nextBlockMap[trackById]=block;nextBlockOrder[index]=block}else if(nextBlockMap[trackById]){forEach(nextBlockOrder,function(block){if(block&&block.scope)lastBlockMap[block.id]=block});throw ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value)}else{nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined};nextBlockMap[trackById]=true}}for(var blockKey in lastBlockMap){block=lastBlockMap[blockKey];elementsToRemove=getBlockNodes(block.clone);$animate.leave(elementsToRemove);if(elementsToRemove[0].parentNode){for(index=0,length=elementsToRemove.length;index<length;index++){elementsToRemove[index][NG_REMOVED]=true}}block.scope.$destroy()}for(index=0;index<collectionLength;index++){key=collection===collectionKeys?index:collectionKeys[index];value=collection[key];block=nextBlockOrder[index];if(block.scope){nextNode=previousNode;do{nextNode=nextNode.nextSibling}while(nextNode&&nextNode[NG_REMOVED]);if(getBlockStart(block)!==nextNode){$animate.move(getBlockNodes(block.clone),null,previousNode)}previousNode=getBlockEnd(block);updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else{$transclude(function ngRepeatTransclude(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(false);clone[clone.length++]=endNode;$animate.enter(clone,null,previousNode);previousNode=endNode;block.clone=clone;nextBlockMap[block.id]=block;updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)})}}lastBlockMap=nextBlockMap})}}}}];var NG_HIDE_CLASS="ng-hide";var NG_HIDE_IN_PROGRESS_CLASS="ng-hide-animate";var ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:true,link:function(scope,element,attr){scope.$watch(attr.ngShow,function ngShowWatchAction(value){$animate[value?"removeClass":"addClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}];var ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:true,link:function(scope,element,attr){scope.$watch(attr.ngHide,function ngHideWatchAction(value){$animate[value?"addClass":"removeClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}];var ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watch(attr.ngStyle,function ngStyleWatchAction(newStyles,oldStyles){if(oldStyles&&newStyles!==oldStyles){forEach(oldStyles,function(val,style){element.css(style,"")})}if(newStyles)element.css(newStyles)},true)});var ngSwitchDirective=["$animate","$compile",function($animate,$compile){return{require:"ngSwitch",controller:["$scope",function NgSwitchController(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[];var spliceFactory=function(array,index){return function(response){if(response!==false)array.splice(index,1)}};scope.$watch(watchExpr,function ngSwitchWatchAction(value){var i,ii;while(previousLeaveAnimations.length){$animate.cancel(previousLeaveAnimations.pop())}for(i=0,ii=selectedScopes.length;i<ii;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var runner=previousLeaveAnimations[i]=$animate.leave(selected);runner.done(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0;selectedScopes.length=0;if(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"]){forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=$compile.$$createComment("end ngSwitchWhen");var block={clone:caseElement};selectedElements.push(block);$animate.enter(caseElement,anchor.parent(),anchor)})})}})}}}];var ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(scope,element,attrs,ctrl,$transclude){var cases=attrs.ngSwitchWhen.split(attrs.ngSwitchWhenSeparator).sort().filter(function(element,index,array){return array[index-1]!==element});forEach(cases,function(whenCase){ctrl.cases["!"+whenCase]=ctrl.cases["!"+whenCase]||[];ctrl.cases["!"+whenCase].push({transclude:$transclude,element:element})})}});var ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:true,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[];ctrl.cases["?"].push({transclude:$transclude,element:element})}});var ngTranscludeMinErr=minErr("ngTransclude");var ngTranscludeDirective=["$compile",function($compile){return{restrict:"EAC",terminal:true,compile:function ngTranscludeCompile(tElement){var fallbackLinkFn=$compile(tElement.contents());tElement.empty();return function ngTranscludePostLink($scope,$element,$attrs,controller,$transclude){if(!$transclude){throw ngTranscludeMinErr("orphan","Illegal use of ngTransclude directive in the template! "+"No parent directive that requires a transclusion found. "+"Element: {0}",startingTag($element))}if($attrs.ngTransclude===$attrs.$attr.ngTransclude){$attrs.ngTransclude=""}var slotName=$attrs.ngTransclude||$attrs.ngTranscludeSlot;$transclude(ngTranscludeCloneAttachFn,null,slotName);if(slotName&&!$transclude.isSlotFilled(slotName)){useFallbackContent()}function ngTranscludeCloneAttachFn(clone,transcludedScope){if(clone.length&&notWhitespace(clone)){$element.append(clone)}else{useFallbackContent();transcludedScope.$destroy()}}function useFallbackContent(){fallbackLinkFn($scope,function(clone){$element.append(clone)})}function notWhitespace(nodes){for(var i=0,ii=nodes.length;i<ii;i++){var node=nodes[i];if(node.nodeType!==NODE_TYPE_TEXT||node.nodeValue.trim()){return true}}}}}}}];var scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:true,compile:function(element,attr){if(attr.type==="text/ng-template"){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}];var noopNgModelController={$setViewValue:noop,$render:noop};function setOptionSelectedStatus(optionEl,value){optionEl.prop("selected",value);optionEl.attr("selected",value)}var SelectController=["$element","$scope",function($element,$scope){var self=this,optionsMap=new NgMap;self.selectValueMap={};self.ngModelCtrl=noopNgModelController;self.multiple=false;self.unknownOption=jqLite(window.document.createElement("option"));self.hasEmptyOption=false;self.emptyOption=undefined;self.renderUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal);$element.prepend(self.unknownOption);setOptionSelectedStatus(self.unknownOption,true);$element.val(unknownVal)};self.updateUnknownOption=function(val){var unknownVal=self.generateUnknownOptionValue(val);self.unknownOption.val(unknownVal);setOptionSelectedStatus(self.unknownOption,true);$element.val(unknownVal)};self.generateUnknownOptionValue=function(val){return"? "+hashKey(val)+" ?"};self.removeUnknownOption=function(){if(self.unknownOption.parent())self.unknownOption.remove()};self.selectEmptyOption=function(){if(self.emptyOption){$element.val("");setOptionSelectedStatus(self.emptyOption,true)}};self.unselectEmptyOption=function(){if(self.hasEmptyOption){self.emptyOption.removeAttr("selected")}};$scope.$on("$destroy",function(){self.renderUnknownOption=noop});self.readValue=function readSingleValue(){var val=$element.val();var realVal=val in self.selectValueMap?self.selectValueMap[val]:val;if(self.hasOption(realVal)){return realVal}return null};self.writeValue=function writeSingleValue(value){var currentlySelectedOption=$element[0].options[$element[0].selectedIndex];if(currentlySelectedOption)setOptionSelectedStatus(jqLite(currentlySelectedOption),false);if(self.hasOption(value)){self.removeUnknownOption();var hashedVal=hashKey(value);$element.val(hashedVal in self.selectValueMap?hashedVal:value);var selectedOption=$element[0].options[$element[0].selectedIndex];setOptionSelectedStatus(jqLite(selectedOption),true)}else{if(value==null&&self.emptyOption){self.removeUnknownOption();self.selectEmptyOption()}else if(self.unknownOption.parent().length){self.updateUnknownOption(value)}else{self.renderUnknownOption(value)}}};self.addOption=function(value,element){if(element[0].nodeType===NODE_TYPE_COMMENT)return;assertNotHasOwnProperty(value,'"option value"');if(value===""){self.hasEmptyOption=true;self.emptyOption=element}var count=optionsMap.get(value)||0;optionsMap.set(value,count+1);scheduleRender()};self.removeOption=function(value){var count=optionsMap.get(value);if(count){if(count===1){optionsMap.delete(value);if(value===""){self.hasEmptyOption=false;self.emptyOption=undefined}}else{optionsMap.set(value,count-1)}}};self.hasOption=function(value){return!!optionsMap.get(value)};var renderScheduled=false;function scheduleRender(){if(renderScheduled)return;renderScheduled=true;$scope.$$postDigest(function(){renderScheduled=false;self.ngModelCtrl.$render()})}var updateScheduled=false;function scheduleViewValueUpdate(renderAfter){if(updateScheduled)return;updateScheduled=true;$scope.$$postDigest(function(){if($scope.$$destroyed)return;updateScheduled=false;self.ngModelCtrl.$setViewValue(self.readValue());if(renderAfter)self.ngModelCtrl.$render()})}self.registerOption=function(optionScope,optionElement,optionAttrs,interpolateValueFn,interpolateTextFn){if(optionAttrs.$attr.ngValue){var oldVal,hashedVal=NaN;optionAttrs.$observe("value",function valueAttributeObserveAction(newVal){var removal;var previouslySelected=optionElement.prop("selected");if(isDefined(hashedVal)){self.removeOption(oldVal);delete self.selectValueMap[hashedVal];removal=true}hashedVal=hashKey(newVal);oldVal=newVal;self.selectValueMap[hashedVal]=newVal;self.addOption(newVal,optionElement);optionElement.attr("value",hashedVal);if(removal&&previouslySelected){scheduleViewValueUpdate()}})}else if(interpolateValueFn){optionAttrs.$observe("value",function valueAttributeObserveAction(newVal){self.readValue();var removal;var previouslySelected=optionElement.prop("selected");if(isDefined(oldVal)){self.removeOption(oldVal);removal=true}oldVal=newVal;self.addOption(newVal,optionElement);if(removal&&previouslySelected){scheduleViewValueUpdate()}})}else if(interpolateTextFn){optionScope.$watch(interpolateTextFn,function interpolateWatchAction(newVal,oldVal){optionAttrs.$set("value",newVal);var previouslySelected=optionElement.prop("selected");if(oldVal!==newVal){self.removeOption(oldVal)}self.addOption(newVal,optionElement);if(oldVal&&previouslySelected){scheduleViewValueUpdate()}})}else{self.addOption(optionAttrs.value,optionElement)}optionAttrs.$observe("disabled",function(newVal){if(newVal==="true"||newVal&&optionElement.prop("selected")){if(self.multiple){scheduleViewValueUpdate(true)}else{self.ngModelCtrl.$setViewValue(null);self.ngModelCtrl.$render()}}});optionElement.on("$destroy",function(){var currentValue=self.readValue();var removeValue=optionAttrs.value;self.removeOption(removeValue);scheduleRender();if(self.multiple&&currentValue&&currentValue.indexOf(removeValue)!==-1||currentValue===removeValue){scheduleViewValueUpdate(true)}})}}];var selectDirective=function(){return{restrict:"E",require:["select","?ngModel"],controller:SelectController,priority:1,link:{pre:selectPreLink,post:selectPostLink}};function selectPreLink(scope,element,attr,ctrls){var selectCtrl=ctrls[0];var ngModelCtrl=ctrls[1];if(!ngModelCtrl){selectCtrl.registerOption=noop;return}selectCtrl.ngModelCtrl=ngModelCtrl;element.on("change",function(){selectCtrl.removeUnknownOption();scope.$apply(function(){ngModelCtrl.$setViewValue(selectCtrl.readValue())})});if(attr.multiple){selectCtrl.multiple=true;selectCtrl.readValue=function readMultipleValue(){var array=[];forEach(element.find("option"),function(option){if(option.selected&&!option.disabled){var val=option.value;array.push(val in selectCtrl.selectValueMap?selectCtrl.selectValueMap[val]:val)}});return array};selectCtrl.writeValue=function writeMultipleValue(value){forEach(element.find("option"),function(option){var shouldBeSelected=!!value&&(includes(value,option.value)||includes(value,selectCtrl.selectValueMap[option.value]));var currentlySelected=option.selected;if(shouldBeSelected!==currentlySelected){setOptionSelectedStatus(jqLite(option),shouldBeSelected)}})};var lastView,lastViewRef=NaN;scope.$watch(function selectMultipleWatch(){if(lastViewRef===ngModelCtrl.$viewValue&&!equals(lastView,ngModelCtrl.$viewValue)){lastView=shallowCopy(ngModelCtrl.$viewValue);ngModelCtrl.$render()}lastViewRef=ngModelCtrl.$viewValue});ngModelCtrl.$isEmpty=function(value){return!value||value.length===0}}}function selectPostLink(scope,element,attrs,ctrls){var ngModelCtrl=ctrls[1];if(!ngModelCtrl)return;var selectCtrl=ctrls[0];ngModelCtrl.$render=function(){selectCtrl.writeValue(ngModelCtrl.$viewValue)}}};var optionDirective=["$interpolate",function($interpolate){return{restrict:"E",priority:100,compile:function(element,attr){var interpolateValueFn,interpolateTextFn;if(isDefined(attr.ngValue)){}else if(isDefined(attr.value)){interpolateValueFn=$interpolate(attr.value,true)}else{interpolateTextFn=$interpolate(element.text(),true);if(!interpolateTextFn){attr.$set("value",element.text())}}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);if(selectCtrl){selectCtrl.registerOption(scope,element,attr,interpolateValueFn,interpolateTextFn)}}}}}];var requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(!ctrl)return;attr.required=true;ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)};attr.$observe("required",function(){ctrl.$validate()})}}};var patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(!ctrl)return;var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0){regex=new RegExp("^"+regex+"$")}if(regex&&!regex.test){throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm))}regexp=regex||undefined;ctrl.$validate()});ctrl.$validators.pattern=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||isUndefined(regexp)||regexp.test(viewValue)}}}};var maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(!ctrl)return;var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=toInt(value);maxlength=isNumberNaN(intVal)?-1:intVal;ctrl.$validate()});ctrl.$validators.maxlength=function(modelValue,viewValue){return maxlength<0||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}};var minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(!ctrl)return;var minlength=0;attr.$observe("minlength",function(value){minlength=toInt(value)||0;ctrl.$validate()});ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}};if(window.angular.bootstrap){if(window.console){console.log("WARNING: Tried to load angular more than once.")}return}bindJQuery();publishExternalAPI(angular);angular.module("ngLocale",[],["$provide",function($provide){var PLURAL_CATEGORY={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};function getDecimals(n){n=n+"";var i=n.indexOf(".");return i==-1?0:n.length-i-1}function getVF(n,opt_precision){var v=opt_precision;if(undefined===v){v=Math.min(getDecimals(n),3)}var base=Math.pow(10,v);var f=(n*base|0)%base;return{v:v,f:f}}$provide.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-ยค",negSuf:"",posPre:"ยค",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(n,opt_precision){var i=n|0;var vf=getVF(n,opt_precision);if(i==1&&vf.v==0){return PLURAL_CATEGORY.ONE}return PLURAL_CATEGORY.OTHER}})}]);jqLite(function(){angularInit(window.document,bootstrap)})})(window);!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},{}],94:[function(require,module,exports){require("./angular");module.exports=angular},{"./angular":93}]},{},[1]);